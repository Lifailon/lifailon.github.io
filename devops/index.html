<!doctype html><html data-theme=light lang=en xmlns=http://www.w3.org/1999/xhtml><head><meta charset=UTF-8><meta content="Web version for PowerShell notes in Russian language (Сheat Sheet & Documentation) and RuDocs (node.js)" name=description><meta content="width=device-width,initial-scale=1" name=viewport><meta content=#ff7800 name=theme-color><meta content=#ffa348 media=(prefers-color-scheme:dark) name=theme-color><meta content="default-src 'none';font-src 'self';img-src 'self' https: data:;media-src 'self' https:;style-src 'self' 'unsafe-inline';frame-src https://player.vimeo.com https://www.youtube-nocookie.com https://toot.community;frame-ancestors 'none';base-uri 'none';form-action 'none';connect-src 'self' https://toot.community;script-src 'self' 'self'" http-equiv=content-security-policy><title>PowerShell Commands / RuDocs</title><link href=https://lifailon.github.io/devops/ rel=canonical><link href=https://lifailon.github.io/favicon.png rel=icon type=image/png><link href=https://lifailon.github.io/apple-touch-icon.png rel=apple-touch-icon sizes=180x180 type=image/png><link title="PowerShell Commands / RuDocs - RSS Feed" href=https://lifailon.github.io/rss.xml rel=alternate type=application/rss+xml><link title="PowerShell Commands / RuDocs - Atom Feed" href=https://lifailon.github.io/atom.xml rel=alternate type=application/atom+xml><style>:root{--accent-color:#ff7800;--contrast-color:#000c}[data-theme=dark]{--accent-color:#ffa348}@media (prefers-color-scheme:dark){:root:not([data-theme=light]){--accent-color:#ffa348}}[data-theme=dark]{--contrast-color:#000c}@media (prefers-color-scheme:dark){:root:not([data-theme=light]){--contrast-color:#000c}}</style><link href=https://lifailon.github.io/style.css rel=stylesheet><link media="(prefers-color-scheme: light)" href=https://lifailon.github.io/syntax-theme-light.css rel=stylesheet><link media="(prefers-color-scheme: dark)" href=https://lifailon.github.io/syntax-theme-dark.css rel=stylesheet><script defer src=https://lifailon.github.io/closable.js></script><script defer src=https://lifailon.github.io/copy-button.js></script><script defer src=https://lifailon.github.io/fuse.js></script><script defer src=https://lifailon.github.io/search-fuse.js></script><script defer src=https://lifailon.github.io/theme-switcher.js></script><meta content="PowerShell Commands / RuDocs" property=og:site_name><meta content="PowerShell Commands / RuDocs" property=og:title><meta content=https://lifailon.github.io/devops/ property=og:url><meta content="Web version for PowerShell notes in Russian language (Сheat Sheet & Documentation) and RuDocs (node.js)" property=og:description><meta content=https://lifailon.github.io/card.png property=og:image><meta content=en_US property=og:locale><body><div id=handle></div><header id=site-nav><nav><a href=#main-content tabindex=0> Skip to Main Content </a><ul><li id=home><a href=https://lifailon.github.io> <i class=icon></i>PowerShell Commands / RuDocs</a><li class=divider><li><a href=https://lifailon.github.io/powershell/>PowerShell</a><li><a href=https://lifailon.github.io/linux/>Linux</a><li><a href=https://lifailon.github.io/docker/>Docker</a><li><a href=https://lifailon.github.io/windowsserver/>Windows Server</a><li><a href=https://lifailon.github.io/database/>Database</a><li><a class=active href=https://lifailon.github.io/devops/>DevOps</a><li><a href=https://lifailon.github.io/node-js/>Node.js</a><li id=search><button class=circle id=search-toggle title=Search><i class=icon></i></button><li id=theme-switcher><details class=closable><summary class=circle title=Theme><i class=icon></i></summary> <ul><li><button title="Switch to Light Theme" class=circle id=theme-light><i class=icon></i></button><li><button title="Switch to Dark Theme" class=circle id=theme-dark><i class=icon></i></button><li><button title="Use System Theme" class=circle id=theme-system><i class=icon></i></button></ul></details><li id=repo><a class=circle href=https://github.com/Lifailon/PS-Commands title=Repository> <i class=icon></i> </a></ul></nav><div id=search-container><label class=visually-hidden for=search-bar>Search</label><input placeholder="Search for…" autocomplete=off disabled id=search-bar type=search><div id=search-results-container><div id=search-results></div></div></div></header><main id=main-content><h1></h1><div class="crt scanlines" aria-hidden=true><pre class=z-code><code><span class="z-text z-plain">    ____               ____              
</span><span class="z-text z-plain">   / __ \ ___  _   __ / __ \ ____   _____
</span><span class="z-text z-plain">  / / / // _ \| | / // / / // __ \ / ___/
</span><span class="z-text z-plain"> / /_/ //  __/| |/ // /_/ // /_/ /(__  ) 
</span><span class="z-text z-plain">/_____/ \___/ |___/ \____// .___//____/  
</span><span class="z-text z-plain">                         /_/             
</span></code></pre></div><hr><ul><li><a href=https://lifailon.github.io/devops/#git>Git</a><li><a href=https://lifailon.github.io/devops/#github-api>GitHub api</a><li><a href=https://lifailon.github.io/devops/#github-actions>GitHub Actions</a> <ul><li><a href=https://lifailon.github.io/devops/#runner-agent>Runner (Agent)</a><li><a href=https://lifailon.github.io/devops/#build-pipeline>Build (Pipeline)</a><li><a href=https://lifailon.github.io/devops/#ci>CI</a><li><a href=https://lifailon.github.io/devops/#logs>Logs</a></ul><li><a href=https://lifailon.github.io/devops/#vercel>Vercel</a> <ul><li><a href=https://lifailon.github.io/devops/#cd>CD</a></ul><li><a href=https://lifailon.github.io/devops/#gitlab>GitLab</a><li><a href=https://lifailon.github.io/devops/#jenkins>Jenkins</a> <ul><li><a href=https://lifailon.github.io/devops/#ssh-steps>SSH Steps</a><li><a href=https://lifailon.github.io/devops/#httpurlconnection>HttpURLConnection</a><li><a href=https://lifailon.github.io/devops/#active-choices-parameter>Active Choices Parameter</a></ul><li><a href=https://lifailon.github.io/devops/#graylog>Graylog</a><li><a href=https://lifailon.github.io/devops/#ansible>Ansible</a> <ul><li><a href=https://lifailon.github.io/devops/#hosts>Hosts</a><li><a href=https://lifailon.github.io/devops/#windows-modules>Windows Modules</a></ul></ul><hr><h1 id=git><a aria-label="Anchor link for: git" class=zola-anchor href=#git><i class=icon></i></a> Git</h1><p><code>git --version</code> <br> <code>git config --global user.name "Lifailon"</code> добавить имя для коммитов <br> <code>git config --global user.email "lifailon@yandex.ru"</code> <br> <code>git config --global --edit</code> <br> <code>ssh-keygen -t rsa -b 4096</code> <br> <code>Get-Service | where name -match "ssh-agent" | Set-Service -StartupType Automatic</code> <br> <code>Get-Service | where name -match "ssh-agent" | Start-Service</code> <br> <code>Get-Service | where name -match "ssh-agent" | select Name,Status,StartType</code> <br> <code>ssh-agent</code> <br> <code>ssh-add C:\Users\Lifailon\.ssh\id_rsa</code> <br> <code>cat ~\.ssh\id_rsa.pub | Set-Clipboard</code> copy to <a href=https://github.com/settings/keys>settings keys</a> <br> <code>cd $home\Documents\Git</code> <br> <code>git clone git@github.com:Lifailon/lifailon.github.io</code> <br> <code>cd lifailon.github.io</code> <br> <code>git grep "ping ya.ru"</code> поиск текста в файлах <br> <code>git fetch</code> загрузить изменения из удаленного хранилища для обновления всех веток локального репозитория, не затрагивая текущую рабочую ветку (загружает все коммиты, ветки и т.д. которые не присутствуют в локальном репозитории) <br> <code>git fetch --all</code> загрузить все ветки с удаленного репозитория (обновляет информацию о состоянии удаленного репозитория и загружает все изменения ваших веток без автоматического объединения) <br> <code>git pull</code> загрузить изменения из удаленного хранилища для обновления локального репозитория (выполняет git fetch, чтобы получить последние изменения из удаленного репозитория, а затеим объеденяем изменения с локальной копией с помощью git merge для обновления текущей рабочей ветки) <br> <code>git status</code> отобразить статус изменений по файлам <br> <code>git diff</code> отобразить историю изменений построчно <br> <code>git diff pandoc</code> сравнивает изменения в текущей рабочей директории с последним коммитом в указанной ветке <br> <code>git add .</code> добавить (проиндексировать) изменения во всех файлах текущего каталога <br> <code>git commit -m "update powershell commands"</code> сохранить изменения с комментарием <br> <code>git push</code> синхронизировать локальные изменения с репозиторием на сервере <br> <code>git push origin mkdocs-material</code> отправить в конкретную ветку <br> <code>git push origin --delete mkdocs</code> удалить ветку на удаленном сервере <br> <code>git commit --amend</code> изменить комментарий в последнем коммите (до push) <br> <code>git branch -a</code> отобразить все ветки (в том числе удаленные remotes/origin) <br> <code>git branch hugo</code> создать новую ветку <br> <code>git branch -m hugo-public</code> переименовать текущую ветку <br> <code>git branch -d hugo-public</code> удалить ветку <br> <code>git switch hugo</code> переключиться на другую ветку <br> <code>git push origin hugo</code> отправить изменения в указанную ветку <br> <code>git push --set-upstream origin hugo</code> отслеживать изменения в ветке (позволяет делать push без указания ветки) <br> <code>git merge hugo</code> слияние текущей ветки (pandoc) с указанной (hugo) <br> <code>git log --oneline --all</code> лог коммитов <br> <code>git log --graph</code> коммиты и следование веток <br> <code>git log --author="Lifailon"</code> показывает историю коммитов указанного пользователя <br> <code>git blame index.html</code> показывает, кто и когда внес изменения в каждую строку указанного файла <br> <code>git show d01f09dead3a6a8d75dda848162831c58ca0ee13</code> отобразить подробный лог по номеру коммита <br> <code>git restore filename</code> отменить все локальные изменения в рабочей копии независимо от того, были они проиндексированы или нет (если была индексация через add), возвращая его к состоянию на момент последнего коммита <br> <code>git restore --source d01f09dead3a6a8d75dda848162831c58ca0ee13 filename</code> восстановить файл на указанную версию по хэшу индентификатора коммита <br> <code>git checkout filename</code> откатить изменения не проиндексированные для коммита, возвращая его к состоянию, каким оно было на момент последнего коммита (если не было индексации через add) <br> <code>git checkout d01f09dead3a6a8d75dda848162831c58ca0ee13</code> переключить локальные файлы рабочей копии на указанный коммит (переключает HEAD на указанный коммит) <br> <code>git reset HEAD filename</code> удалить указанный файл из индекса без удаления самих изменений в файле для последующей повторной индексации (если был add но не было commit, потом выполнить checkout) <br> <code>git reset --soft HEAD^</code> отменяет последний (^) коммит, сохраняя изменения из этого коммита в рабочем каталоге и индексе (подготовленной области), можно внести изменения в файлы и повторно их зафиксировать <br> <code>git reset --hard HEAD^</code> полностью отменяет последний коммит, удаляя все его изменения из рабочего каталога и индекса до состояния последнего коммита <br> <code>git reset --hard d01f09dead3a6a8d75dda848162831c58ca0ee13</code> откатывает HEAD к указанному коммиту и удаляет все коммиты, которые были сделаны после него (будут потеряны все незакоммиченные изменения и историю коммитов после указанного) <br> <code>git revert HEAD --no-edit</code> создает новый коммит, который отменяет последний коммит (HEAD) и новый коммит будет добавлен поверх него (события записываются в git log) <br> <code>git revert d01f09dead3a6a8d75dda848162831c58ca0ee13</code> создает новый коммит, который отменяет изменения, внесенные в указанный коммит с хешем (не изменяет историю коммитов, а создает новый коммит с изменениями отмены) <br> <code>git stash</code> сохраняет текущие изменения в стэш (временное хранилище) и очищает рабочую директорию <br> <code>git stash pop</code> применяет последние изменения из стэша к текущей ветке<h1 id=github-api><a aria-label="Anchor link for: github-api" class=zola-anchor href=#github-api><i class=icon></i></a> GitHub api</h1><p><code>$user = "Lifailon"</code> <br> <code>$repository = "ReverseProxyNET"</code> <br> <code>Invoke-RestMethod https://api.github.com/users/$($user)</code> получаем информацию о пользователе <br> <code>Invoke-RestMethod https://api.github.com/users/$($user)/repos</code> получаем список последних (актуальные коммиты) 30 репозиториев указанного пользователя <br> <code>Invoke-RestMethod https://api.github.com/users/$($user)/repos?per_page=100</code> получаем список последних (актуальные коммиты) 100 репозиториев указанного пользователя <br> <code>Invoke-RestMethod https://api.github.com/repos/$($user)/$($repository)/contents</code> получаем содержимое корневой директории репозитория <br> <code>Invoke-RestMethod https://api.github.com/repos/$($user)/$($repository)/contents/source/rpnet.cs</code> получаем содержимое файла в формате Base64 <br> <code>$commits = Invoke-RestMethod https://api.github.com/repos/$($user)/$($repository)/commits</code> получаем список коммитов <br> <code>$commits[0].commit.message</code> читаем комментарий последнего коммита <br> <code>$commits[0].commit.committer.date</code> получаем дату последнего коммита <br> <code>Invoke-RestMethod https://api.github.com/repos/$($user)/$($repository)/commits/$($commits[0].sha)</code> получаем подробную информацию изменений о последнем коммите в репозитории <br> <code>$releases_latest = Invoke-RestMethod "https://api.github.com/repos/$($user)/$($repository)/releases/latest"</code> получаем информацию о последнем релизе в репозитории <br> <code>$releases_latest.assets.name</code> список приложенных файлов последнего релиза <br> <code>$releases_latest.assets.browser_download_url</code> получаем список url для загрузки файлов <br> <code>$($releases_latest.assets | Where-Object name -like "*win*x64*exe*").browser_download_url</code> фильтруем по ОС и разрядности <br> <code>$(Invoke-RestMethod -Uri "https://api.github.com/repos/Lifailon/epic-games-radar/commits?path=api/giveaway/index.json")[0].commit.author.date</code> узнать дату последнего обновления файла в репозитории <br> <code>$issues = Invoke-RestMethod https://api.github.com/repos/LibreHardwareMonitor/LibreHardwareMonitor/issues?per_page=500</code> получаем список открытых проблем в репозитории (получаем максимум 100 последних, по умолчанию забираем последние 30 issues) <br> <code>$issue_number = $($issues | Where-Object title -match "PowerShell").number</code> получаем номер issue, в заголовке которого есть слово “PowerShell” <br> <code>Invoke-RestMethod https://api.github.com/repos/LibreHardwareMonitor/LibreHardwareMonitor/issues/$($issue_number)/comments</code> отобразить список комментарием указанного issues <br> <code>Invoke-RestMethod https://api.github.com/repos/LibreHardwareMonitor/LibreHardwareMonitor/languages</code> получаем список языков программирования, используемых в репозитории <br> <code>Invoke-RestMethod https://api.github.com/repos/LibreHardwareMonitor/LibreHardwareMonitor/pulls</code> получаем список всех pull requests в репозитории <br> <code>Invoke-RestMethod https://api.github.com/repos/LibreHardwareMonitor/LibreHardwareMonitor/forks</code> получаем список форков (forks) <br> <code>Invoke-RestMethod https://api.github.com/repos/LibreHardwareMonitor/LibreHardwareMonitor/stargazers?per_page=4000</code> получаем список пользователей, которые поставили звезды репозиторию <br> <code>Invoke-RestMethod https://api.github.com/repos/LibreHardwareMonitor/LibreHardwareMonitor/subscribers</code> получаем список подписчиков (watchers) репозитория<h1 id=github-actions><a aria-label="Anchor link for: github-actions" class=zola-anchor href=#github-actions><i class=icon></i></a> GitHub Actions</h1><h2 id=runner-agent><a aria-label="Anchor link for: runner-agent" class=zola-anchor href=#runner-agent><i class=icon></i></a> Runner (Agent)</h2><p><code>mkdir actions-runner; cd actions-runner</code> <br> <code>Invoke-WebRequest -Uri https://github.com/actions/runner/releases/download/v2.316.1/actions-runner-win-x64-2.316.1.zip -OutFile actions-runner-win-x64-2.316.1.zip</code> загрузить пакет с Runner последней версии <br> <code>if((Get-FileHash -Path actions-runner-win-x64-2.316.1.zip -Algorithm SHA256).Hash.ToUpper() -ne 'e41debe4f0a83f66b28993eaf84dad944c8c82e2c9da81f56a850bc27fedd76b'.ToUpper()){ throw 'Computed checksum did not match' }</code> проверить валидность пакета с помощью hash-суммы <br> <code>Add-Type -AssemblyName System.IO.Compression.FileSystem ; [System.IO.Compression.ZipFile]::ExtractToDirectory("$PWD/actions-runner-win-x64-2.316.1.zip", "$PWD")</code> разархивировать <br> <code>Remove-Item *.zip</code> удалить архив <br> <code>./config.cmd --url https://github.com/Lifailon/egapi --token XXXXXXXXXXXXXXXXXXXXXXXXXXXXX</code> авторизовать и сконфигурировать сборщика с помощью скрипта (что бы на последнем пункте создать службу для управления сборщиком, нужно запустить консоль с правами администратора) <br> <code>./run.cmd</code> запустить процесс (если не используется служба) <br> <code>Get-Service *actions* | Start-Service</code> запустить службу <br> <code>Get-Process *Runner.Listener*</code> <br> <code>./config.cmd remove --token XXXXXXXXXXXXXXXXXXXXXXXXXXXXX</code> удалить конфигурацию<h2 id=build-pipeline><a aria-label="Anchor link for: build-pipeline" class=zola-anchor href=#build-pipeline><i class=icon></i></a> Build (Pipeline)</h2><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">build-game-list</span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml"><span class="z-constant z-language z-boolean z-yaml">on</span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> Разрешить ручной запуск workflow через интерфейс GitHub
</span></span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">workflow_dispatch</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  
</span><span class="z-source z-yaml">  <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> Запускать workflow по расписанию каждый час в 00 минут
</span></span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">schedule</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">cron</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-single z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">'</span>00 * * * *<span class="z-punctuation z-definition z-string z-end z-yaml">'</span></span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">jobs</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">Job_01</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> Указываем, что job будет выполняться на последней версии Ubuntu
</span></span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">runs-on</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ubuntu-latest</span>
</span><span class="z-source z-yaml">    
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">steps</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> Шаги, которые будут выполнены в рамках этого job
</span></span><span class="z-source z-yaml">    <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Checkout repository</span>
</span><span class="z-source z-yaml">      <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> Клонирования репозиторий
</span></span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">uses</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">actions/checkout@v2</span>
</span><span class="z-source z-yaml">    
</span><span class="z-source z-yaml">    <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Get content and write to file</span>
</span><span class="z-source z-yaml">      <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> Выполняем скрипт PowerShell, расположенный в ./scripts/Get-GameList.ps1
</span></span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">run</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">pwsh -File ./scripts/Get-GameList.ps1</span>
</span><span class="z-source z-yaml">      <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> Указываем, что команда должна выполняться в оболочке bash
</span></span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">shell</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">bash</span> 
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml">    <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Commit and push changes</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">run</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-keyword z-control z-flow z-block-scalar z-literal z-yaml">|</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">        # Задаем имя пользователя и email для коммитов
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">        git config --global user.name 'GitHub Actions'
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">        git config --global user.email 'actions@github.com'
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">        # Добавляем все изменения в индекс
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">        git add .
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">        # Делаем коммит с комментарием
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">        git commit -m "update game list"
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">        # Отправляем коммит в удаленный репозиторий
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">        git push
</span></span></code></pre><h2 id=ci><a aria-label="Anchor link for: ci" class=zola-anchor href=#ci><i class=icon></i></a> CI</h2><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Docker Build and Push Image</span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml"><span class="z-constant z-language z-boolean z-yaml">on</span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> Запусать при git push в ветку main
</span></span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">push</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">branches</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">main</span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">jobs</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">build</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">runs-on</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ubuntu-latest</span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">steps</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Клонируем репозиторий</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">uses</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">actions/checkout@v2</span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml">    <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Авторизация в Docker Hub</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">uses</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">docker/login-action@v3</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">with</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">username</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">${{ secrets.DOCKER_USERNAME }}</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">password</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">${{ secrets.DOCKER_PASSWORD }}</span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml">    <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Сборка образа и отправка в Docker Hub</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">run</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-keyword z-control z-flow z-block-scalar z-literal z-yaml">|</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">        docker build -t lifailon/torapi:latest .
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">        docker push lifailon/torapi:latest
</span></span></code></pre><h2 id=logs><a aria-label="Anchor link for: logs" class=zola-anchor href=#logs><i class=icon></i></a> Logs</h2><p><code>$(Invoke-RestMethod https://api.github.com/repos/Lifailon/TorAPI/actions/workflows).total_count</code> получить количество запусков всех рабочих процессов <br> <code>$(Invoke-RestMethod https://api.github.com/repos/Lifailon/TorAPI/actions/workflows).workflows</code> подробная информации о запускаемых рабочих процессах <br> <code>$actions_last_id = $(Invoke-RestMethod https://api.github.com/repos/Lifailon/TorAPI/actions/workflows).workflows[-1].id</code> получить идентификатор последнего события <br> <code>$(Invoke-RestMethod https://api.github.com/repos/Lifailon/TorAPI/actions/workflows/$actions_last_id/runs).workflow_runs</code> подробная информация о последней сборке <br> <code>$run_id = $(Invoke-RestMethod https://api.github.com/repos/Lifailon/TorAPI/actions/workflows/$actions_last_id/runs).workflow_runs.id</code> получить идентификатор запуска рабочего процесса <br> <code>$(Invoke-RestMethod "https://api.github.com/repos/Lifailon/TorAPI/actions/runs/$run_id/jobs").jobs.steps</code> подробная информация для всех шагов выполнения (время работы и статус выполнения) <br> <code>$jobs_id = $(Invoke-RestMethod "https://api.github.com/repos/Lifailon/TorAPI/actions/runs/$run_id/jobs").jobs[0].id</code> получить идентификатор последнего задания указанного рабочего процесса<pre class="language-PowerShell z-code" data-lang=PowerShell><code class=language-PowerShell data-lang=PowerShell><span class="z-source z-powershell"><span class="z-variable z-other z-readwrite z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>url</span> <span class="z-keyword z-operator z-assignment z-powershell">=</span> <span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span>https://api.github.com/repos/Lifailon/TorAPI/actions/jobs/<span class="z-variable z-other z-readwrite z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>jobs_id</span>/logs<span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span>
</span><span class="z-source z-powershell"><span class="z-variable z-other z-readwrite z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>headers</span> <span class="z-keyword z-operator z-assignment z-powershell">=</span> <span class="z-meta z-hashtable z-powershell"><span class="z-keyword z-other z-hashtable z-begin z-powershell">@</span><span class="z-punctuation z-section z-braces z-begin z-powershell">{</span>
</span></span><span class="z-source z-powershell"><span class="z-meta z-hashtable z-powershell">    <span class="z-meta z-hashtable z-assignment z-powershell"><span class="z-variable z-other z-readwrite z-powershell">Authorization</span> <span class="z-keyword z-operator z-assignment z-powershell">=</span> </span><span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span>token ghp_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX<span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span>
</span></span><span class="z-source z-powershell"><span class="z-meta z-hashtable z-powershell"><span class="z-punctuation z-section z-braces z-end z-powershell">}</span></span>
</span><span class="z-source z-powershell"><span class="z-support z-function z-powershell">Invoke-RestMethod</span> <span class="z-keyword z-operator z-assignment z-powershell">-</span>Uri <span class="z-variable z-other z-readwrite z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>url</span> <span class="z-keyword z-operator z-assignment z-powershell">-</span>Headers <span class="z-variable z-other z-readwrite z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>headers</span> <span class="z-comment z-line z-powershell"><span class="z-punctuation z-definition z-comment z-powershell">#</span> получить логи задания<span class="z-punctuation z-definition z-comment z-powershell">
</span></span></span></code></pre><h1 id=vercel><a aria-label="Anchor link for: vercel" class=zola-anchor href=#vercel><i class=icon></i></a> Vercel</h1><p><code>npm i -g vercel</code> установить глобально в систему Vercel CLI <br> <code>vercel --version</code> выводит текущую версию установленного Vercel CLI <br> <code>vercel login</code> выполняет вход в аккаунт Vercel (<code>> Continue with GitHub</code>) <br> <code>vercel logout</code> выполняет выход из аккаунта Vercel <br> <code>vercel init</code> инициализирует новый проект в текущей директории (создает файл конфигурации vercel.json и другие файлы, необходимые для проекта) <br> <code>vercel dev</code> запускает локальный сервер для проверки работоспособности (http://localhost:3000) <br> <code>vercel deploy</code> загружает проект на серверы Vercel и развертывает его <br> <code>vercel link</code> привязывает текущую директорию к существующему проекту на сервере Vercel (выбрать из списка) <br> <code>vercel unlink</code> отменяет привязку текущей директории от проекта Vercel <br> <code>vercel env</code> управляет переменными окружения для проекта <br> <code>vercel env pull</code> подтягивает переменные окружения с Vercel в локальный .env файл <br> <code>vercel env ls</code> показывает список всех переменных окружения для проекта <br> <code>vercel env add &LTkey> &LTenvironment></code> добавляет новую переменную окружения для указанного окружения (production, preview, development) <br> <code>vercel env rm &LTkey> &LTenvironment></code> удаляет переменную окружения из указанного окружения <br> <code>vercel projects</code> управляет проектами Vercel <br> <code>vercel projects ls</code> показывает список всех проектов <br> <code>vercel projects add</code> добавляет новый проект <br> <code>vercel projects rm &LTproject></code> удаляет указанный проект <br> <code>vercel pull</code> подтягивает последние настройки окружения с Vercel <br> <code>vercel alias</code> управляет алиасами доменов для проектов <br> <code>vercel alias ls</code> показывает список всех алиасов для текущего проекта <br> <code>vercel alias set &LTalias></code> устанавливает алиас для указанного проекта <br> <code>vercel alias rm &LTalias></code> удаляет указанный алиас <br> <code>vercel domains</code> управляет доменами, привязанными к проекту <br> <code>vercel domains ls</code> показывает список всех доменов <br> <code>vercel domains add &LTdomain></code> добавляет новый домен к проекту <br> <code>vercel domains rm &LTdomain></code> удаляет указанный домен <br> <code>vercel teams</code> управляет командами и членами команд на Vercel <br> <code>vercel teams ls</code> показывает список всех команд <br> <code>vercel teams add &LTteam></code> добавляет новую команду <br> <code>vercel teams rm &LTteam></code> удаляет указанную команду <br> <code>vercel logs &LTdeployment></code> выводит логи для указанного деплоя <br> <code>vercel secrets</code> управляет секретами, используемыми в проектах <br> <code>vercel secrets add &LTname> &LTvalue></code> добавляет новый секрет <br> <code>vercel secrets rm &LTname></code> удаляет указанный секрет <br> <code>vercel secrets ls</code> показывает список всех секретов <br> <code>vercel switch &LTteam></code> переключается между командами и аккаунтами Vercel<h2 id=cd><a aria-label="Anchor link for: cd" class=zola-anchor href=#cd><i class=icon></i></a> CD</h2><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Deploy to Vercel</span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml"><span class="z-constant z-language z-boolean z-yaml">on</span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">workflow_dispatch</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">jobs</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">deploy</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">runs-on</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ubuntu-latest</span>
</span><span class="z-source z-yaml">    
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">steps</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Clone repository</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">uses</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">actions/checkout@v4</span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml">    <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Install Node.js</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">uses</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">actions/setup-node@v4</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">with</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">node-version</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-single z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">'</span>20<span class="z-punctuation z-definition z-string z-end z-yaml">'</span></span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml">    <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Install dependencies</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">run</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">npm install</span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml">    <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Deploy to Vercel</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">uses</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">amondnet/vercel-action@v25</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">with</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">vercel-token</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">${{ secrets.VERCEL_TOKEN }}</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">vercel-org-id</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">${{ secrets.VERCEL_ORG_ID }}</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">vercel-project-id</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">${{ secrets.VERCEL_PROJECT_ID }}</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">vercel-args</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-single z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">'</span>--prod<span class="z-punctuation z-definition z-string z-end z-yaml">'</span></span>
</span></code></pre><h1 id=gitlab><a aria-label="Anchor link for: gitlab" class=zola-anchor href=#gitlab><i class=icon></i></a> GitLab</h1><pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> run<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>detach</span> <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">    --</span>hostname</span> 192.168.3.101 <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">    --</span>publish</span> 443:443<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>publish</span> 80:80<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>publish</span> 2222:22 <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">    --</span>name</span> gitlab <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">    --</span>restart</span> always <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">    --</span>volume</span> /srv/gitlab/config:/etc/gitlab <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">    --</span>volume</span> /srv/gitlab/logs:/var/log/gitlab <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">    --</span>volume</span> /srv/gitlab/data:/var/opt/gitlab <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">    gitlab/gitlab-ee:latest</span>
</span></code></pre><p><code>docker logs -f gitlab</code> логи контейнера <br> <code>docker exec -it gitlab cat /etc/gitlab/initial_root_password</code> получить пароль для root <br> <code>docker exec -it gitlab cat /etc/gitlab/gitlab.rb</code> конфигурация сервера<p>Получить токен регистрации Runner: http://192.168.3.101/root/torapi/-/settings/ci_cd#js-runners-settings<p><code>curl -L --output /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-amd64</code> загрузить исполняемый файл Runner <code>chmod +x /usr/local/bin/gitlab-runner</code><pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> run<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>d</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>name</span> gitlab-runner<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>restart</span> always <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">    -</span>v</span> /srv/gitlab-runner/config:/etc/gitlab-runner <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">    gitlab/gitlab-runner:latest</span>
</span></code></pre><p><code>docker exec -it gitlab-runner bash</code> <br> <code>gitlab-runner list</code> список сборщиков <br> <code>gitlab-runner verify</code> проверка <br> <code>gitlab-runner restart</code> применить настройки <br> <code>gitlab-runner status</code> статус <br> <code>gitlab-runner unregister --all-runners</code> удалить все регистрации <br> <code>gitlab-runner install</code> установить службу <br> <code>gitlab-runner run</code> запустить с выводом в консоль<p><code>gitlab-runner register</code><pre class=z-code><code><span class="z-text z-plain">Enter the GitLab instance URL (for example, https://gitlab.com/): http://192.168.3.101/
</span><span class="z-text z-plain">Enter the registration token: GR1348941enqAxqQgm8AZJD_g7vme
</span><span class="z-text z-plain">Enter an executor: shell
</span></code></pre><p><code>cat /etc/gitlab-runner/config.toml</code> конфигурация<p>Включить импорт проектов из GitHub: http://192.168.3.101/admin/application_settings/general#js-import-export-settings<pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">variables</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">PORT</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-numeric z-integer z-decimal z-yaml">2024</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">TITLE</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">"</span>The+Rookie<span class="z-punctuation z-definition z-string z-end z-yaml">"</span></span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">stages</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">test</span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">test</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">stage</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">test</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">script</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-keyword z-control z-flow z-block-scalar z-literal z-yaml">|</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">        pwsh -Command "
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">            Write-Host PORT - $env:PORT
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">            Write-Host TITLE - $env:TITLE
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">            npm install
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">            Start-Process -NoNewWindow -FilePath 'npm' -ArgumentList 'start -- --port $env:PORT' -RedirectStandardOutput 'torapi.log'
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">            Start-Sleep -Seconds 5
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">            Invoke-RestMethod -Uri http://localhost:$env:PORT/api/search/title/all?query=$env:TITLE | Format-List
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">            Get-Content torapi.log
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">            Stop-Process -Name 'node' -Force -ErrorAction SilentlyContinue
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">        "
</span></span></code></pre><h1 id=jenkins><a aria-label="Anchor link for: jenkins" class=zola-anchor href=#jenkins><i class=icon></i></a> Jenkins</h1><p><code>docker run -d --name=jenkins -p 8080:8080 --restart=always -v jenkins_home:/var/jenkins_home jenkins/jenkins:latest</code> <br> <code>ls /var/lib/docker/volumes/jenkins_home/_data/jobs</code> директория хранящая историю сборок в хостовой системе <br> <code>docker exec -it jenkins /bin/bash</code> подключиться к контейнеру <br> <code>cat /var/jenkins_home/secrets/initialAdminPassword</code> получить токен инициализации<p>Cli: http://127.0.0.1:8080/manage/cli <br> <code>apt install openjdk-17-jre-headless</code> <br> <code>wget http://127.0.0.1:8080/jnlpJars/jenkins-cli.jar -P /usr/local/bin/</code> скачать jenkins-cli <br> <code>java -jar /usr/local/bin/jenkins-cli.jar -auth lifailon:password -s http://127.0.0.1:8080 -webSocket help</code> получить список команд<h2 id=ssh-steps><a aria-label="Anchor link for: ssh-steps" class=zola-anchor href=#ssh-steps><i class=icon></i></a> SSH Steps</h2><p>Manage > Credentials > Global > New credentials > Kind: Username with password<pre class="language-groovy z-code" data-lang=groovy><code class=language-groovy data-lang=groovy><span class="z-source z-groovy">pipeline <span class="z-meta z-block z-groovy"><span class="z-punctuation z-section z-block z-begin z-groovy">{</span>
</span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy">    agent any
</span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy">    parameters <span class="z-meta z-block z-groovy"><span class="z-punctuation z-section z-block z-begin z-groovy">{</span>
</span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">        <span class="z-meta z-method-call z-groovy"><span class="z-meta z-method z-groovy">string</span><span class="z-punctuation z-definition z-method-parameters z-begin z-groovy">(</span><span class="z-constant z-other z-key z-groovy">name</span><span class="z-punctuation z-definition z-separator z-key-value z-groovy">:</span> <span class="z-string z-quoted z-single z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">'</span>Count<span class="z-punctuation z-definition z-string z-end z-groovy">'</span></span><span class="z-punctuation z-definition z-separator z-parameter z-groovy">,</span> <span class="z-constant z-other z-key z-groovy">defaultValue</span><span class="z-punctuation z-definition z-separator z-key-value z-groovy">:</span> <span class="z-string z-quoted z-single z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">'</span>100<span class="z-punctuation z-definition z-string z-end z-groovy">'</span></span><span class="z-punctuation z-definition z-separator z-parameter z-groovy">,</span> <span class="z-constant z-other z-key z-groovy">description</span><span class="z-punctuation z-definition z-separator z-key-value z-groovy">:</span> <span class="z-string z-quoted z-single z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">'</span>Number of lines from log<span class="z-punctuation z-definition z-string z-end z-groovy">'</span></span><span class="z-punctuation z-definition z-method-parameters z-end z-groovy">)</span></span>
</span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">        <span class="z-meta z-method-call z-groovy"><span class="z-meta z-method z-groovy">choice</span><span class="z-punctuation z-definition z-method-parameters z-begin z-groovy">(</span><span class="z-constant z-other z-key z-groovy">name</span><span class="z-punctuation z-definition z-separator z-key-value z-groovy">:</span> <span class="z-string z-quoted z-double z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">"</span>Mode<span class="z-punctuation z-definition z-string z-end z-groovy">"</span></span><span class="z-punctuation z-definition z-separator z-parameter z-groovy">,</span> <span class="z-constant z-other z-key z-groovy">choices</span><span class="z-punctuation z-definition z-separator z-key-value z-groovy">:</span> <span class="z-meta z-structure z-groovy"><span class="z-punctuation z-definition z-structure z-begin z-groovy">[</span><span class="z-string z-quoted z-double z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">"</span>Log<span class="z-punctuation z-definition z-string z-end z-groovy">"</span></span><span class="z-punctuation z-definition z-separator z-groovy">,</span><span class="z-string z-quoted z-double z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">"</span>Stats<span class="z-punctuation z-definition z-string z-end z-groovy">"</span></span><span class="z-punctuation z-definition z-structure z-end z-groovy">]</span></span><span class="z-punctuation z-definition z-separator z-parameter z-groovy">,</span> <span class="z-constant z-other z-key z-groovy">description</span><span class="z-punctuation z-definition z-separator z-key-value z-groovy">:</span> <span class="z-string z-quoted z-double z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">"</span>Select mode<span class="z-punctuation z-definition z-string z-end z-groovy">"</span></span><span class="z-punctuation z-definition z-method-parameters z-end z-groovy">)</span></span>
</span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">        <span class="z-comment z-line z-double-slash z-groovy"><span class="z-punctuation z-definition z-comment z-groovy">//</span> booleanParam(name: "State", defaultValue: false)
</span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">    <span class="z-punctuation z-section z-block z-end z-groovy">}</span></span>
</span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy">    stages <span class="z-meta z-block z-groovy"><span class="z-punctuation z-section z-block z-begin z-groovy">{</span>
</span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">        <span class="z-meta z-method-call z-groovy"><span class="z-meta z-method z-groovy">stage</span><span class="z-punctuation z-definition z-method-parameters z-begin z-groovy">(</span><span class="z-string z-quoted z-single z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">'</span>Remote SSH<span class="z-punctuation z-definition z-string z-end z-groovy">'</span></span><span class="z-punctuation z-definition z-method-parameters z-end z-groovy">)</span></span> <span class="z-meta z-block z-groovy"><span class="z-punctuation z-section z-block z-begin z-groovy">{</span>
</span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">            steps <span class="z-meta z-block z-groovy"><span class="z-punctuation z-section z-block z-begin z-groovy">{</span>
</span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">                script <span class="z-meta z-block z-groovy"><span class="z-punctuation z-section z-block z-begin z-groovy">{</span>
</span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">                    <span class="z-meta z-method-call z-groovy"><span class="z-meta z-method z-groovy">withCredentials</span><span class="z-punctuation z-definition z-method-parameters z-begin z-groovy">(</span><span class="z-meta z-structure z-groovy"><span class="z-punctuation z-definition z-structure z-begin z-groovy">[</span><span class="z-meta z-method-call z-groovy"><span class="z-meta z-method z-groovy">usernamePassword</span><span class="z-punctuation z-definition z-method-parameters z-begin z-groovy">(</span><span class="z-constant z-other z-key z-groovy">credentialsId</span><span class="z-punctuation z-definition z-separator z-key-value z-groovy">:</span> <span class="z-string z-quoted z-single z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">'</span>91a9b0bb-bde9-4e06-ba19-9eb5bfd61612<span class="z-punctuation z-definition z-string z-end z-groovy">'</span></span><span class="z-punctuation z-definition z-separator z-parameter z-groovy">,</span> <span class="z-constant z-other z-key z-groovy">usernameVariable</span><span class="z-punctuation z-definition z-separator z-key-value z-groovy">:</span> <span class="z-string z-quoted z-single z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">'</span>SSH_USER<span class="z-punctuation z-definition z-string z-end z-groovy">'</span></span><span class="z-punctuation z-definition z-separator z-parameter z-groovy">,</span> <span class="z-constant z-other z-key z-groovy">passwordVariable</span><span class="z-punctuation z-definition z-separator z-key-value z-groovy">:</span> <span class="z-string z-quoted z-single z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">'</span>SSH_PASS<span class="z-punctuation z-definition z-string z-end z-groovy">'</span></span><span class="z-punctuation z-definition z-method-parameters z-end z-groovy">)</span></span><span class="z-punctuation z-definition z-structure z-end z-groovy">]</span></span><span class="z-punctuation z-definition z-method-parameters z-end z-groovy">)</span></span> <span class="z-meta z-block z-groovy"><span class="z-punctuation z-section z-block z-begin z-groovy">{</span>
</span></span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">                        sshCommand <span class="z-constant z-other z-key z-groovy">remote</span><span class="z-punctuation z-definition z-separator z-key-value z-groovy">:</span> <span class="z-meta z-structure z-groovy"><span class="z-punctuation z-definition z-structure z-begin z-groovy">[</span>
</span></span></span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-structure z-groovy">                            <span class="z-constant z-other z-key z-groovy">name</span><span class="z-punctuation z-definition z-separator z-key-value z-groovy">:</span> <span class="z-string z-quoted z-single z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">'</span>192.168.3.101<span class="z-punctuation z-definition z-string z-end z-groovy">'</span></span><span class="z-punctuation z-definition z-separator z-groovy">,</span>
</span></span></span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-structure z-groovy">                            <span class="z-constant z-other z-key z-groovy">host</span><span class="z-punctuation z-definition z-separator z-key-value z-groovy">:</span> <span class="z-string z-quoted z-single z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">'</span>192.168.3.101<span class="z-punctuation z-definition z-string z-end z-groovy">'</span></span><span class="z-punctuation z-definition z-separator z-groovy">,</span>
</span></span></span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-structure z-groovy">                            <span class="z-constant z-other z-key z-groovy">port</span><span class="z-punctuation z-definition z-separator z-key-value z-groovy">:</span> <span class="z-constant z-numeric z-groovy">2121</span><span class="z-punctuation z-definition z-separator z-groovy">,</span>
</span></span></span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-structure z-groovy">                            <span class="z-constant z-other z-key z-groovy">user</span><span class="z-punctuation z-definition z-separator z-key-value z-groovy">:</span> <span class="z-storage z-type z-class z-groovy">env.SSH_USER</span><span class="z-punctuation z-definition z-separator z-groovy">,</span>
</span></span></span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-structure z-groovy">                            <span class="z-constant z-other z-key z-groovy">password</span><span class="z-punctuation z-definition z-separator z-key-value z-groovy">:</span> <span class="z-storage z-type z-class z-groovy">env.SSH_PASS</span><span class="z-punctuation z-definition z-separator z-groovy">,</span>
</span></span></span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-structure z-groovy">                            <span class="z-constant z-other z-key z-groovy">allowAnyHosts</span><span class="z-punctuation z-definition z-separator z-key-value z-groovy">:</span> <span class="z-constant z-language z-groovy">true</span>
</span></span></span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-structure z-groovy">                        <span class="z-punctuation z-definition z-structure z-end z-groovy">]</span></span>, <span class="z-constant z-other z-key z-groovy">command</span><span class="z-punctuation z-definition z-separator z-key-value z-groovy">:</span> <span class="z-string z-quoted z-double z-block z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">"""</span>
</span></span></span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-string z-quoted z-double z-block z-groovy">                            if [[ "<span class="z-source z-groovy z-embedded z-source"><span class="z-punctuation z-section z-embedded z-groovy">${</span><span class="z-storage z-type z-class z-groovy">params.Mode</span><span class="z-punctuation z-section z-embedded z-groovy">}</span></span>" == "Log" ]]; then
</span></span></span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-string z-quoted z-double z-block z-groovy">                                bash kinozal-bot/kinozal-bot-0.4.5.sh log bot <span class="z-source z-groovy z-embedded z-source"><span class="z-punctuation z-section z-embedded z-groovy">${</span><span class="z-storage z-type z-class z-groovy">params.Count</span><span class="z-punctuation z-section z-embedded z-groovy">}</span></span>
</span></span></span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-string z-quoted z-double z-block z-groovy">                            elif [[ "<span class="z-source z-groovy z-embedded z-source"><span class="z-punctuation z-section z-embedded z-groovy">${</span><span class="z-storage z-type z-class z-groovy">params.Mode</span><span class="z-punctuation z-section z-embedded z-groovy">}</span></span>" == "Stats" ]]; then
</span></span></span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-string z-quoted z-double z-block z-groovy">                                curl -s https://raw.githubusercontent.com/Lifailon/hwstat/rsa/hwstat.sh | bash
</span></span></span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-string z-quoted z-double z-block z-groovy">                            fi
</span></span></span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-string z-quoted z-double z-block z-groovy">                        <span class="z-punctuation z-definition z-string z-end z-groovy">"""</span></span>
</span></span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">                    <span class="z-punctuation z-section z-block z-end z-groovy">}</span></span>
</span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">                <span class="z-punctuation z-section z-block z-end z-groovy">}</span></span>
</span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">            <span class="z-punctuation z-section z-block z-end z-groovy">}</span></span>
</span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">        <span class="z-punctuation z-section z-block z-end z-groovy">}</span></span>
</span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">    <span class="z-punctuation z-section z-block z-end z-groovy">}</span></span>
</span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-punctuation z-section z-block z-end z-groovy">}</span></span>
</span></code></pre><h2 id=httpurlconnection><a aria-label="Anchor link for: httpurlconnection" class=zola-anchor href=#httpurlconnection><i class=icon></i></a> HttpURLConnection</h2><p>Script Console: http://127.0.0.1:8080/manage/script<pre class="language-groovy z-code" data-lang=groovy><code class=language-groovy data-lang=groovy><span class="z-source z-groovy">pipeline <span class="z-meta z-block z-groovy"><span class="z-punctuation z-section z-block z-begin z-groovy">{</span>
</span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy">    agent any
</span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy">    stages <span class="z-meta z-block z-groovy"><span class="z-punctuation z-section z-block z-begin z-groovy">{</span>
</span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">        <span class="z-meta z-method-call z-groovy"><span class="z-meta z-method z-groovy">stage</span><span class="z-punctuation z-definition z-method-parameters z-begin z-groovy">(</span><span class="z-string z-quoted z-single z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">'</span>Call REST API<span class="z-punctuation z-definition z-string z-end z-groovy">'</span></span><span class="z-punctuation z-definition z-method-parameters z-end z-groovy">)</span></span> <span class="z-meta z-block z-groovy"><span class="z-punctuation z-section z-block z-begin z-groovy">{</span>
</span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">            steps <span class="z-meta z-block z-groovy"><span class="z-punctuation z-section z-block z-begin z-groovy">{</span>
</span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">                script <span class="z-meta z-block z-groovy"><span class="z-punctuation z-section z-block z-begin z-groovy">{</span>
</span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">                    <span class="z-storage z-type z-def z-groovy">def</span> url <span class="z-keyword z-operator z-assignment z-groovy">=</span> <span class="z-keyword z-other z-new z-groovy">new</span> <span class="z-constant z-other z-groovy">URL</span>(<span class="z-string z-quoted z-double z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">"</span>https://jsonplaceholder.typicode.com/posts<span class="z-punctuation z-definition z-string z-end z-groovy">"</span></span>)
</span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">                    <span class="z-storage z-type z-def z-groovy">def</span> connection <span class="z-keyword z-operator z-assignment z-groovy">=</span> url<span class="z-punctuation z-accessor z-dot z-groovy">.</span><span class="z-meta z-method-call z-groovy"><span class="z-meta z-method z-groovy">openConnection</span><span class="z-punctuation z-definition z-method-parameters z-begin z-groovy">(</span><span class="z-punctuation z-definition z-method-parameters z-end z-groovy">)</span></span>
</span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">                    connection<span class="z-punctuation z-accessor z-dot z-groovy">.</span><span class="z-meta z-method-call z-groovy"><span class="z-meta z-method z-groovy">setRequestMethod</span><span class="z-punctuation z-definition z-method-parameters z-begin z-groovy">(</span><span class="z-string z-quoted z-double z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">"</span>GET<span class="z-punctuation z-definition z-string z-end z-groovy">"</span></span><span class="z-punctuation z-definition z-method-parameters z-end z-groovy">)</span></span>
</span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">                    connection<span class="z-punctuation z-accessor z-dot z-groovy">.</span><span class="z-meta z-method-call z-groovy"><span class="z-meta z-method z-groovy">setRequestProperty</span><span class="z-punctuation z-definition z-method-parameters z-begin z-groovy">(</span><span class="z-string z-quoted z-double z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">"</span>Accept<span class="z-punctuation z-definition z-string z-end z-groovy">"</span></span><span class="z-punctuation z-definition z-separator z-parameter z-groovy">,</span> <span class="z-string z-quoted z-double z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">"</span>application/json<span class="z-punctuation z-definition z-string z-end z-groovy">"</span></span><span class="z-punctuation z-definition z-method-parameters z-end z-groovy">)</span></span>
</span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">                    <span class="z-storage z-type z-def z-groovy">def</span> responseCode <span class="z-keyword z-operator z-assignment z-groovy">=</span> connection<span class="z-punctuation z-accessor z-dot z-groovy">.</span><span class="z-meta z-method-call z-groovy"><span class="z-meta z-method z-groovy">getResponseCode</span><span class="z-punctuation z-definition z-method-parameters z-begin z-groovy">(</span><span class="z-punctuation z-definition z-method-parameters z-end z-groovy">)</span></span>
</span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">                    <span class="z-keyword z-control z-groovy">if</span> (responseCode <span class="z-keyword z-operator z-comparison z-groovy">==</span> <span class="z-constant z-numeric z-groovy">200</span>) <span class="z-meta z-block z-groovy"><span class="z-punctuation z-section z-block z-begin z-groovy">{</span>
</span></span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">                        <span class="z-storage z-type z-def z-groovy">def</span> response <span class="z-keyword z-operator z-assignment z-groovy">=</span> connection<span class="z-punctuation z-accessor z-dot z-groovy">.</span><span class="z-meta z-method-call z-groovy"><span class="z-meta z-method z-groovy">getInputStream</span><span class="z-punctuation z-definition z-method-parameters z-begin z-groovy">(</span><span class="z-punctuation z-definition z-method-parameters z-end z-groovy">)</span></span><span class="z-punctuation z-accessor z-dot z-groovy">.</span><span class="z-meta z-method-call z-groovy"><span class="z-meta z-method z-groovy">getText</span><span class="z-punctuation z-definition z-method-parameters z-begin z-groovy">(</span><span class="z-punctuation z-definition z-method-parameters z-end z-groovy">)</span></span>
</span></span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">                        <span class="z-support z-function z-print z-groovy">println</span>(<span class="z-string z-quoted z-double z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">"</span>Response: <span class="z-punctuation z-definition z-string z-end z-groovy">"</span></span> <span class="z-keyword z-operator z-arithmetic z-groovy">+</span> response)
</span></span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">                    <span class="z-punctuation z-section z-block z-end z-groovy">}</span></span> <span class="z-keyword z-control z-groovy">else</span> <span class="z-meta z-block z-groovy"><span class="z-punctuation z-section z-block z-begin z-groovy">{</span>
</span></span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">                        <span class="z-meta z-method-call z-groovy"><span class="z-meta z-method z-groovy">error</span><span class="z-punctuation z-definition z-method-parameters z-begin z-groovy">(</span><span class="z-string z-quoted z-double z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">"</span>Failed to call API, response code: <span class="z-source z-groovy z-embedded z-source"><span class="z-punctuation z-section z-embedded z-groovy">${</span>responseCode<span class="z-punctuation z-section z-embedded z-groovy">}</span></span><span class="z-punctuation z-definition z-string z-end z-groovy">"</span></span><span class="z-punctuation z-definition z-method-parameters z-end z-groovy">)</span></span>
</span></span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">                    <span class="z-punctuation z-section z-block z-end z-groovy">}</span></span>
</span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">                    connection<span class="z-punctuation z-accessor z-dot z-groovy">.</span><span class="z-meta z-method-call z-groovy"><span class="z-meta z-method z-groovy">disconnect</span><span class="z-punctuation z-definition z-method-parameters z-begin z-groovy">(</span><span class="z-punctuation z-definition z-method-parameters z-end z-groovy">)</span></span>
</span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">                <span class="z-punctuation z-section z-block z-end z-groovy">}</span></span>
</span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">            <span class="z-punctuation z-section z-block z-end z-groovy">}</span></span>
</span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">        <span class="z-punctuation z-section z-block z-end z-groovy">}</span></span>
</span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">    <span class="z-punctuation z-section z-block z-end z-groovy">}</span></span>
</span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-punctuation z-section z-block z-end z-groovy">}</span></span>
</span></code></pre><h2 id=active-choices-parameter><a aria-label="Anchor link for: active-choices-parameter" class=zola-anchor href=#active-choices-parameter><i class=icon></i></a> Active Choices Parameter</h2><p><a href=https://plugins.jenkins.io/uno-choice>Plugin</a><p>Name: <code>selectedVersion</code><p>Groovy Script:<pre class="language-groovy z-code" data-lang=groovy><code class=language-groovy data-lang=groovy><span class="z-source z-groovy"><span class="z-meta z-import z-groovy"><span class="z-keyword z-other z-import z-groovy">import</span> <span class="z-storage z-type z-import z-groovy">groovy.json.JsonSlurper
</span></span></span><span class="z-source z-groovy"><span class="z-storage z-type z-def z-groovy">def</span> apiUrl <span class="z-keyword z-operator z-assignment z-groovy">=</span> <span class="z-string z-quoted z-double z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">"</span>https://api.github.com/repos/PowerShell/PowerShell/tags<span class="z-punctuation z-definition z-string z-end z-groovy">"</span></span>
</span><span class="z-source z-groovy"><span class="z-storage z-type z-def z-groovy">def</span> conn <span class="z-keyword z-operator z-assignment z-groovy">=</span> <span class="z-keyword z-other z-new z-groovy">new</span> <span class="z-constant z-other z-groovy">URL</span>(apiUrl)<span class="z-punctuation z-accessor z-dot z-groovy">.</span><span class="z-meta z-method-call z-groovy"><span class="z-meta z-method z-groovy">openConnection</span><span class="z-punctuation z-definition z-method-parameters z-begin z-groovy">(</span><span class="z-punctuation z-definition z-method-parameters z-end z-groovy">)</span></span>
</span><span class="z-source z-groovy">conn<span class="z-punctuation z-accessor z-dot z-groovy">.</span><span class="z-meta z-method-call z-groovy"><span class="z-meta z-method z-groovy">setRequestProperty</span><span class="z-punctuation z-definition z-method-parameters z-begin z-groovy">(</span><span class="z-string z-quoted z-double z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">"</span>User-Agent<span class="z-punctuation z-definition z-string z-end z-groovy">"</span></span><span class="z-punctuation z-definition z-separator z-parameter z-groovy">,</span> <span class="z-string z-quoted z-double z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">"</span>Jenkins<span class="z-punctuation z-definition z-string z-end z-groovy">"</span></span><span class="z-punctuation z-definition z-method-parameters z-end z-groovy">)</span></span>
</span><span class="z-source z-groovy"><span class="z-storage z-type z-def z-groovy">def</span> response <span class="z-keyword z-operator z-assignment z-groovy">=</span> conn<span class="z-punctuation z-accessor z-dot z-groovy">.</span><span class="z-meta z-method-call z-groovy"><span class="z-meta z-method z-groovy">getInputStream</span><span class="z-punctuation z-definition z-method-parameters z-begin z-groovy">(</span><span class="z-punctuation z-definition z-method-parameters z-end z-groovy">)</span></span><span class="z-punctuation z-accessor z-dot z-groovy">.</span><span class="z-meta z-method-call z-groovy"><span class="z-meta z-method z-groovy">getText</span><span class="z-punctuation z-definition z-method-parameters z-begin z-groovy">(</span><span class="z-punctuation z-definition z-method-parameters z-end z-groovy">)</span></span>
</span><span class="z-source z-groovy"><span class="z-storage z-type z-def z-groovy">def</span> json <span class="z-keyword z-operator z-assignment z-groovy">=</span> <span class="z-keyword z-other z-new z-groovy">new</span> <span class="z-storage z-type z-class z-groovy">JsonSlurper</span>()<span class="z-punctuation z-accessor z-dot z-groovy">.</span><span class="z-meta z-method-call z-groovy"><span class="z-meta z-method z-groovy">parseText</span><span class="z-punctuation z-definition z-method-parameters z-begin z-groovy">(</span>response<span class="z-punctuation z-definition z-method-parameters z-end z-groovy">)</span></span>
</span><span class="z-source z-groovy"><span class="z-storage z-type z-def z-groovy">def</span> versions <span class="z-keyword z-operator z-assignment z-groovy">=</span> json<span class="z-punctuation z-accessor z-dot z-groovy">.</span>collect <span class="z-meta z-block z-groovy"><span class="z-punctuation z-section z-block z-begin z-groovy">{</span> it<span class="z-punctuation z-accessor z-dot z-groovy">.</span>name <span class="z-punctuation z-section z-block z-end z-groovy">}</span></span>
</span><span class="z-source z-groovy"><span class="z-keyword z-control z-groovy">return</span> versions
</span></code></pre><p>Pipeline script:<pre class="language-groovy z-code" data-lang=groovy><code class=language-groovy data-lang=groovy><span class="z-source z-groovy">pipeline <span class="z-meta z-block z-groovy"><span class="z-punctuation z-section z-block z-begin z-groovy">{</span>
</span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy">    agent any
</span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy">    stages <span class="z-meta z-block z-groovy"><span class="z-punctuation z-section z-block z-begin z-groovy">{</span>
</span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">        <span class="z-meta z-method-call z-groovy"><span class="z-meta z-method z-groovy">stage</span><span class="z-punctuation z-definition z-method-parameters z-begin z-groovy">(</span><span class="z-string z-quoted z-single z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">'</span>Display Selected Version<span class="z-punctuation z-definition z-string z-end z-groovy">'</span></span><span class="z-punctuation z-definition z-method-parameters z-end z-groovy">)</span></span> <span class="z-meta z-block z-groovy"><span class="z-punctuation z-section z-block z-begin z-groovy">{</span>
</span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">            steps <span class="z-meta z-block z-groovy"><span class="z-punctuation z-section z-block z-begin z-groovy">{</span>
</span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">                script <span class="z-meta z-block z-groovy"><span class="z-punctuation z-section z-block z-begin z-groovy">{</span>
</span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">                    echo <span class="z-string z-quoted z-double z-groovy"><span class="z-punctuation z-definition z-string z-begin z-groovy">"</span>Selected PowerShell version: <span class="z-source z-groovy z-embedded z-source"><span class="z-punctuation z-section z-embedded z-groovy">${</span>params<span class="z-punctuation z-accessor z-dot z-groovy">.</span>selectedVersion<span class="z-punctuation z-section z-embedded z-groovy">}</span></span><span class="z-punctuation z-definition z-string z-end z-groovy">"</span></span>
</span></span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">                <span class="z-punctuation z-section z-block z-end z-groovy">}</span></span>
</span></span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">            <span class="z-punctuation z-section z-block z-end z-groovy">}</span></span>
</span></span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">        <span class="z-punctuation z-section z-block z-end z-groovy">}</span></span>
</span></span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-meta z-block z-groovy">    <span class="z-punctuation z-section z-block z-end z-groovy">}</span></span>
</span></span><span class="z-source z-groovy"><span class="z-meta z-block z-groovy"><span class="z-punctuation z-section z-block z-end z-groovy">}</span></span>
</span></code></pre><h1 id=graylog><a aria-label="Anchor link for: graylog" class=zola-anchor href=#graylog><i class=icon></i></a> Graylog</h1><p><a href=https://hub.docker.com/r/itzg/graylog>Graylog Docker Image</a><ul><li>Установка MongoDB:</ul><pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> run<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>name</span> mongo<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>d</span> mongo:3</span>
</span></code></pre><ul><li>Используем прокси для установки Elassticsearch:</ul><pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> run<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>name</span> elasticsearch <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">    -</span>e</span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>http.host=0.0.0.0<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>e</span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>xpack.security.enabled=false<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span> <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">    -</span>d</span> dockerhub.timeweb.cloud/library/elasticsearch:5.5.1</span>
</span></code></pre><ul><li>Указать статический IP адрес для подключения к API</ul><pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> run<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>name</span> Graylog <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">    --</span>link</span> mongo <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">    --</span>link</span> elasticsearch <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">    -</span>p</span> 9000:9000<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>p</span> 12201:12201<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>p</span> 514:514<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>p</span> 5044:5044 <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">    -</span>e</span> GRAYLOG_WEB_ENDPOINT_URI=<span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>http://192.168.3.101:9000/api<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span> <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">    -</span>d</span> graylog/graylog:2.3.2-1</span>
</span></code></pre><ul><li>Настройка syslog на клиенте Linux:</ul><p><code>nano /etc/rsyslog.d/graylog.conf</code><pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">*.*</span></span><span class="z-meta z-function-call z-arguments z-shell"> @@192.168.3.101:514</span><span class="z-keyword z-operator z-logical z-continue z-shell">;</span><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">RSYSLOG_SyslogProtocol23Format</span></span>
</span></code></pre><p><code>systemctl restart rsyslog</code><ul><li>Создать входящий поток (inputs) для Syslog на порту 514 по протоколу TCP:</ul><p>http://192.168.3.101:9000/system/inputs<ul><li>Фильтр для логов Kinozal-Bot:</ul><p><code>facility:"system daemon" AND application_name:bash AND message:\[ AND message:\]</code><ul><li>Настройка Winlogbeat на клиенте Windows</ul><p>Установка агента:<pre class="language-PowerShell z-code" data-lang=PowerShell><code class=language-PowerShell data-lang=PowerShell><span class="z-source z-powershell">irm https:<span class="z-keyword z-operator z-assignment z-powershell">/</span><span class="z-keyword z-operator z-assignment z-powershell">/</span>artifacts.elastic.co<span class="z-keyword z-operator z-assignment z-powershell">/</span>downloads<span class="z-keyword z-operator z-assignment z-powershell">/</span>beats<span class="z-keyword z-operator z-assignment z-powershell">/</span>winlogbeat<span class="z-keyword z-operator z-assignment z-powershell">/</span>winlogbeat<span class="z-keyword z-operator z-assignment z-powershell">-</span><span class="z-constant z-numeric z-integer z-powershell">8.15</span>.<span class="z-constant z-numeric z-integer z-powershell">0</span><span class="z-keyword z-operator z-assignment z-powershell">-</span>windows<span class="z-keyword z-operator z-assignment z-powershell">-</span>x86_64.zip <span class="z-keyword z-operator z-assignment z-powershell">-</span>OutFile <span class="z-support z-constant z-variable z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>home</span>\Documents\winlogbeat<span class="z-keyword z-operator z-assignment z-powershell">-</span><span class="z-constant z-numeric z-integer z-powershell">8.15</span>.<span class="z-constant z-numeric z-integer z-powershell">0.</span>zip
</span><span class="z-source z-powershell"><span class="z-support z-function z-powershell">Expand-Archive</span> <span class="z-support z-constant z-variable z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>home</span>\Documents\winlogbeat<span class="z-keyword z-operator z-assignment z-powershell">-</span><span class="z-constant z-numeric z-integer z-powershell">8.15</span>.<span class="z-constant z-numeric z-integer z-powershell">0.</span>zip
</span><span class="z-source z-powershell">cd <span class="z-support z-constant z-variable z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>home</span>\Documents\winlogbeat<span class="z-keyword z-operator z-assignment z-powershell">-</span><span class="z-constant z-numeric z-integer z-powershell">8.15</span>.<span class="z-constant z-numeric z-integer z-powershell">0</span><span class="z-keyword z-operator z-assignment z-powershell">-</span>windows<span class="z-keyword z-operator z-assignment z-powershell">-</span>x86_64
</span></code></pre><p>Добавить отправку в Logstash:<p><code>code winlogbeat.yml</code><pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">output.logstash:</span></span>
</span><span class="z-source z-shell z-bash">  <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">hosts:</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>192.168.3.101:5044<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span><span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span></span>
</span></code></pre><p>И закомментировать отправку данных в Elasticsearch (output.elasticsearch)<p><code>.\winlogbeat.exe -c winlogbeat.yml</code> запустить агент с правами администратора в консоли<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">.<span class="z-constant z-character z-escape z-shell">\i</span>nstall-service-winlogbeat.ps1 <span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> установить службу</span><span class="z-comment z-line z-number-sign z-shell">
</span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Get-Service</span></span><span class="z-meta z-function-call z-arguments z-shell"> winlogbeat</span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Start-Service</span></span>
</span></code></pre><ul><li>Настроить Inputs для приема Beats на порту 5044</ul><h1 id=ansible><a aria-label="Anchor link for: ansible" class=zola-anchor href=#ansible><i class=icon></i></a> Ansible</h1><p><code>apt -y update && apt -y upgrade</code> <br> <code>apt -y install ansible</code> v2.10.8 <br> <code>apt -y install ansible-core</code> v2.12.0 <br> <code>apt -y install sshpass</code><p><code>ansible-galaxy collection install ansible.windows</code> установить коллекцию модулей <br> <code>ansible-galaxy collection install community.windows</code> <br> <code>ansible-galaxy collection list | grep windows</code> <br> <code>ansible-config dump | grep DEFAULT_MODULE_PATH</code> путь хранения модулей<p><code>apt-get -y install python-dev libkrb5-dev krb5-user</code> пакеты для Kerberos аутентификации <br> <code>apt install python3-pip</code> <br> <code>pip3 install requests-kerberos</code> <br> <code>nano /etc/krb5.conf</code> настроить [realms] и [domain_realm] <br> <code>kinit -C support4@domail.local</code> <br> <code>klist</code><p><code>ansible --version</code> <br> <code>config file = None</code> <br> <code>nano /etc/ansible/ansible.cfg</code> файл конфигурации<pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-meta z-flow-sequence z-yaml"><span class="z-punctuation z-definition z-sequence z-begin z-yaml">[</span><span class="z-string z-unquoted z-plain z-in z-yaml">defaults</span><span class="z-punctuation z-definition z-sequence z-end z-yaml">]</span></span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">inventory = /etc/ansible/hosts</span>
</span><span class="z-source z-yaml"><span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> uncomment this to disable SSH key host checking
</span></span><span class="z-source z-yaml"><span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> Отключить проверку ключа ssh (для подключения используя пароль)
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">host_key_checking = False</span>
</span></code></pre><h2 id=hosts><a aria-label="Anchor link for: hosts" class=zola-anchor href=#hosts><i class=icon></i></a> Hosts</h2><p><code>nano /etc/ansible/hosts</code><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-meta z-flow-sequence z-yaml"><span class="z-punctuation z-definition z-sequence z-begin z-yaml">[</span><span class="z-string z-unquoted z-plain z-in z-yaml">us</span><span class="z-punctuation z-definition z-sequence z-end z-yaml">]</span></span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">pi-hole-01 ansible_host=192.168.3.101</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">zabbix-01 ansible_host=192.168.3.102</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">grafana-01 ansible_host=192.168.3.103</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">netbox-01 ansible_host=192.168.3.104</span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml"><span class="z-meta z-flow-sequence z-yaml"><span class="z-punctuation z-definition z-sequence z-begin z-yaml">[</span><span class="z-string z-unquoted z-plain z-in z-yaml">all:vars</span><span class="z-punctuation z-definition z-sequence z-end z-yaml">]</span></span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">ansible_ssh_port=2121</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">ansible_user=lifailon</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">ansible_password=123098</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">path_user=/home/lifailon</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">ansible_python_interpreter=/usr/bin/python3</span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml"><span class="z-meta z-flow-sequence z-yaml"><span class="z-punctuation z-definition z-sequence z-begin z-yaml">[</span><span class="z-string z-unquoted z-plain z-in z-yaml">ws</span><span class="z-punctuation z-definition z-sequence z-end z-yaml">]</span></span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">huawei-book-01 ansible_host=192.168.3.99</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">plex-01 ansible_host=192.168.3.100</span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml"><span class="z-meta z-flow-sequence z-yaml"><span class="z-punctuation z-definition z-sequence z-begin z-yaml">[</span><span class="z-string z-unquoted z-plain z-in z-yaml">ws:vars</span><span class="z-punctuation z-definition z-sequence z-end z-yaml">]</span></span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">ansible_port=5985</span>
</span><span class="z-source z-yaml"><span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span>ansible_port=5986
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">ansible_user=Lifailon</span>
</span><span class="z-source z-yaml"><span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span>ansible_user=support4@DOMAIN.LOCAL
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">ansible_password=123098</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">ansible_connection=winrm</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">ansible_winrm_scheme=http</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">ansible_winrm_transport=basic</span>
</span><span class="z-source z-yaml"><span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span>ansible_winrm_transport=kerberos
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">ansible_winrm_server_cert_validation=ignore</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">validate_certs=false</span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml"><span class="z-meta z-flow-sequence z-yaml"><span class="z-punctuation z-definition z-sequence z-begin z-yaml">[</span><span class="z-string z-unquoted z-plain z-in z-yaml">win_ssh</span><span class="z-punctuation z-definition z-sequence z-end z-yaml">]</span></span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">huawei-book-01 ansible_host=192.168.3.99</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">plex-01 ansible_host=192.168.3.100</span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml"><span class="z-meta z-flow-sequence z-yaml"><span class="z-punctuation z-definition z-sequence z-begin z-yaml">[</span><span class="z-string z-unquoted z-plain z-in z-yaml">win_ssh:vars</span><span class="z-punctuation z-definition z-sequence z-end z-yaml">]</span></span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">ansible_python_interpreter=C:\Users\Lifailon\AppData\Local\Programs\Python\Python311\` добавить переменную среды интерпритатора Python в Windows</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">ansible_connection=ssh</span>
</span><span class="z-source z-yaml"><span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span>ansible_shell_type=cmd
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml">ansible_shell_type=powershell</span>
</span></code></pre><p><code>ansible-inventory --list</code> проверить конфигурацию (читает в формате JSON) или YAML (-y) с просмотром все применяемых переменных<h2 id=windows-modules><a aria-label="Anchor link for: windows-modules" class=zola-anchor href=#windows-modules><i class=icon></i></a> Windows Modules</h2><p><code>ansible us -m ping</code> <br> <code>ansible win_ssh -m ping</code> <br> <code>ansible us -m shell -a "uptime && df -h | grep lv"</code> <br> <code>ansible us -m setup | grep -iP "mem|proc"</code> информация о железе <br> <code>ansible us -m apt -a "name=mc" -b</code> повысить привилегии sudo (-b) <br> <code>ansible us -m service -a "name=ssh state=restarted enabled=yes" -b</code> перезапустить службу <br> <code>echo "echo test" > test.sh</code> <br> <code>ansible us -m copy -a "src=test.sh dest=/root mode=777" -b</code> <br> <code>ansible us -a "ls /root" -b</code> <br> <code>ansible us -a "cat /root/test.sh" -b</code><p><code>ansible-doc -l | grep win_</code> <a href=https://docs.ansible.com/ansible/latest/collections/ansible/windows/>список всех модулей Windows</a> <br> <code>ansible ws -m win_ping</code> windows модуль <br> <code>ansible ws -m win_ping -u WinRM-Writer</code> указать логин <br> <code>ansible ws -m setup</code> собрать подробную информацию о системе <br> <code>ansible ws -m win_whoami</code> информация о правах доступах, группах доступа <br> <code>ansible ws -m win_shell -a '$PSVersionTable'</code> <br> <code>ansible ws -m win_shell -a 'Get-Service | where name -match "ssh|winrm"'</code> <br> <code>ansible ws -m win_service -a "name=sshd state=stopped"</code> <br> <code>ansible ws -m win_service -a "name=sshd state=started"</code><ul><li>win_shell (vars/debug)</ul><p><code>nano /etc/ansible/PowerShell-Vars.yml</code><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">hosts</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ws</span>
</span><span class="z-source z-yaml"> ` <span class="z-string z-unquoted z-plain z-out z-yaml">Указать коллекцию модулей</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">collections</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ansible.windows</span>
</span><span class="z-source z-yaml"> ` <span class="z-string z-unquoted z-plain z-out z-yaml">Задать переменные</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">vars</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">SearchName</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">PermitRoot</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tasks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Get port ssh</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">win_shell</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-keyword z-control z-flow z-block-scalar z-literal z-yaml">|</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">      Get-Content "C:\Programdata\ssh\sshd_config" | Select-String "{{SearchName}}"
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml"></span>   ` <span class="z-string z-unquoted z-plain z-out z-yaml">Передать вывод в переменную</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">register</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">command_output</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Output port ssh</span>
</span><span class="z-source z-yaml">   ` <span class="z-string z-unquoted z-plain z-out z-yaml">Вывести переменную на экран</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">debug</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">var</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">command_output.stdout_lines</span>
</span></code></pre><p><code>ansible-playbook /etc/ansible/PowerShell-Vars.yml</code> <br> <code>ansible-playbook /etc/ansible/PowerShell-Vars.yml --extra-vars "SearchName='LogLevel|Syslog'"</code> передать переменную<ul><li>win_powershell</ul><p><code>nano /etc/ansible/powershell-param.yml</code><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">hosts</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ws</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tasks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Run PowerShell script with parameters</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">ansible.windows.win_powershell</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">parameters</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">Path</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">C:\Temp</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">Force</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-language z-boolean z-yaml">true</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">script</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-keyword z-control z-flow z-block-scalar z-literal z-yaml">|</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">        [CmdletBinding()]
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">        param (
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">          [String]$Path,
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">          [Switch]$Force
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">        )
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-block z-yaml">        New-Item -Path $Path -ItemType Directory -Force:$Force
</span></span></code></pre><p><code>ansible-playbook /etc/ansible/powershell-param.yml</code><ul><li>win_chocolatey</ul><p><code>nano /etc/ansible/setup-adobe-acrobat.yml</code><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">hosts</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ws</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tasks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Install Acrobat Reader</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">win_chocolatey</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">adobereader</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">state</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">present</span>
</span></code></pre><p><code>ansible-playbook /etc/ansible/setup-adobe-acrobat.yml</code><p><code>nano /etc/ansible/setup-openssh.yml</code><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">hosts</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ws</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tasks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">install the Win32-OpenSSH service</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">win_chocolatey</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">openssh</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">package_params</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">/SSHServerFeature</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">state</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">present</span>
</span></code></pre><p><code>ansible-playbook /etc/ansible/setup-openssh.yml</code><ul><li>win_regedit</ul><p><code>nano /etc/ansible/win-set-shell-ssh-ps7.yml</code><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">hosts</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ws</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tasks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Set the default shell to PowerShell 7 for Windows OpenSSH</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">win_regedit</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">path</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">HKLM:\SOFTWARE\OpenSSH</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">DefaultShell</span>
</span><span class="z-source z-yaml">     ` <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">data</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">data</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-single z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">'</span>C:\Program Files\PowerShell\7\pwsh.exe<span class="z-punctuation z-definition z-string z-end z-yaml">'</span></span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">type</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">string</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">state</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">present</span>
</span></code></pre><p><code>ansible-playbook /etc/ansible/win-set-shell-ssh-ps7.yml</code><ul><li>win_service</ul><p><code>nano /etc/ansible/win-service.yml</code><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">hosts</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ws</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tasks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Start service</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">win_service</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">sshd</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">state</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">started</span>
</span><span class="z-source z-yaml"><span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span>     state: stopped
</span></span><span class="z-source z-yaml"><span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span>     state: restarted
</span></span><span class="z-source z-yaml"><span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span>     start_mode: auto
</span></span></code></pre><p><code>ansible-playbook /etc/ansible/win-service.yml</code><ul><li>win_service_info</ul><p><code>nano /etc/ansible/get-service.yml</code><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">hosts</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ws</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tasks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Get info for a single service</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">win_service_info</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">sshd</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">register</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">service_info</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Print returned information</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">ansible.builtin.debug</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">var</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">service_info.services</span>
</span></code></pre><p><code>ansible-playbook /etc/ansible/get-service.yml</code><ul><li>fetch/slurp</ul><p><code>nano /etc/ansible/copy-from-win-to-local.yml</code><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">hosts</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ws</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tasks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Retrieve remote file on a Windows host</span>
</span><span class="z-source z-yaml"><span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span>   Скопировать файл из Windows-системы
</span></span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">ansible.builtin.fetch</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml"><span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span>   Прочитать файл (передать в память в формате Base64)
</span></span><span class="z-source z-yaml"><span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span>   ansible.builtin.slurp:
</span></span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">src</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">C:\Telegraf\telegraf.conf</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">dest</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">/root/telegraf.conf</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">flat</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-language z-boolean z-yaml">yes</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">register</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">telegraf_conf</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Print returned information</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">ansible.builtin.debug</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">msg</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">"</span>{{ telegraf_conf['content'] | b64decode }}<span class="z-punctuation z-definition z-string z-end z-yaml">"</span></span>
</span></code></pre><p><code>ansible-playbook /etc/ansible/copy-from-win-to-local.yml</code><ul><li>win_copy</ul><p><code>echo "Get-Service | where name -eq vss | Start-Service" > /home/lifailon/Start-Service-VSS.ps1</code> <br> <code>nano /etc/ansible/copy-file-to-win.yml</code><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">hosts</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ws</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tasks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Copy file to win hosts</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">win_copy</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">src</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">/home/lifailon/Start-Service-VSS.ps1</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">dest</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">C:\Users\Lifailon\Desktop\Start-Service-VSS.ps1</span>
</span></code></pre><p><code>ansible-playbook /etc/ansible/copy-file-to-win.yml</code><p><code>curl -OL https://github.com/PowerShell/PowerShell/releases/download/v7.3.6/PowerShell-7.3.6-win-x64.msi</code> <br> <code>nano /etc/ansible/copy-file-to-win.yml</code><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">hosts</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ws</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tasks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Copy file to win hosts</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">win_copy</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">src</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">/home/lifailon/PowerShell-7.3.6-win-x64.msi</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">dest</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">C:\Install\PowerShell-7.3.6.msi</span>
</span></code></pre><p><code>ansible-playbook /etc/ansible/copy-file-to-win.yml</code><ul><li>win_command</ul><p><code>nano /etc/ansible/run-script-ps1.yml</code><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">hosts</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ws</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tasks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Run PowerShell Script</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">win_command</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">powershell -ExecutionPolicy ByPass -File C:\Users\Lifailon\Desktop\Start-Service-VSS.ps1</span>
</span></code></pre><p><code>ansible-playbook /etc/ansible/run-script-ps1.yml</code><ul><li>win_package</ul><p><code>nano /etc/ansible/setup-msi-package.yml</code><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">hosts</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ws</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tasks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Install MSI Package</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">win_package</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml"><span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span>     path: C:\Install\7z-23.01.msi
</span></span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">path</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">C:\Install\PowerShell-7.3.6.msi</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">arguments</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">        <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">/quiet</span>
</span><span class="z-source z-yaml">        <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">/passive</span>
</span><span class="z-source z-yaml">        <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">/norestart</span>
</span></code></pre><p><code>ansible-playbook /etc/ansible/setup-msi-package.yml</code><ul><li>win_firewall_rule</ul><p><code>nano /etc/ansible/win-fw-open.yml</code><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">hosts</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ws</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tasks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Open RDP port</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">win_firewall_rule</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Open RDP port</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">localport</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-numeric z-integer z-decimal z-yaml">3389</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">action</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">allow</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">direction</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">in</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">protocol</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">tcp</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">state</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">present</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">enabled</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-language z-boolean z-yaml">yes</span>
</span></code></pre><p><code>ansible-playbook /etc/ansible/win-fw-open.yml</code><ul><li>win_group</ul><p><code>nano /etc/ansible/win-creat-group.yml</code><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">hosts</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ws</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tasks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Create a new group</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">win_group</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">deploy</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">description</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Deploy Group</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">state</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">present</span>
</span></code></pre><p><code>ansible-playbook /etc/ansible/win-creat-group.yml</code><ul><li>win_group_membership</ul><p><code>nano /etc/ansible/add-user-to-group.yml</code><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">hosts</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ws</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tasks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Add a local and domain user to a local group</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">win_group_membership</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">deploy</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">members</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">        <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">WinRM-Writer</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">state</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">present</span>
</span></code></pre><p><code>ansible-playbook /etc/ansible/add-user-to-group.yml</code><ul><li>win_user</ul><p><code>nano /etc/ansible/creat-win-user.yml</code><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">hosts</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ws</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tasks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Creat user</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">win_user</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">test</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">password</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-numeric z-integer z-decimal z-yaml">123098</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">state</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">present</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">groups</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">        <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">deploy</span>
</span></code></pre><p><code>ansible-playbook /etc/ansible/creat-win-user.yml</code><p><code>nano /etc/ansible/delete-win-user.yml</code><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">hosts</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ws</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tasks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Delete user</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">ansible.windows.win_user</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">test</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">state</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">absent</span>
</span></code></pre><p><code>ansible-playbook /etc/ansible/delete-win-user.yml</code><ul><li>win_feature</ul><p><code>nano /etc/ansible/install-feature.yml</code><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">hosts</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ws</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tasks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Install Windows Feature</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">win_feature</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">SNMP-Service</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">state</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">present</span>
</span></code></pre><p><code>ansible-playbook /etc/ansible/install-feature.yml</code><ul><li>win_reboot</ul><p><code>nano /etc/ansible/win-reboot.yml</code><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">hosts</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ws</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tasks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Reboot a slow machine that might have lots of updates to apply</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">win_reboot</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">reboot_timeout</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-numeric z-integer z-decimal z-yaml">3600</span>
</span></code></pre><p><code>ansible-playbook /etc/ansible/win-reboot.yml</code><ul><li>win_find</ul><p><code>nano /etc/ansible/win-ls.yml</code><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">hosts</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ws</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tasks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Find files in multiple paths</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">ansible.windows.win_find</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">paths</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">D:\Install\OpenSource</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">patterns</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-meta z-flow-sequence z-yaml"><span class="z-punctuation z-definition z-sequence z-begin z-yaml">[</span><span class="z-string z-quoted z-single z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">'</span>*.rar<span class="z-punctuation z-definition z-string z-end z-yaml">'</span></span><span class="z-punctuation z-separator z-sequence z-yaml">,</span><span class="z-string z-quoted z-single z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">'</span>*.zip<span class="z-punctuation z-definition z-string z-end z-yaml">'</span></span><span class="z-punctuation z-separator z-sequence z-yaml">,</span><span class="z-string z-quoted z-single z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">'</span>*.msi<span class="z-punctuation z-definition z-string z-end z-yaml">'</span></span><span class="z-punctuation z-definition z-sequence z-end z-yaml">]</span></span>
</span><span class="z-source z-yaml">     ` <span class="z-string z-unquoted z-plain z-out z-yaml">Файл созданный менее 7 дней назад</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">age</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">-7d</span>
</span><span class="z-source z-yaml">     ` <span class="z-string z-unquoted z-plain z-out z-yaml">Размер файла больше 10MB</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">size</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-numeric z-integer z-decimal z-yaml">10485760</span>
</span><span class="z-source z-yaml">     ` <span class="z-string z-unquoted z-plain z-out z-yaml">Рекурсивный поиск (в дочерних директориях)</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">recurse</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-language z-boolean z-yaml">true</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">register</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">command_output</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Output</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">debug</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">var</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">command_output</span>
</span></code></pre><p><code>ansible-playbook /etc/ansible/win-ls.yml</code><ul><li>win_uri</ul><p><code>nano /etc/ansible/rest-get.yml</code><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">hosts</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ws</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tasks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">REST GET request to endpoint github</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">ansible.windows.win_uri</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">url</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">https://api.github.com/repos/Lifailon/pSyslog/releases/latest</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">register</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">http_output</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Output</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">debug</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">var</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">http_output</span>
</span></code></pre><p><code>ansible-playbook /etc/ansible/rest-get.yml</code><ul><li>win_updates</ul><p><code>nano /etc/ansible/win-update.yml</code><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">hosts</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ws</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tasks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Install only particular updates based on the KB numbers</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">ansible.windows.win_updates</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">category_names</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">SecurityUpdates</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">CriticalUpdates</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">UpdateRollups</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Drivers</span>
</span><span class="z-source z-yaml">     ` <span class="z-string z-unquoted z-plain z-out z-yaml">Фильтрация</span>
</span><span class="z-source z-yaml">     ` <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">accept_list</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">     ` <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">KB2267602</span>
</span><span class="z-source z-yaml">     ` <span class="z-string z-unquoted z-plain z-out z-yaml">Поиск обновлений</span>
</span><span class="z-source z-yaml">     ` <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">state</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">searched</span>
</span><span class="z-source z-yaml">     ` <span class="z-string z-unquoted z-plain z-out z-yaml">Загрузить обновления</span>
</span><span class="z-source z-yaml">     ` <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">state</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">downloaded</span>
</span><span class="z-source z-yaml">     ` <span class="z-string z-unquoted z-plain z-out z-yaml">Установить обновления</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">state</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">installed</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">log_path</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">C:\Ansible-Windows-Upadte-Log.txt</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">reboot</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-language z-boolean z-yaml">false</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">register</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">wu_output</span>
</span><span class="z-source z-yaml">  <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Output</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">debug</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">var</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">wu_output</span>
</span></code></pre><p><code>ansible-playbook /etc/ansible/win-update.yml</code><ul><li>win_chocolatey</ul><p><a href=https://chocolatey.org/install>Install</a> <br> <a href=https://community.chocolatey.org/api/v2/package/chocolatey>API</a> <br> <a href=https://docs.chocolatey.org/en-us/guides/organizations/organizational-deployment-guide>Deployment</a><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Ensure Chocolatey installed from internal repo</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">win_chocolatey</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">chocolatey</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">state</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">present</span>
</span><span class="z-source z-yaml">	<span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> source: URL-адрес внутреннего репозитория
</span></span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">source</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">https://community.chocolatey.org/api/v2/ChocolateyInstall.ps1</span>
</span></code></pre><span class=hidden id=copy-code-text>Copy Code</span><span class=hidden id=search-index>https://lifailon.github.io/search_index.en.json</span><span class=hidden id=more-matches-text>$MATCHES more matches</span></main><footer id=site-footer><nav><ul><li><a href=https://lifailon.github.io/powershell/>PowerShell</a><li><a href=https://lifailon.github.io/linux/>Linux</a><li><a href=https://lifailon.github.io/docker/>Docker</a><li><a href=https://lifailon.github.io/windowsserver/>Windows Server</a><li><a href=https://lifailon.github.io/database/>Database</a><li><a class=active href=https://lifailon.github.io/devops/>DevOps</a><li><a href=https://lifailon.github.io/node-js/>Node.js</a></ul></nav><p>© <strong>2023-2024</strong> <code>Lifailon</code><p><a class=external href=https://github.com/Lifailon/PS-Commands>Website source</a><p><small>Powered by <a class="link external" href=https://www.getzola.org>Zola</a> and <a class="link external" href=https://duckquill.daudix.one>Duckquill</a> </small><ul id=socials><li><a rel=" me" href=https://github.com title=GitHub> <i style="--icon:url(&#34data:image/svg+xml,%3Csvg role='img' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3EGitHub%3C/title%3E%3Cpath d='M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12'/%3E%3C/svg%3E&#34)" class=icon></i> <span>GitHub</span> </a></ul></footer>