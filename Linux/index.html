
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Lifailon">
      
      
        <link rel="canonical" href="https://lifailon.github.io/Linux/">
      
      
        <link rel="prev" href="../DevOps/">
      
      
        <link rel="next" href="../Node.js/">
      
      
      <link rel="icon" href="../Logo/PowerShell-Logo.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.20">
    
    
      
        <title>üêß Linux Commands - PowerShell Commands / RuDocs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.66ac8b77.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CInter:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"Inter"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/highlight/obsidian.min.css">
    
      <link rel="stylesheet" href="../assets/custom/headers.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#filesystem" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="PowerShell Commands / RuDocs" class="md-header__button md-logo" aria-label="PowerShell Commands / RuDocs" data-md-component="logo">
      
  <img src="../Logo/PowerShell-Logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PowerShell Commands / RuDocs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              üêß Linux Commands
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Lifailon/PS-Commands" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="PowerShell Commands / RuDocs" class="md-nav__button md-logo" aria-label="PowerShell Commands / RuDocs" data-md-component="logo">
      
  <img src="../Logo/PowerShell-Logo.png" alt="logo">

    </a>
    PowerShell Commands / RuDocs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Lifailon/PS-Commands" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Start
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Syntax/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PowerShell Syntax
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Windows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operating System
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../FileSystem/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    File System
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Network/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Network
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Threads/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Threads
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modules
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../dotNET/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    .NET
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../COM/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    COM
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../ServerManager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Server Manager
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../ActiveDirectory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Active Directory
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Exchange/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Microsoft Exchange
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Virtualization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virtualization
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Database/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Database
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../MarkupLanguages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Markup Languages
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../API/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Zabbix/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Zabbix
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üê≥ Docker
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../DevOps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DevOps
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    üêß Linux
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    üêß Linux
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#filesystem" class="md-nav__link">
    <span class="md-ellipsis">
      filesystem
    </span>
  </a>
  
    <nav class="md-nav" aria-label="filesystem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ln" class="md-nav__link">
    <span class="md-ellipsis">
      ln
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zip" class="md-nav__link">
    <span class="md-ellipsis">
      zip
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpg" class="md-nav__link">
    <span class="md-ellipsis">
      gpg
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#curl" class="md-nav__link">
    <span class="md-ellipsis">
      curl
    </span>
  </a>
  
    <nav class="md-nav" aria-label="curl">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#influxdb" class="md-nav__link">
    <span class="md-ellipsis">
      influxdb
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wget" class="md-nav__link">
    <span class="md-ellipsis">
      wget
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json" class="md-nav__link">
    <span class="md-ellipsis">
      json
    </span>
  </a>
  
    <nav class="md-nav" aria-label="json">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jq" class="md-nav__link">
    <span class="md-ellipsis">
      jq
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#netcheck" class="md-nav__link">
    <span class="md-ellipsis">
      netcheck
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#brew" class="md-nav__link">
    <span class="md-ellipsis">
      brew
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fx" class="md-nav__link">
    <span class="md-ellipsis">
      fx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jid" class="md-nav__link">
    <span class="md-ellipsis">
      jid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jqp" class="md-nav__link">
    <span class="md-ellipsis">
      jqp
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xmllint" class="md-nav__link">
    <span class="md-ellipsis">
      xmllint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dasel" class="md-nav__link">
    <span class="md-ellipsis">
      dasel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xq" class="md-nav__link">
    <span class="md-ellipsis">
      xq
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#htmlq" class="md-nav__link">
    <span class="md-ellipsis">
      htmlq
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yq" class="md-nav__link">
    <span class="md-ellipsis">
      yq
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yamllint" class="md-nav__link">
    <span class="md-ellipsis">
      yamllint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jsonlint" class="md-nav__link">
    <span class="md-ellipsis">
      jsonlint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#csv" class="md-nav__link">
    <span class="md-ellipsis">
      csv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sttr" class="md-nav__link">
    <span class="md-ellipsis">
      sttr
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grep" class="md-nav__link">
    <span class="md-ellipsis">
      grep
    </span>
  </a>
  
    <nav class="md-nav" aria-label="grep">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sig" class="md-nav__link">
    <span class="md-ellipsis">
      sig
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sed" class="md-nav__link">
    <span class="md-ellipsis">
      sed
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#awk" class="md-nav__link">
    <span class="md-ellipsis">
      awk
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#printf" class="md-nav__link">
    <span class="md-ellipsis">
      printf
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cut" class="md-nav__link">
    <span class="md-ellipsis">
      cut
    </span>
  </a>
  
    <nav class="md-nav" aria-label="cut">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rev" class="md-nav__link">
    <span class="md-ellipsis">
      rev
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tr" class="md-nav__link">
    <span class="md-ellipsis">
      tr
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#man" class="md-nav__link">
    <span class="md-ellipsis">
      man
    </span>
  </a>
  
    <nav class="md-nav" aria-label="man">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cheatsh" class="md-nav__link">
    <span class="md-ellipsis">
      cheat.sh
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tldr" class="md-nav__link">
    <span class="md-ellipsis">
      tldr
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debug" class="md-nav__link">
    <span class="md-ellipsis">
      debug
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tools" class="md-nav__link">
    <span class="md-ellipsis">
      tools
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#find" class="md-nav__link">
    <span class="md-ellipsis">
      find
    </span>
  </a>
  
    <nav class="md-nav" aria-label="find">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exec" class="md-nav__link">
    <span class="md-ellipsis">
      exec
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#locate" class="md-nav__link">
    <span class="md-ellipsis">
      locate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fd" class="md-nav__link">
    <span class="md-ellipsis">
      fd
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bashrc" class="md-nav__link">
    <span class="md-ellipsis">
      bashrc
    </span>
  </a>
  
    <nav class="md-nav" aria-label="bashrc">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fzf" class="md-nav__link">
    <span class="md-ellipsis">
      fzf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hstr" class="md-nav__link">
    <span class="md-ellipsis">
      hstr
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compgen" class="md-nav__link">
    <span class="md-ellipsis">
      compgen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cron" class="md-nav__link">
    <span class="md-ellipsis">
      cron
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#systemctl" class="md-nav__link">
    <span class="md-ellipsis">
      systemctl
    </span>
  </a>
  
    <nav class="md-nav" aria-label="systemctl">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unit" class="md-nav__link">
    <span class="md-ellipsis">
      unit
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#journalctl" class="md-nav__link">
    <span class="md-ellipsis">
      journalctl
    </span>
  </a>
  
    <nav class="md-nav" aria-label="journalctl">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dmesg" class="md-nav__link">
    <span class="md-ellipsis">
      dmesg
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hardware" class="md-nav__link">
    <span class="md-ellipsis">
      hardware
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sysctl" class="md-nav__link">
    <span class="md-ellipsis">
      sysctl
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limits" class="md-nav__link">
    <span class="md-ellipsis">
      limits
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quota" class="md-nav__link">
    <span class="md-ellipsis">
      quota
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#networkmanager" class="md-nav__link">
    <span class="md-ellipsis">
      networkmanager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wireless" class="md-nav__link">
    <span class="md-ellipsis">
      wireless
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#networking" class="md-nav__link">
    <span class="md-ellipsis">
      networking
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#netplan" class="md-nav__link">
    <span class="md-ellipsis">
      netplan
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ip" class="md-nav__link">
    <span class="md-ellipsis">
      ip
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ip">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#net-tools" class="md-nav__link">
    <span class="md-ellipsis">
      net-tools
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#networkd" class="md-nav__link">
    <span class="md-ellipsis">
      networkd
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ss" class="md-nav__link">
    <span class="md-ellipsis">
      ss
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dns" class="md-nav__link">
    <span class="md-ellipsis">
      dns
    </span>
  </a>
  
    <nav class="md-nav" aria-label="dns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resolv" class="md-nav__link">
    <span class="md-ellipsis">
      resolv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resolved" class="md-nav__link">
    <span class="md-ellipsis">
      resolved
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dig" class="md-nav__link">
    <span class="md-ellipsis">
      dig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mtr" class="md-nav__link">
    <span class="md-ellipsis">
      mtr
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vnstat" class="md-nav__link">
    <span class="md-ellipsis">
      vnstat
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#netcat" class="md-nav__link">
    <span class="md-ellipsis">
      netcat
    </span>
  </a>
  
    <nav class="md-nav" aria-label="netcat">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      api
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy" class="md-nav__link">
    <span class="md-ellipsis">
      proxy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nmap" class="md-nav__link">
    <span class="md-ellipsis">
      nmap
    </span>
  </a>
  
    <nav class="md-nav" aria-label="nmap">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rustscan" class="md-nav__link">
    <span class="md-ellipsis">
      rustscan
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tcpdump" class="md-nav__link">
    <span class="md-ellipsis">
      tcpdump
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tshark" class="md-nav__link">
    <span class="md-ellipsis">
      tshark
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ping" class="md-nav__link">
    <span class="md-ellipsis">
      ping
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fping" class="md-nav__link">
    <span class="md-ellipsis">
      fping
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#netping" class="md-nav__link">
    <span class="md-ellipsis">
      netping
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#firewall" class="md-nav__link">
    <span class="md-ellipsis">
      firewall
    </span>
  </a>
  
    <nav class="md-nav" aria-label="firewall">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ufw" class="md-nav__link">
    <span class="md-ellipsis">
      ufw
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show" class="md-nav__link">
    <span class="md-ellipsis">
      show
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#firewalld" class="md-nav__link">
    <span class="md-ellipsis">
      firewalld
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iptables" class="md-nav__link">
    <span class="md-ellipsis">
      iptables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nftables" class="md-nav__link">
    <span class="md-ellipsis">
      nftables
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssh" class="md-nav__link">
    <span class="md-ellipsis">
      ssh
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ssh">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#keygen" class="md-nav__link">
    <span class="md-ellipsis">
      keygen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x11" class="md-nav__link">
    <span class="md-ellipsis">
      x11
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scp" class="md-nav__link">
    <span class="md-ellipsis">
      scp
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sshpass" class="md-nav__link">
    <span class="md-ellipsis">
      sshpass
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sudoers" class="md-nav__link">
    <span class="md-ellipsis">
      sudoers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strace" class="md-nav__link">
    <span class="md-ellipsis">
      strace
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apt" class="md-nav__link">
    <span class="md-ellipsis">
      apt
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snap" class="md-nav__link">
    <span class="md-ellipsis">
      snap
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dpkg" class="md-nav__link">
    <span class="md-ellipsis">
      dpkg
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ntp" class="md-nav__link">
    <span class="md-ellipsis">
      ntp
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ntp">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#time" class="md-nav__link">
    <span class="md-ellipsis">
      time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#language" class="md-nav__link">
    <span class="md-ellipsis">
      language
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timesyncd" class="md-nav__link">
    <span class="md-ellipsis">
      timesyncd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ntpd" class="md-nav__link">
    <span class="md-ellipsis">
      ntpd
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#top" class="md-nav__link">
    <span class="md-ellipsis">
      top
    </span>
  </a>
  
    <nav class="md-nav" aria-label="top">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#htop" class="md-nav__link">
    <span class="md-ellipsis">
      htop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bpytop" class="md-nav__link">
    <span class="md-ellipsis">
      bpytop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#atop" class="md-nav__link">
    <span class="md-ellipsis">
      atop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iftop" class="md-nav__link">
    <span class="md-ellipsis">
      iftop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iotop" class="md-nav__link">
    <span class="md-ellipsis">
      iotop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ps" class="md-nav__link">
    <span class="md-ellipsis">
      ps
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kill" class="md-nav__link">
    <span class="md-ellipsis">
      kill
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jobs" class="md-nav__link">
    <span class="md-ellipsis">
      jobs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mem" class="md-nav__link">
    <span class="md-ellipsis">
      mem
    </span>
  </a>
  
    <nav class="md-nav" aria-label="mem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fincore" class="md-nav__link">
    <span class="md-ellipsis">
      fincore
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lspage" class="md-nav__link">
    <span class="md-ellipsis">
      lspage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lsof" class="md-nav__link">
    <span class="md-ellipsis">
      lsof
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lsof">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#descriptor" class="md-nav__link">
    <span class="md-ellipsis">
      descriptor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vmstat" class="md-nav__link">
    <span class="md-ellipsis">
      vmstat
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sysstat" class="md-nav__link">
    <span class="md-ellipsis">
      sysstat
    </span>
  </a>
  
    <nav class="md-nav" aria-label="sysstat">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iostat" class="md-nav__link">
    <span class="md-ellipsis">
      iostat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mpstat" class="md-nav__link">
    <span class="md-ellipsis">
      mpstat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pidstat" class="md-nav__link">
    <span class="md-ellipsis">
      pidstat
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stress" class="md-nav__link">
    <span class="md-ellipsis">
      stress
    </span>
  </a>
  
    <nav class="md-nav" aria-label="stress">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stress-ng" class="md-nav__link">
    <span class="md-ellipsis">
      stress-ng
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#smart" class="md-nav__link">
    <span class="md-ellipsis">
      smart
    </span>
  </a>
  
    <nav class="md-nav" aria-label="smart">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#smartmontools" class="md-nav__link">
    <span class="md-ellipsis">
      smartmontools
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sensors" class="md-nav__link">
    <span class="md-ellipsis">
      sensors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#badblocks" class="md-nav__link">
    <span class="md-ellipsis">
      badblocks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hdparm" class="md-nav__link">
    <span class="md-ellipsis">
      hdparm
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#disk" class="md-nav__link">
    <span class="md-ellipsis">
      disk
    </span>
  </a>
  
    <nav class="md-nav" aria-label="disk">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parted" class="md-nav__link">
    <span class="md-ellipsis">
      parted
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fdisk" class="md-nav__link">
    <span class="md-ellipsis">
      fdisk
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sfdisk" class="md-nav__link">
    <span class="md-ellipsis">
      sfdisk
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#swap" class="md-nav__link">
    <span class="md-ellipsis">
      swap
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lvm" class="md-nav__link">
    <span class="md-ellipsis">
      lvm
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#md" class="md-nav__link">
    <span class="md-ellipsis">
      md
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tgt" class="md-nav__link">
    <span class="md-ellipsis">
      tgt
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dd" class="md-nav__link">
    <span class="md-ellipsis">
      dd
    </span>
  </a>
  
    <nav class="md-nav" aria-label="dd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backup" class="md-nav__link">
    <span class="md-ellipsis">
      backup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iso" class="md-nav__link">
    <span class="md-ellipsis">
      iso
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rdiff" class="md-nav__link">
    <span class="md-ellipsis">
      rdiff
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#users" class="md-nav__link">
    <span class="md-ellipsis">
      users
    </span>
  </a>
  
    <nav class="md-nav" aria-label="users">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#passwd" class="md-nav__link">
    <span class="md-ellipsis">
      passwd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chage" class="md-nav__link">
    <span class="md-ellipsis">
      chage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#id" class="md-nav__link">
    <span class="md-ellipsis">
      id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usermod" class="md-nav__link">
    <span class="md-ellipsis">
      usermod
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#profile" class="md-nav__link">
    <span class="md-ellipsis">
      profile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bashrc_1" class="md-nav__link">
    <span class="md-ellipsis">
      bashrc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#useradd" class="md-nav__link">
    <span class="md-ellipsis">
      useradd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adduser" class="md-nav__link">
    <span class="md-ellipsis">
      adduser
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chmod" class="md-nav__link">
    <span class="md-ellipsis">
      chmod
    </span>
  </a>
  
    <nav class="md-nav" aria-label="chmod">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chown" class="md-nav__link">
    <span class="md-ellipsis">
      chown
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#groups" class="md-nav__link">
    <span class="md-ellipsis">
      groups
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usermod_1" class="md-nav__link">
    <span class="md-ellipsis">
      usermod
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#domain" class="md-nav__link">
    <span class="md-ellipsis">
      domain
    </span>
  </a>
  
    <nav class="md-nav" aria-label="domain">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#realmd" class="md-nav__link">
    <span class="md-ellipsis">
      realmd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sssd" class="md-nav__link">
    <span class="md-ellipsis">
      sssd
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#syslog" class="md-nav__link">
    <span class="md-ellipsis">
      syslog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="syslog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#server" class="md-nav__link">
    <span class="md-ellipsis">
      server
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client" class="md-nav__link">
    <span class="md-ellipsis">
      client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zabbix-agent" class="md-nav__link">
    <span class="md-ellipsis">
      zabbix-agent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ommail" class="md-nav__link">
    <span class="md-ellipsis">
      ommail
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logrotate" class="md-nav__link">
    <span class="md-ellipsis">
      logrotate
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#smb" class="md-nav__link">
    <span class="md-ellipsis">
      smb
    </span>
  </a>
  
    <nav class="md-nav" aria-label="smb">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cifs" class="md-nav__link">
    <span class="md-ellipsis">
      cifs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#samba" class="md-nav__link">
    <span class="md-ellipsis">
      samba
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-cifs" class="md-nav__link">
    <span class="md-ellipsis">
      client cifs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-samba-client" class="md-nav__link">
    <span class="md-ellipsis">
      client samba-client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recycle" class="md-nav__link">
    <span class="md-ellipsis">
      recycle
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nfs" class="md-nav__link">
    <span class="md-ellipsis">
      nfs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="nfs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#server_1" class="md-nav__link">
    <span class="md-ellipsis">
      server
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client_1" class="md-nav__link">
    <span class="md-ellipsis">
      client
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ftp" class="md-nav__link">
    <span class="md-ellipsis">
      ftp
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ftp">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ftp-client" class="md-nav__link">
    <span class="md-ellipsis">
      ftp client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ftps" class="md-nav__link">
    <span class="md-ellipsis">
      ftps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rsync" class="md-nav__link">
    <span class="md-ellipsis">
      rsync
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apache" class="md-nav__link">
    <span class="md-ellipsis">
      apache
    </span>
  </a>
  
    <nav class="md-nav" aria-label="apache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api_1" class="md-nav__link">
    <span class="md-ellipsis">
      api
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#status" class="md-nav__link">
    <span class="md-ellipsis">
      status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#webdav" class="md-nav__link">
    <span class="md-ellipsis">
      webdav
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#haproxy" class="md-nav__link">
    <span class="md-ellipsis">
      haproxy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keepalive" class="md-nav__link">
    <span class="md-ellipsis">
      keepalive
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Node.js/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Node.js
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#filesystem" class="md-nav__link">
    <span class="md-ellipsis">
      filesystem
    </span>
  </a>
  
    <nav class="md-nav" aria-label="filesystem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ln" class="md-nav__link">
    <span class="md-ellipsis">
      ln
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zip" class="md-nav__link">
    <span class="md-ellipsis">
      zip
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpg" class="md-nav__link">
    <span class="md-ellipsis">
      gpg
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#curl" class="md-nav__link">
    <span class="md-ellipsis">
      curl
    </span>
  </a>
  
    <nav class="md-nav" aria-label="curl">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#influxdb" class="md-nav__link">
    <span class="md-ellipsis">
      influxdb
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wget" class="md-nav__link">
    <span class="md-ellipsis">
      wget
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json" class="md-nav__link">
    <span class="md-ellipsis">
      json
    </span>
  </a>
  
    <nav class="md-nav" aria-label="json">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jq" class="md-nav__link">
    <span class="md-ellipsis">
      jq
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#netcheck" class="md-nav__link">
    <span class="md-ellipsis">
      netcheck
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#brew" class="md-nav__link">
    <span class="md-ellipsis">
      brew
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fx" class="md-nav__link">
    <span class="md-ellipsis">
      fx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jid" class="md-nav__link">
    <span class="md-ellipsis">
      jid
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jqp" class="md-nav__link">
    <span class="md-ellipsis">
      jqp
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xmllint" class="md-nav__link">
    <span class="md-ellipsis">
      xmllint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dasel" class="md-nav__link">
    <span class="md-ellipsis">
      dasel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xq" class="md-nav__link">
    <span class="md-ellipsis">
      xq
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#htmlq" class="md-nav__link">
    <span class="md-ellipsis">
      htmlq
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yq" class="md-nav__link">
    <span class="md-ellipsis">
      yq
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yamllint" class="md-nav__link">
    <span class="md-ellipsis">
      yamllint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jsonlint" class="md-nav__link">
    <span class="md-ellipsis">
      jsonlint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#csv" class="md-nav__link">
    <span class="md-ellipsis">
      csv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sttr" class="md-nav__link">
    <span class="md-ellipsis">
      sttr
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grep" class="md-nav__link">
    <span class="md-ellipsis">
      grep
    </span>
  </a>
  
    <nav class="md-nav" aria-label="grep">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sig" class="md-nav__link">
    <span class="md-ellipsis">
      sig
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sed" class="md-nav__link">
    <span class="md-ellipsis">
      sed
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#awk" class="md-nav__link">
    <span class="md-ellipsis">
      awk
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#printf" class="md-nav__link">
    <span class="md-ellipsis">
      printf
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cut" class="md-nav__link">
    <span class="md-ellipsis">
      cut
    </span>
  </a>
  
    <nav class="md-nav" aria-label="cut">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rev" class="md-nav__link">
    <span class="md-ellipsis">
      rev
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tr" class="md-nav__link">
    <span class="md-ellipsis">
      tr
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#man" class="md-nav__link">
    <span class="md-ellipsis">
      man
    </span>
  </a>
  
    <nav class="md-nav" aria-label="man">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cheatsh" class="md-nav__link">
    <span class="md-ellipsis">
      cheat.sh
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tldr" class="md-nav__link">
    <span class="md-ellipsis">
      tldr
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debug" class="md-nav__link">
    <span class="md-ellipsis">
      debug
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tools" class="md-nav__link">
    <span class="md-ellipsis">
      tools
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#find" class="md-nav__link">
    <span class="md-ellipsis">
      find
    </span>
  </a>
  
    <nav class="md-nav" aria-label="find">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exec" class="md-nav__link">
    <span class="md-ellipsis">
      exec
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#locate" class="md-nav__link">
    <span class="md-ellipsis">
      locate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fd" class="md-nav__link">
    <span class="md-ellipsis">
      fd
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bashrc" class="md-nav__link">
    <span class="md-ellipsis">
      bashrc
    </span>
  </a>
  
    <nav class="md-nav" aria-label="bashrc">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fzf" class="md-nav__link">
    <span class="md-ellipsis">
      fzf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hstr" class="md-nav__link">
    <span class="md-ellipsis">
      hstr
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compgen" class="md-nav__link">
    <span class="md-ellipsis">
      compgen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cron" class="md-nav__link">
    <span class="md-ellipsis">
      cron
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#systemctl" class="md-nav__link">
    <span class="md-ellipsis">
      systemctl
    </span>
  </a>
  
    <nav class="md-nav" aria-label="systemctl">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unit" class="md-nav__link">
    <span class="md-ellipsis">
      unit
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#journalctl" class="md-nav__link">
    <span class="md-ellipsis">
      journalctl
    </span>
  </a>
  
    <nav class="md-nav" aria-label="journalctl">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dmesg" class="md-nav__link">
    <span class="md-ellipsis">
      dmesg
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hardware" class="md-nav__link">
    <span class="md-ellipsis">
      hardware
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sysctl" class="md-nav__link">
    <span class="md-ellipsis">
      sysctl
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limits" class="md-nav__link">
    <span class="md-ellipsis">
      limits
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quota" class="md-nav__link">
    <span class="md-ellipsis">
      quota
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#networkmanager" class="md-nav__link">
    <span class="md-ellipsis">
      networkmanager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wireless" class="md-nav__link">
    <span class="md-ellipsis">
      wireless
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#networking" class="md-nav__link">
    <span class="md-ellipsis">
      networking
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#netplan" class="md-nav__link">
    <span class="md-ellipsis">
      netplan
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ip" class="md-nav__link">
    <span class="md-ellipsis">
      ip
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ip">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#net-tools" class="md-nav__link">
    <span class="md-ellipsis">
      net-tools
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#networkd" class="md-nav__link">
    <span class="md-ellipsis">
      networkd
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ss" class="md-nav__link">
    <span class="md-ellipsis">
      ss
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dns" class="md-nav__link">
    <span class="md-ellipsis">
      dns
    </span>
  </a>
  
    <nav class="md-nav" aria-label="dns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resolv" class="md-nav__link">
    <span class="md-ellipsis">
      resolv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resolved" class="md-nav__link">
    <span class="md-ellipsis">
      resolved
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dig" class="md-nav__link">
    <span class="md-ellipsis">
      dig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mtr" class="md-nav__link">
    <span class="md-ellipsis">
      mtr
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vnstat" class="md-nav__link">
    <span class="md-ellipsis">
      vnstat
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#netcat" class="md-nav__link">
    <span class="md-ellipsis">
      netcat
    </span>
  </a>
  
    <nav class="md-nav" aria-label="netcat">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      api
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy" class="md-nav__link">
    <span class="md-ellipsis">
      proxy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nmap" class="md-nav__link">
    <span class="md-ellipsis">
      nmap
    </span>
  </a>
  
    <nav class="md-nav" aria-label="nmap">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rustscan" class="md-nav__link">
    <span class="md-ellipsis">
      rustscan
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tcpdump" class="md-nav__link">
    <span class="md-ellipsis">
      tcpdump
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tshark" class="md-nav__link">
    <span class="md-ellipsis">
      tshark
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ping" class="md-nav__link">
    <span class="md-ellipsis">
      ping
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fping" class="md-nav__link">
    <span class="md-ellipsis">
      fping
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#netping" class="md-nav__link">
    <span class="md-ellipsis">
      netping
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#firewall" class="md-nav__link">
    <span class="md-ellipsis">
      firewall
    </span>
  </a>
  
    <nav class="md-nav" aria-label="firewall">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ufw" class="md-nav__link">
    <span class="md-ellipsis">
      ufw
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show" class="md-nav__link">
    <span class="md-ellipsis">
      show
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#firewalld" class="md-nav__link">
    <span class="md-ellipsis">
      firewalld
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iptables" class="md-nav__link">
    <span class="md-ellipsis">
      iptables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nftables" class="md-nav__link">
    <span class="md-ellipsis">
      nftables
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssh" class="md-nav__link">
    <span class="md-ellipsis">
      ssh
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ssh">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#keygen" class="md-nav__link">
    <span class="md-ellipsis">
      keygen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x11" class="md-nav__link">
    <span class="md-ellipsis">
      x11
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scp" class="md-nav__link">
    <span class="md-ellipsis">
      scp
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sshpass" class="md-nav__link">
    <span class="md-ellipsis">
      sshpass
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sudoers" class="md-nav__link">
    <span class="md-ellipsis">
      sudoers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strace" class="md-nav__link">
    <span class="md-ellipsis">
      strace
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apt" class="md-nav__link">
    <span class="md-ellipsis">
      apt
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snap" class="md-nav__link">
    <span class="md-ellipsis">
      snap
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dpkg" class="md-nav__link">
    <span class="md-ellipsis">
      dpkg
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ntp" class="md-nav__link">
    <span class="md-ellipsis">
      ntp
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ntp">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#time" class="md-nav__link">
    <span class="md-ellipsis">
      time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#language" class="md-nav__link">
    <span class="md-ellipsis">
      language
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timesyncd" class="md-nav__link">
    <span class="md-ellipsis">
      timesyncd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ntpd" class="md-nav__link">
    <span class="md-ellipsis">
      ntpd
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#top" class="md-nav__link">
    <span class="md-ellipsis">
      top
    </span>
  </a>
  
    <nav class="md-nav" aria-label="top">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#htop" class="md-nav__link">
    <span class="md-ellipsis">
      htop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bpytop" class="md-nav__link">
    <span class="md-ellipsis">
      bpytop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#atop" class="md-nav__link">
    <span class="md-ellipsis">
      atop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iftop" class="md-nav__link">
    <span class="md-ellipsis">
      iftop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iotop" class="md-nav__link">
    <span class="md-ellipsis">
      iotop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ps" class="md-nav__link">
    <span class="md-ellipsis">
      ps
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kill" class="md-nav__link">
    <span class="md-ellipsis">
      kill
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jobs" class="md-nav__link">
    <span class="md-ellipsis">
      jobs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mem" class="md-nav__link">
    <span class="md-ellipsis">
      mem
    </span>
  </a>
  
    <nav class="md-nav" aria-label="mem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fincore" class="md-nav__link">
    <span class="md-ellipsis">
      fincore
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lspage" class="md-nav__link">
    <span class="md-ellipsis">
      lspage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lsof" class="md-nav__link">
    <span class="md-ellipsis">
      lsof
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lsof">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#descriptor" class="md-nav__link">
    <span class="md-ellipsis">
      descriptor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vmstat" class="md-nav__link">
    <span class="md-ellipsis">
      vmstat
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sysstat" class="md-nav__link">
    <span class="md-ellipsis">
      sysstat
    </span>
  </a>
  
    <nav class="md-nav" aria-label="sysstat">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iostat" class="md-nav__link">
    <span class="md-ellipsis">
      iostat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mpstat" class="md-nav__link">
    <span class="md-ellipsis">
      mpstat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pidstat" class="md-nav__link">
    <span class="md-ellipsis">
      pidstat
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stress" class="md-nav__link">
    <span class="md-ellipsis">
      stress
    </span>
  </a>
  
    <nav class="md-nav" aria-label="stress">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stress-ng" class="md-nav__link">
    <span class="md-ellipsis">
      stress-ng
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#smart" class="md-nav__link">
    <span class="md-ellipsis">
      smart
    </span>
  </a>
  
    <nav class="md-nav" aria-label="smart">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#smartmontools" class="md-nav__link">
    <span class="md-ellipsis">
      smartmontools
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sensors" class="md-nav__link">
    <span class="md-ellipsis">
      sensors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#badblocks" class="md-nav__link">
    <span class="md-ellipsis">
      badblocks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hdparm" class="md-nav__link">
    <span class="md-ellipsis">
      hdparm
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#disk" class="md-nav__link">
    <span class="md-ellipsis">
      disk
    </span>
  </a>
  
    <nav class="md-nav" aria-label="disk">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parted" class="md-nav__link">
    <span class="md-ellipsis">
      parted
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fdisk" class="md-nav__link">
    <span class="md-ellipsis">
      fdisk
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sfdisk" class="md-nav__link">
    <span class="md-ellipsis">
      sfdisk
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#swap" class="md-nav__link">
    <span class="md-ellipsis">
      swap
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lvm" class="md-nav__link">
    <span class="md-ellipsis">
      lvm
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#md" class="md-nav__link">
    <span class="md-ellipsis">
      md
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tgt" class="md-nav__link">
    <span class="md-ellipsis">
      tgt
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dd" class="md-nav__link">
    <span class="md-ellipsis">
      dd
    </span>
  </a>
  
    <nav class="md-nav" aria-label="dd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backup" class="md-nav__link">
    <span class="md-ellipsis">
      backup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iso" class="md-nav__link">
    <span class="md-ellipsis">
      iso
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rdiff" class="md-nav__link">
    <span class="md-ellipsis">
      rdiff
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#users" class="md-nav__link">
    <span class="md-ellipsis">
      users
    </span>
  </a>
  
    <nav class="md-nav" aria-label="users">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#passwd" class="md-nav__link">
    <span class="md-ellipsis">
      passwd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chage" class="md-nav__link">
    <span class="md-ellipsis">
      chage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#id" class="md-nav__link">
    <span class="md-ellipsis">
      id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usermod" class="md-nav__link">
    <span class="md-ellipsis">
      usermod
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#profile" class="md-nav__link">
    <span class="md-ellipsis">
      profile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bashrc_1" class="md-nav__link">
    <span class="md-ellipsis">
      bashrc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#useradd" class="md-nav__link">
    <span class="md-ellipsis">
      useradd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adduser" class="md-nav__link">
    <span class="md-ellipsis">
      adduser
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chmod" class="md-nav__link">
    <span class="md-ellipsis">
      chmod
    </span>
  </a>
  
    <nav class="md-nav" aria-label="chmod">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chown" class="md-nav__link">
    <span class="md-ellipsis">
      chown
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#groups" class="md-nav__link">
    <span class="md-ellipsis">
      groups
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usermod_1" class="md-nav__link">
    <span class="md-ellipsis">
      usermod
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#domain" class="md-nav__link">
    <span class="md-ellipsis">
      domain
    </span>
  </a>
  
    <nav class="md-nav" aria-label="domain">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#realmd" class="md-nav__link">
    <span class="md-ellipsis">
      realmd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sssd" class="md-nav__link">
    <span class="md-ellipsis">
      sssd
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#syslog" class="md-nav__link">
    <span class="md-ellipsis">
      syslog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="syslog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#server" class="md-nav__link">
    <span class="md-ellipsis">
      server
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client" class="md-nav__link">
    <span class="md-ellipsis">
      client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zabbix-agent" class="md-nav__link">
    <span class="md-ellipsis">
      zabbix-agent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ommail" class="md-nav__link">
    <span class="md-ellipsis">
      ommail
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logrotate" class="md-nav__link">
    <span class="md-ellipsis">
      logrotate
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#smb" class="md-nav__link">
    <span class="md-ellipsis">
      smb
    </span>
  </a>
  
    <nav class="md-nav" aria-label="smb">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cifs" class="md-nav__link">
    <span class="md-ellipsis">
      cifs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#samba" class="md-nav__link">
    <span class="md-ellipsis">
      samba
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-cifs" class="md-nav__link">
    <span class="md-ellipsis">
      client cifs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-samba-client" class="md-nav__link">
    <span class="md-ellipsis">
      client samba-client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recycle" class="md-nav__link">
    <span class="md-ellipsis">
      recycle
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nfs" class="md-nav__link">
    <span class="md-ellipsis">
      nfs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="nfs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#server_1" class="md-nav__link">
    <span class="md-ellipsis">
      server
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client_1" class="md-nav__link">
    <span class="md-ellipsis">
      client
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ftp" class="md-nav__link">
    <span class="md-ellipsis">
      ftp
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ftp">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ftp-client" class="md-nav__link">
    <span class="md-ellipsis">
      ftp client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ftps" class="md-nav__link">
    <span class="md-ellipsis">
      ftps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rsync" class="md-nav__link">
    <span class="md-ellipsis">
      rsync
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apache" class="md-nav__link">
    <span class="md-ellipsis">
      apache
    </span>
  </a>
  
    <nav class="md-nav" aria-label="apache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api_1" class="md-nav__link">
    <span class="md-ellipsis">
      api
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#status" class="md-nav__link">
    <span class="md-ellipsis">
      status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#webdav" class="md-nav__link">
    <span class="md-ellipsis">
      webdav
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#haproxy" class="md-nav__link">
    <span class="md-ellipsis">
      haproxy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keepalive" class="md-nav__link">
    <span class="md-ellipsis">
      keepalive
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>üêß Linux</h1>

<p align="center">
    <a href="https://github.com/Lifailon/PS-Commands/blob/rsa/linux.md"><img title="Linux Commands Logo"src="Linux-Commands-Logo.png"></a>
</p>

<p align="center">
    –ó–∞–º–µ—Ç–∫–∏ –ø–æ —Ä–∞–±–æ—Ç–µ —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏ –∏ –∫–æ–Ω—Å–æ–ª—å–Ω—ã–º–∏ —É—Ç–∏–ª–∏—Ç–∞–º–∏ üêß <b>Linux</b>.
</p>

<h2 id="filesystem">filesystem</h2>
<p><code>file Console-Performance.sh</code> —É–∑–Ω–∞—Ç—å —Ç–∏–ø —Ñ–∞–π–ª–∞ (—Ç–µ–∫—Å—Ç–æ–≤—ã–π, –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª, –∞—Ä—Ö–∏–≤ –∏–ª–∏ –¥—Ä—É–≥–æ–π)<br />
<code>stat Console-Performance.sh</code> —É–∑–Ω–∞—Ç—å —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–ª–æ–∫–æ–≤, –∑–∞–Ω—è—Ç—ã—Ö —Ñ–∞–π–ª–æ–º –Ω–∞ –¥–∏—Å–∫–µ, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∂–µ—Å—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫, –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ <br />
<code>pwd</code> —Ç–µ–∫—É—â–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è<br />
<code>ls -lh *</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–∞–∂–¥–æ–≥–æ –ø–æ–¥–∫–∞—Ç–∞–ª–æ–≥–∞ –æ—Ç–¥–µ–ª—å–Ω–æ<br />
<code>ls -lhaF</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–∫—Ä—ã—Ç—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (-a) —Å —Ç–æ—á–∫–æ–π –∏ –≤—ã–¥–µ–ª–∏—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (/)<br />
<code>which top</code> —É–∑–Ω–∞—Ç—å –ø—É—Ç—å –¥–æ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞<br />
<code>stat $(which top)</code> —É–∑–Ω–∞—Ç—å –¥–∞—Ç—É –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª—É <br />
<code>cat -n /etc/passwd</code> –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–∞ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –Ω–æ–º–µ—Ä–æ–≤ —Å—Ç—Ä–æ–∫<br />
<code>mkdir</code> —Å–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é<br />
<code>mktemp -d</code> —Å–æ–∑–¥–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª/–∫–∞—Ç–∞–ª–æ–≥ (-d)<br />
<code>touch -t 202106222200.15 test.file</code> —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –∏ —É–∫–∞–∑–∞—Ç—å –¥–∞—Ç—É —Å–æ–∑–¥–∞–Ω–∏—è<br />
<code>cp test.file test.file2</code> –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª–∞/–∫–∞—Ç–∞–ª–æ–≥<br />
<code>mv test.file2 test.file3</code> –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å/–ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Ñ–∞–π–ª/–∫–∞—Ç–∞–ª–æ–≥<br />
<code>rm -r test.file</code> —É–¥–∞–ª–∏—Ç—å –∫–∞—Ç–∞–ª–æ–≥ —Å —Ñ–∞–π–ª–∞–º–∏ (-r)</p>
<h3 id="ln">ln</h3>
<p><code>echo "test" &gt; testfile</code><br />
<code>ln /test/testfile /test/testlink</code> —Å–æ–∑–¥–∞—Ç—å –∂–µ—Å—Ç–∫—É (hard) —Å—Å—ã–ª–∫—É, –∫–æ—Ç–æ—Ä–∞—è —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ inode, —Ç.–µ. –æ–Ω–∏ –¥–µ–ª—è—Ç –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –¥–∏—Å–∫–µ<br />
<code>rm testfile</code> –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ–¥–Ω–æ–≥–æ –∏–∑ —Ñ–∞–π–ª–æ–≤ –Ω–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —É–¥–∞–ª–µ–Ω–∏—é —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ, –ø–æ–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ –∂–µ—Å—Ç–∫–∞—è —Å—Å—ã–ª–∫–∞<br />
<code>ln -s /test/testfile /test/testlink</code> —Å–æ–∑–¥–∞—Ç—å —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫—É—é (-s - soft) —Å—Å—ã–ª–∫—É, –∫–æ—Ç–æ—Ä–∞—è —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —Ñ–∞–π–ª testfile<br />
<code>echo "test" &gt;&gt; testfile</code> –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª, –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—É–¥—É—Ç –æ—Ç—Ä–∞–∂–µ–Ω—ã –≤ testlink<br />
<code>rm testfile</code> –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —É —Å—Å—ã–ª–∫–∏ –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞ (No such file or directory)</p>
<h3 id="zip">zip</h3>
<p><code>rar a test.rar filename filename2</code> —Å–æ–∑–¥–∞—Ç—å –∞—Ä—Ö–∏–≤ test.rar –∏ –¥–æ–±–∞–≤–∏—Ç—å —Ç—É–¥–∞ –¥–≤–∞ —Ñ–∞–π–ª–∞ (—Ñ–∞–π–ª—ã –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ –∞—Ä—Ö–∏–≤)<br />
<code>unrar x test.rar</code> —Ä–∞–∑–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å<br />
<code>zip -r test.zip filename</code> –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å (—Ñ–∞–π–ª—ã –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ –∞—Ä—Ö–∏–≤)<br />
<code>unzip test.zip</code> —Ä–∞–∑–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å<br />
<code>bzip2 filename</code> –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤ filename.bz2 (—Ñ–∞–π–ª—ã –ø–µ—Ä–µ–ø–µ—â–∞—é—Ç—Å—è –≤ –∞—Ä—Ö–∏–≤)<br />
<code>bunzip2 filename.bz2</code> —Ä–∞–∑–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å<br />
<code>gzip filename</code> –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤ filename.gz (—Ñ–∞–π–ª—ã –ø–µ—Ä–µ–ø–µ—â–∞—é—Ç—Å—è –≤ –∞—Ä—Ö–∏–≤)<br />
<code>tar --totals -cvf archive.tar file1 file2 file3</code> –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∏ —Ñ–∞–π–ª–∞<br />
<code>wget https://github.com/librespeed/speedtest-cli/releases/download/v1.0.10/librespeed-cli_1.0.10_linux_amd64.tar.gz</code> –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞—Ä—Ö–∏–≤<br />
<code>gunzip librespeed-cli_1.0.10_linux_amd64.tar.gz</code> –∏–∑–≤–ª–µ—á—å –∏–∑ gz –≤ tar<br />
<code>tar -tf librespeed-cli_1.0.10_linux_amd64.tar</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∞—Ä—Ö–∏–≤–∞<br />
<code>tar -xvf librespeed-cli_1.0.10_linux_amd64.tar</code> —Ä–∞–∑–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å<br />
<code>./librespeed-cli --help</code><br />
<code>./librespeed-cli --json</code></p>
<h3 id="gpg">gpg</h3>
<p><code>gpg -c filename</code> –∑–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ<br />
<code>gpg filename.gpg</code> —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ<br />
<code>gpg --gen-key</code> —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–∞—Ä—É –∫–ª—é—á–µ–π (–ø—É–±–ª–∏—á–Ω—ã–π –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á–∏)<br />
<code>gpg --export -a 'User Name' &gt; publickey.asc</code> —ç–∫—Å–ø–æ—Ä—Ç –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞<br />
<code>gpg --import publickey.asc</code> –∏–º–ø–æ—Ä—Ç –Ω–∞ –≤—Ç–æ—Ä–æ–π —Å—Ç–æ—Ä–æ–Ω–µ<br />
<code>gpg --encrypt --recipient 'Recipient Name' filename</code> –∑–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è, —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ —Å–º–æ–∂–µ—Ç —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ<br />
<code>gpg --decrypt encryptedfile.gpg</code> —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ —Å –ø–æ–º–æ—â—å—é –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞<br />
<code>gpg --sign filename</code> –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏—Ö –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏<br />
<code>gpg --verify signedfile.gpg</code> –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è</p>
<h2 id="curl">curl</h2>
<p><code>curl ifconfig.me</code> —É–∑–Ω–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π ip<br />
<code>curl -v telnet://192.168.3.100:22</code> –ø—Ä–≤–æ–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–∞ –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–æ–º—É –æ–Ω –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç<br />
<code>curl -s -o /dev/null http://google.com</code> –ø–æ–¥–∞–≤–∏—Ç—å –≤–µ—Å—å –≤—ã–≤–æ–¥ (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É --silent –∏ --output)<br />
<code>curl -s -o /dev/null --show-error --fail http://google.com</code> –æ—Å—Ç–∞–≤–∏—Ç—å –≤—ã–≤–æ–¥ –æ—à–∏–±–æ–∫<br />
<code>curl http://192.168.3.101:8081/api/ --connect-timeout 5</code> –∑–∞–¥–∞—Ç—å timeout –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö<br />
<code>curl -IL https://github.com/Lifailon/hwstat/archive/refs/tags/hwstat-0.0.8.zip</code> –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∞–π–ª–µ –ø–µ—Ä–µ–¥ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ–º (--head/--location)<br />
<code>curl -O https://raw.githubusercontent.com/Lifailon/hwstat/rsa/hwstat.sh</code> —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª<br />
<code>curl -o /tmp/hwstat.sh https://raw.githubusercontent.com/Lifailon/hwstat/rsa/hwstat.sh</code> —É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å<br />
<code>curl -Ik https://192.168.3.104:9443/</code> –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫—É —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ SSL (--insecure)<br />
<code>curl -u &lt;user:password&gt; https://test.com/endpoint</code> –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è<br />
<code>curl -x "http://Proxy:Proxy@192.168.3.100:9090" "https://kinozal.tv/rss.xml"</code> –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Proxy-—Å–µ—Ä–≤–µ—Ä<br />
<code>curl --insecure --ssl-reqd "smtps://smtp.yandex.ru" --mail-from "src@yandex.ru" --mail-rcpt "dst@yandex.ru" --user "src@yandex.ru" --upload-file out.txt</code> –æ—Ç–ø—Ä–∞–≤–∫–∞ email —á–µ—Ä–µ–∑ SMTPS (SMTP over SSL/TLS) —Å–µ—Ä–≤–µ—Ä </p>
<h3 id="influxdb">influxdb</h3>
<pre><code class="language-bash">ip=&quot;192.168.3.104&quot;
db=&quot;dbash&quot;
table=&quot;icmp_metrics_table&quot;
server=&quot;google.com&quot;
host=$(hostname)
date=$(echo $EPOCHREALTIME | sed -E &quot;s/\..+//&quot;)&quot;000000000&quot;
ping=$(ping $server -c 1)
loss=$(printf &quot;%s\n&quot; &quot;${ping[@]}&quot; | grep -Eo &quot;[0-9]+%&quot; | sed &quot;s/%//&quot;)
if (( $(echo &quot;$loss != 100&quot; | bc) )); then
    status=&quot;true&quot;
    rtt=$(printf &quot;%s\n&quot; &quot;${ping[@]}&quot; | grep rtt | awk -F&quot;/&quot; '{print $5}')
else
    status=&quot;false&quot;
    rtt=&quot;0&quot;
fi
curl -i -XPOST &quot;http://$ip:8086/write?db=$db&quot; --data-binary &quot;$table,host=$host,server=$server status=$status,rtt=$rtt $date&quot;
</code></pre>
<h3 id="wget">wget</h3>
<p><code>wget --spider https://download.nextcloud.com/server/releases/nextcloud-21.0.1.tar.bz2</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å (--spider) —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å URL –∏ —É–∑–Ω–∞—Ç—å —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (Length)<br />
<code>wget -O nextcloud.tar.bz2 https://download.nextcloud.com/server/releases/nextcloud-21.0.1.tar.bz2</code> —Å–∫–∞—á–∞—Ç—å —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º (-O) <br />
<code>wget -P /tmp https://download.nextcloud.com/server/releases/nextcloud-21.0.1.tar.bz2</code> —Å–∫–∞—á–∞—Ç—å –≤ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é (-P)<br />
<code>wget -b -o ~/wget.log https://download.nextcloud.com/server/releases/nextcloud-21.0.1.tar.bz2</code> –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ (-b) –∏ –∑–∞–ø–∏—Å–∞—Ç—å –≤—ã–≤–æ–¥ –≤ –ª–æ–≥-—Ñ–∞–π–ª (-o)</p>
<h2 id="json">json</h2>
<h3 id="jq">jq</h3>
<p><code>apt install jq</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å jq (https://github.com/jqlang/jq)<br />
<code>nodes=$(curl -s -H "Accept: application/json" https://check-host.net/nodes/ips)</code> –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ node<br />
<code>echo $nodes | jq</code> –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥–æ–π jq (–≤—ã–≤–æ–¥ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ, –∞ –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—é—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —Ü–≤–µ—Ç–æ–º)<br />
<code>echo $nodes | jq '.nodes | length'</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—á–µ—Ä–Ω–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –±–ª–æ–∫–µ node[]<br />
<code>echo $nodes | jq -r .nodes[1]</code> –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –º–∞—Å—Å–∏–≤–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ raw string (not JSON)<br />
<code>echo $nodes | jq -r .nodes[-1]</code> –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –º–∞—Å—Å–∏–≤–∞<br />
<code>hosts=$(curl -s -H "Accept: application/json" https://check-host.net/nodes/hosts)</code> –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ö–æ—Å—Ç–æ–≤<br />
<code>echo $hosts | jq -r '.nodes | to_entries[].key'</code> –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π (–∞–¥—Ä–µ—Å–∞ —Ö–æ—Å—Ç–æ–≤) –∏–∑ –æ–±—ä–µ–∫–∞ (–Ω–µ —è–≤–ª—è–µ—Ç—Å—è –º–∞—Å—Å–∏–≤–æ–º)<br />
<code>echo $hosts | jq -r '.nodes | to_entries[].value'</code> –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏—è –≤—Å–µ—Ö –≤–ª–æ–∂–∞–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π<br />
<code>echo $hosts | jq '.nodes."bg1.node.check-host.net"'</code> –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ—á–µ—Ä–Ω–µ–≥–æ –∫–ª—é—á–∞ nodes –ø–æ –∏–º–µ–Ω–∏<br />
<code>echo $hosts | jq '.nodes | [.[]] | last'</code> –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –≤–Ω—É—Ç—Ä–∏ nodes –≤ –º–∞—Å—Å–∏–≤, –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –≤—ã–≤–æ–¥ –≤ —Ñ—É–Ω–∫—Ü–∏—é last –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±—ä–µ–∫—Ç–∞<br />
<code>echo $hosts | jq '.nodes | to_entries[].value.location[0] == "ru"'</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –æ–±—ä–µ–∫—Ç–∞ –≤ —É—Å–ª–æ–≤–∏–∏ –Ω–∞ true/false (–≤–µ—Ä–Ω–µ—Ç –º–∞—Å—Å–∏–≤)<br />
<code>echo $hosts | jq '.nodes | to_entries[] | {Host: .key, Country: .value.location[1], City: .value.location[2]}'</code> –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ key-value –∏–∑ –æ–±—ä–µ–∫—Ç–∞ nodes –∏ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –º–∞—Å—Å–∏–≤ —Å –Ω–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –∫–ª—é—á–µ–π<br />
<code>echo $hosts | jq -r '.nodes | to_entries[] | "\(.key) (\(.value.location[1]), \(.value.location[2]))"'</code> —Å–æ–±—Ä–∞—Ç—å –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫–∏ –∏–∑ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∫–ª—é—á–µ–π<br />
<code>var="-" &amp;&amp; echo $hosts | jq --arg v "$var" -r '.nodes | to_entries[] | "\(.key) \($v) \(.value.location[1]) \($v) \(.value.location[2])"'</code> –ø–µ—Ä–µ–¥–∞—Ç—å –≤–Ω–µ—à–Ω—é—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–Ω—É—Ç—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞<br />
<code>echo $hosts | jq -r '.nodes | to_entries[] | select(.value.location[0] == "ru") | .key'</code> –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é (select), —á—Ç–æ –±—ã –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã<br />
<code>echo $hosts | jq '.nodes | to_entries[] | select(.value.location[0] != "ru") | .key'</code> –≤—ã–≤–µ—Å—Ç–∏ –æ–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ä–∞–≤–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—é<br />
<code>echo $hosts | jq '.nodes | length'</code> –≤—ã–≤–µ—Å—Ç–∏ –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤<br />
<code>echo $hosts | jq '.nodes | to_entries | map(select(.value.location[0] != "ru")) | length'</code> —Å–æ–∑–¥–∞—Ç—å –º–∞—Å—Å–∏–≤ —Ñ—É–Ω–∫—Ü–∏–µ–π map() (–æ–±—ä–µ–¥–µ–Ω—è–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã {}{} –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –≤ –æ–¥–∏–Ω –º–∞—Å—Å–∏–≤ [{},{}]) —Ç–æ–ª—å–∫–æ –∏–∑ —Ç–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —É—Å–ª–æ–≤–∏—é select() –∏ –≤—ã–≤–µ—Å—Ç–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤<br />
<code>echo $hosts | jq -r '.nodes | to_entries[] | select(.value.location[0] == "ru" or .value.location[0] == "tr") | .key'</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–≤–∞ —É—Å–ª–æ–≤–∏—è —á–µ—Ä–µ–∑ or –∏–ª–∏ and (–¥–ª—è –ø—Ä–æ–≤–µ—Ä—è–µ–º–æ–≥–æ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö int –∫–∞–≤—ã—á–∫–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)<br />
<code>echo $hosts | jq -r '.nodes | to_entries[] | select(.key | index("jp")) | .key'</code> –≤—ã–≤–µ—Å—Ç–∏ —Å–ø–∏—Å–æ–∫ —Ö–æ—Å—Ç–æ–≤ —Ä–µ–≥–∏–æ–Ω–∞ Japan, –∫–æ—Ç–æ—Ä—ã–µ –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –∫–ª—é—á–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ jp (—á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –≤ –∑–Ω–∞—á–µ–Ω–∏–∏)</p>
<pre><code class="language-bash">host=&quot;yandex.ru&quot;
protocol=&quot;ping&quot;
host=&quot;yandex.ru:443&quot;
protocol=&quot;tcp&quot; # udp/http/dns
# –ó–∞–±—Ä–∞—Ç—å id –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
check_id=$(curl -s -H &quot;Accept: application/json&quot; &quot;https://check-host.net/check-$protocol?host=$host&amp;max_nodes=3&quot; | jq -r .request_id)
# –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ id
function check-result {
    curl -s -H &quot;Accept: application/json&quot; https://check-host.net/check-result/$1 | jq .
}
# –ü–æ–ª—É—á–∏—Ç—å —Å—É–º–º–∞—Ä–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ö–æ—Å—Ç–æ–≤, —Å –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞
hosts_length=$(check-result $check_id | jq length)
while true; do
    check_result=$(check-result $check_id)
    # –ó–∞–±–∏—Ä–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –ø—Ä–æ–≤–µ—Ä–µ–º, —á—Ç–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –Ω–µ —Ä–∞–≤–Ω—ã null
    check_values_not_null=$(echo $check_result | jq -e 'to_entries | map(select(.value != null)) | length')
    if [[ $check_values_not_null == $hosts_length ]]; then
        echo $check_result | jq
        break
    fi
    sleep 1
done
</code></pre>
<p><code>echo '{"iso": [{"name": "Ubuntu", "size": 4253212899}, {"name": "Debian", "size": 3221225472}]}' | jq '.iso[] | {name: .name, size: (.size / 1024 / 1024 / 1024 | tonumber * 100 | floor / 100 | tostring + " GB")}'</code> –ø–æ–ª—É—á–∏—Ç—å –ì–ë –∏–∑ –±–∞–π—Ç –∏ –æ–∫—Ä—É–≥–ª–∏—Ç—å –≤—ã–≤–æ–¥ –¥–æ 2 —Å–∏–º–≤–æ–ª–æ–º –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π<br />
<code>echo '{"iso": [{"name": "Ubuntu", "progress": 0.333}]}' | jq '.iso[] | {name: .name, progress: (.progress * 100 | floor / 100 * 100 | tostring + " %")}'</code> –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ü–µ–Ω—Ç –∏–∑ –¥—Ä–æ–±–Ω–æ–π —á–∞—Å—Ç–∏ (33%)<br />
<code>echo '[{"name": "Ubuntu", "added_on": 1625072400}, {"name": "Debian", "added_on": 1625158800}]' | jq '.[] | {name: .name, date: (.added_on + 3 * 3600 | strftime("%H:%M:%S %d.%m.%Y"))}'</code> –ø–æ–ª—É—á–∏—Ç—å –¥–∞—Ç—É</p>
<h3 id="netcheck">netcheck</h3>
<pre><code class="language-bash">sudo curl -s https://raw.githubusercontent.com/Lifailon/Check-Host/rsa/netcheck/netcheck.sh -o /usr/bin/netcheck
sudo chmod +x /usr/bin/netcheck
</code></pre>
<p><code>netcheck -t ping yandex.ru</code><br />
<code>netcheck -n</code><br />
<code>netcheck -t ping yandex.ru ru1.node.check-host.net</code><br />
<code>netcheck -t dns yandex.ru</code><br />
<code>netcheck -t http yandex.ru:443 5</code><br />
<code>netcheck -t tcp yandex.ru:443</code></p>
<h3 id="brew">brew</h3>
<p><code>/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤ brew (https://github.com/Homebrew/brew) –¥–ª—è macOS/Linux<br />
<code>echo 'eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"' &gt;&gt; ~/.profile</code><br />
<code>eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"</code><br />
<code>brew --version</code></p>
<h3 id="fx">fx</h3>
<p><code>brew install fx || snap install fx</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å fx (https://github.com/antonmedv/fx) TUI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è JSON –Ω–∞ GoLang<br />
<code>hosts=$(curl -s -H "Accept: application/json" https://check-host.net/nodes/hosts)</code><br />
<code>echo $hosts | fx</code> –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Å —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ–º –±–ª–æ–∫–æ–≤ –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è jq<br />
<code>source &lt;(fx --comp bash)</code> –¥–æ–±–∞–≤–∏—Ç—å autocomplete –≤ –∏–Ω—Ç–µ—Ä–ø—Ä–∏—Ç–∞—Ç–æ—Ä bash<br />
<code>echo $hosts &gt; hosts.json</code><br />
<code>fx hosts.json .nodes .\[\"ru1.node.check-host.net\"\] .ip</code> –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–≤–æ–¥ –∫–ª—é—á–µ–π –∏ –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞</p>
<h3 id="jid">jid</h3>
<p><code>brew install jid</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å jid (https://github.com/simeji/jid) –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ JSON –¥–∞–Ω–Ω—ã—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞–≤—Ç–æ–∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –Ω–∞ GoLang<br />
<code>echo '{"info":{"date":"2016-10-23","version":1.0},"users":[{"name":"simeji","uri":"https://github.com/simeji","id":1},{"name":"simeji2","uri":"https://example.com/simeji","id":2},{"name":"simeji3","uri":"https://example.com/simeji3","id":3}],"userCount":3}}' | jid</code> .users[1].uri</p>
<h3 id="jqp">jqp</h3>
<p><code>brew install noahgorstein/tap/jqp</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å jqp (https://github.com/noahgorstein/jqp) TUI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è jq –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ GoLang<br />
<code>curl -s https://api.github.com/repos/Lifailon/PS-Commands/contents | jqp</code> —Å–ª–µ–≤–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª, —Å–ø—Ä–∞–≤–∞ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥<br />
<code>curl -s https://check-host.net/nodes/hosts | jqp</code> # –ø—Ä–∏–º–µ—Ä –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏: <code>.nodes | to_entries[] | select(.value.location[0] == "ru") | .key</code></p>
<h3 id="xmllint">xmllint</h3>
<p><code>apt-get install libxml2-utils || snap install libxml2 || brew install libxml2</code><br />
<code>curl -s https://kinozal.tv/rss.xml -x kinozal:proxy@192.168.3.100:9090 | xmllint --xpath '//rss/channel/item/link/text()' -</code><br />
<code>curl -s https://kinozal.tv/rss.xml -x kinozal:proxy@192.168.3.100:9090 | xmllint --xpath '//rss/channel/item[1]/link/text()' -</code></p>
<h3 id="dasel">dasel</h3>
<p><code>brew install dasel</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å dasel (https://github.com/TomWright/dasel) –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ JSON, YAML, TOML, XML –∏ CSV (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É —Ñ–æ—Ä–º–∞—Ç–∞–º–∏) –Ω–∞ GoLang<br />
<code>echo '{"name": "Tom"}' | dasel -r json 'name'</code><br />
<code>echo '{"name": "Tom"}' | dasel -r json -w yaml</code> –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å json –≤ yaml<br />
<code>echo '{"name": "Tom"}' | dasel -r json -w xml</code> –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å json –≤ xml<br />
<code>echo '{"name": "Tom"}' | dasel put -r json -t string -v 'contact@tomwright.me' 'email'</code> –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ<br />
<code>echo '{"email": "contact@tomwright.me","name": "Tom"}' | dasel delete -r json '.email'</code> —É–¥–∞–ª–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ</p>
<pre><code class="language-json">tee users.json &lt;&lt;EOF
{
    &quot;users&quot;: [
      {
        &quot;name&quot;: &quot;–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤&quot;,
        &quot;email&quot;: &quot;ivan.ivanov@example.com&quot;
      },
      {
        &quot;name&quot;: &quot;–ú–∞—Ä–∏—è –ü–µ—Ç—Ä–æ–≤–∞&quot;,
        &quot;email&quot;: &quot;maria.petrova@example.com&quot;
      }
    ]
}
EOF
</code></pre>
<p><code>dasel -f users.json -r json ".users.[0].email"</code></p>
<pre><code class="language-yaml">tee users.yaml &lt;&lt;EOF
users:
  - name: –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤
    email: ivan.ivanov@example.com
  - name: –ú–∞—Ä–∏—è –ü–µ—Ç—Ä–æ–≤–∞
    email: maria.petrova@example.com
EOF
</code></pre>
<p><code>dasel -f users.yaml -r yaml ".users.[1].email"</code></p>
<pre><code class="language-tomp">tee users.toml &lt;&lt;EOF
[[users]]
name = &quot;–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤&quot;
email = &quot;ivan.ivanov@example.com&quot;
[[users]]
name = &quot;–ú–∞—Ä–∏—è –ü–µ—Ç—Ä–æ–≤–∞&quot;
email = &quot;maria.petrova@example.com&quot;
EOF
</code></pre>
<p><code>dasel -f users.toml -r toml ".users.[1].email"</code></p>
<pre><code class="language-xml">tee users.xml &lt;&lt;EOF
&lt;users&gt;
  &lt;user&gt;
    &lt;name&gt;–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤&lt;/name&gt;
    &lt;email&gt;ivan.ivanov@example.com&lt;/email&gt;
  &lt;/user&gt;
  &lt;user&gt;
    &lt;name&gt;–ú–∞—Ä–∏—è –ü–µ—Ç—Ä–æ–≤–∞&lt;/name&gt;
    &lt;email&gt;maria.petrova@example.com&lt;/email&gt;
  &lt;/user&gt;
&lt;/users&gt;
EOF
</code></pre>
<p><code>dasel -f users.xml -r xml ".users.user.[0].email"</code></p>
<h3 id="xq">xq</h3>
<p><code>apt-get install xq || brew install xq</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å xq (https://github.com/sibprogrammer/xq) –¥–ª—è XML –∏ HTML –Ω–∞ GoLang<br />
<code>curl -s https://kinozal.tv/rss.xml -x kinozal:proxy@192.168.3.100:9090 | xq -nx /rss/channel/item</code> –≤—ã–≤–æ–¥ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å —Ç–µ–≥–∞–º–∏<br />
<code>curl -s https://kinozal.tv/rss.xml -x kinozal:proxy@192.168.3.100:9090 | xq -x /rss/channel/item/link</code> –≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (–º–∞—Å—Å–∏–≤ —Å—Å—ã–ª–æ–∫)<br />
<code>curl -s https://kinozal.tv -x kinozal:proxy@192.168.3.100:9090 | xq -nq "head"</code> –≤—ã–≤–µ—Å—Ç–∏ –±–ª–æ–∫ head —Ü–µ–ª–∏–∫–æ–º (—Å —Ç–µ–≥–∞–º–∏)<br />
<code>curl -s https://kinozal.tv -x kinozal:proxy@192.168.3.100:9090 | xq -q "head"</code> –≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç –∏–∑ –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–µ–≥–∞ (—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ title)<br />
<code>curl -s https://kinozal.tv/browse.php?s=the+rookie -x kinozal:proxy@192.168.3.100:9090 | xq -nq "body &gt; div &gt; div &gt; div &gt; div &gt; table &gt; tbody &gt; tr &gt; td"</code><br />
<code>curl -s -X POST -u "Login:Password" "http://localhost:9091/transmission/rpc" | xq -q a -a href</code> –∑–∞–±—Ä–∞—Ç—å X-Transmission-Session-Id –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API (–æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Ç—ç–≥—É a –∏ –∞—Ç—Ä–∏–±—É—Ç—É href)</p>
<h3 id="htmlq">htmlq</h3>
<p><code>brew install htmlq</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å htmlq (https://github.com/mgdm/htmlq) like jq for HTML<br />
<code>curl -s https://kinozal.tv/browse.php?s=the+rookie -x kinozal:proxy@192.168.3.100:9090 | htmlq table tr td a -t</code> –ø–æ–ª—É—á–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–∞–±–ª–∏—Ü—ã (–≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ)<br />
<code>curl -s https://kinozal.tv/browse.php?s=the+rookie -x kinozal:proxy@192.168.3.100:9090 | htmlq table tr td a -a href</code> –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å—Å—ã–ª–∫–∏<br />
<code>curl -s -X POST -u "Login:Password" "http://localhost:9091/transmission/rpc" | htmlq a -a href</code> –∑–∞–±—Ä–∞—Ç—å X-Transmission-Session-Id –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API (–æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Ç—ç–≥—É a –∏ –∞—Ç—Ä–∏–±—É—Ç—É href)</p>
<h3 id="yq">yq</h3>
<p><code>snap install yq || pip install yq</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å yq (https://github.com/kislyuk/yq) –¥–ª—è YAML/XML/TOML –Ω–∞ Python<br />
<code>cat /etc/netplan/*.yaml | yq .network.ethernets</code> —Å–ø–∏—Å–æ–∫ –∞–¥–∞–ø—Ç–µ—Ä–æ–≤ netplan<br />
<code>cat /etc/netplan/*.yaml | yq .network.ethernets.eth0.nameservers.addresses[]</code> –≤—ã–≤–µ—Å—Ç–∏ –º–∞—Å—Å–∏–≤ dns –∞–¥—Ä–µ—Å–æ–≤, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –Ω–∞ –∞–¥–∞–ø—Ç–µ—Ä–µ<br />
<code>curl -s https://kinozal.tv/rss.xml -x kinozal:proxy@192.168.3.100:9090 | yq -p xml .rss.channel.item[1].link</code> –≤—ã–≤–µ—Å—Ç–∏ —Å—Å—ã–ª–∫—É –∏–∑ –ø–µ—Ä–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞<br />
<code>curl -s https://raw.githubusercontent.com/JingWangTW/dark-theme-editor/main/hugo.toml | yq -p toml .params.footer.socialLink</code> –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Hugo</p>
<h3 id="yamllint">yamllint</h3>
<p><code>apt install yamllint</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å yamllint (https://github.com/adrienverge/yamllint) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∏ YAML-—Ñ–∞–π–ª–∞<br />
<code>yamllint /etc/netplan/*.yaml</code></p>
<h3 id="jsonlint">jsonlint</h3>
<p><code>apt-get install -y nodejs</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Node.js<br />
<code>npm install jsonlint -g</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å jsonlint (https://github.com/zaach/jsonlint) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ JSON<br />
<code>echo '{"name":"example","value":"test",}' | jsonlint</code><br />
<code>echo '{"name":"example","value":"test"}' | jsonlint</code></p>
<h3 id="csv">csv</h3>
<p><code>brew install csvlens</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å csvlens (https://github.com/YS-L/csvlens) –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ—Å—Ç–∏—è –≤ csv —á–µ—Ä–µ–∑ TUR –Ω–∞ Rust<br />
<code>pwsh -Command "Get-Process | ConvertTo-Csv | Out-File process.csv"</code><br />
<code>csvlens process.csv</code></p>
<h3 id="sttr">sttr</h3>
<p><code>snap install sttr</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å sttr (https://github.com/abhimanyu003/sttr) –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∏ —Ä–∞–±–æ—Ç—ã –¥–∞–Ω–Ω—ã–º–∏ –Ω–∞ GoLang<br />
<code>curl -s curl -s -H "Accept: application/json" https://check-host.net/nodes/hosts | sttr json-yaml</code> –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å JSON –≤ YAML<br />
<code>cat /etc/netplan/*.yaml | sttr yaml-json | jq</code> –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å YAML –≤ JSON<br />
<code>curl -s https://raw.githubusercontent.com/Lifailon/hwstat/rsa/README.md | sttr markdown-html</code> –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å Markdown –≤ HTML<br />
<code>echo "test" | sttr hex-encode</code> –∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –≤ HEX —Ñ–æ—Ä–º–∞—Ç<br />
<code>echo "74657374" | sttr hex-decode</code> –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å HEX<br />
<code>echo "Test" | sttr upper</code> –ø–æ–¥–Ω—è—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä (TEST)<br />
<code>echo "Test" | sttr lower</code> –æ–ø—É—Å—Ç–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä (test)<br />
<code>echo -e "test1\ntest1\ntest2" | sttr unique-lines</code> –ø–æ–ª—É—á–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏<br />
<code>echo -e "a\nz\nb" | sttr sort-lines</code> —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É<br />
<code>echo -e "test1 \ntest2" | sttr remove-newlines</code> —É–¥–∞–ª–∏—Ç—å –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏<br />
<code>echo -e "test1\ntest2" | sttr count-chars</code> –ø–æ—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤<br />
<code>echo -e "test1\ntest2" | sttr count-lines</code> –ø–æ—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫</p>
<h2 id="grep">grep</h2>
<p><code>cat /var/log/auth.log | grep sshd</code> –ª–æ–≥–∏ –≤—Å–µ—Ö SSH-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π<br />
<code>cat /etc/passwd | grep -w sys</code> –ø–æ–∏—Å–∫ —Ü–µ–ª–æ–≥–æ —Å–ª–æ–≤–∞, –æ–∫—Ä—É–∂–µ–Ω–Ω–æ–µ –ø—Ä–æ–±–µ–ª–∞–º–∏ (-w)<br />
<code>cat /etc/ssh/sshd_config | grep -win port</code> –Ω–µ —É—á–∏—Ç—ã–≤–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä (-i) –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –Ω–æ–º–µ—Ä–∞ —Å—Ç—Ä–æ–∫ (-n)<br />
<code>ss -n | grep -P ":22|:80|:443|:8080"</code> –∏—Å–∫–∞—Ç—å –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —à–∞–±–ª–æ–Ω–∞–º, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Regex (-E)<br />
<code>ss -n | grep -Pc ":22|:80"</code> –≤—ã–≤–µ—Å—Ç–∏ –∫–æ–ª-–≤–æ (--count) —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π<br />
<code>ss -n | grep "192.168.3...:"</code> –ø–æ–∏—Å–∫ –ª—é–±—ã—Ö –¥–≤—É—Ö —Å–∏–º–≤–æ–ª–æ–≤ (.)<br />
<code>ss -n | grep "192.168.3.*:"</code> –ø–æ–∏—Å–∫ –ª—é–±–æ–≥–æ –∫–æ–ª-–≤–∞ (<em>)<br />
<code>cat /etc/ssh/sshd_config | grep -v "#"</code> –≤—ã–≤–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è, –Ω–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –ø–æ–¥ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø–æ–∏—Å–∫–∞ (-v)<br />
<code>cat /etc/zabbix/zabbix_agentd.conf | grep -v "^#"</code> –æ—Ç—Å–µ–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏ (^)<br />
<code>cat /etc/zabbix/zabbix_agentd.conf | grep "=$"</code> –Ω–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ–Ω—á–∞—é—Ç—Å—è <code>$</code> –Ω–∞ —Å–∏–º–≤–æ–ª "=" (–ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)<br />
<code>cat /etc/zabbix/zabbix_agentd.conf | grep -Pv "^$|^#"</code> —É–¥–∞–ª–∏—Ç—å –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ <code>^$</code> –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (^#)<br />
<code>cat /etc/zabbix/zabbix_agentd.conf | grep -E "#+{5}"</code> —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ (-E), –≥–¥–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–∏–º–≤–æ–ª "#" –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è 5 –∏–ª–∏ –±–æ–ª–µ–µ —Ä–∞–∑<br />
<code>echo -e "Test\ntest\n123-45" | grep -E "[a-zA-Z\-]"</code> –∏—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç (–≥–¥–µ –µ—Å—Ç—å –±—É–∫–≤—ã –∏ —Ç–∏—Ä–µ)<br />
<code>echo 'test&lt;version&gt;1.2.3&lt;/version&gt;test' | grep -P -o "(?&lt;=&lt;version&gt;).*(?=&lt;/version&gt;)"</code> –Ω–∞–π—Ç–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (.</em>) –º–µ–∂–¥—É –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ –∏ –≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ –Ω–∞–π–¥–µ–Ω–Ω–æ–µ (-o)<br />
<code>echo "test&lt;version&gt;3.6.4&lt;/version&gt;test" | grep -Eo '[0-9.]+'</code> –Ω–∞–π—Ç–∏ –ª—é–±—É—é —Ü–∏—Ñ—Ä—É –∏ —Ç–æ—á–∫—É –Ω–∞ –∫–æ–Ω—Ü–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è –ª—é–±–æ–µ –∫–æ–ª-–≤–æ —Ä–∞–∑ –ø–æ–¥—Ä—è–¥<br />
<code>echo $(lshw -class bus) | grep -P -o "(?&lt;=Motherboard product: ).*(?=serial)"</code> —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ (-P)<br />
<code>zabbix_path=$(systemctl status zabbix-agent | grep -Po "(?&lt;=-c ).*(?=.conf)" | sed "s/$/.conf/")</code> –∑–∞–±—Ä–∞—Ç—å –ø—É—Ç—å –¥–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ Zabbix –∞–≥–µ–Ω—Ç–∞<br />
<code>cat $zabbix_path | grep -E "^Server=|^ServerActive="</code> –Ω–∞–π—Ç–∏ –∏–º—è —Å–µ—Ä–≤–µ—Ä–∞<br />
<code>cat $zabbix_path | grep -Po "(?&lt;=^Server=).+"</code> –≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ –∏–º—è —Å–µ—Ä–≤–µ—Ä–∞<br />
<code>resolvectl | grep "DNS Servers" -m 1</code> –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (-m int)<br />
<code>networkctl status | grep -A 3 "DNS:"</code> –Ω–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É –∏ –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å —Ç—Ä–∏ —Å—Ç—Ä–æ–∫–∏ –ø–æ—Å–ª–µ –Ω–µ–µ (-A)<br />
<code>networkctl status | grep -B 3 "DNS:"</code> –Ω–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É –∏ –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å —Ç—Ä–∏ —Å—Ç—Ä–æ–∫–∏ –¥–æ –Ω–µ–µ (-B)<br />
<code>networkctl status | grep -C 1 "DNS:"</code> –Ω–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É –∏ –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å –æ–¥–Ω—É —Å—Ç—Ä–æ–∫–∏ –¥–æ –Ω–µ–µ –∏ –æ–¥–Ω—É –ø–æ—Å–ª–µ (-C)<br />
<code>resolvectl | grep -Ex ".+DNS Servers:.+"</code> –≤—ã–≤–µ—Å—Ç–∏ —Å—Ç—Ä–æ–∫–∏ —Å —Ç–æ—á–Ω—ã–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (-x/like), —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Ü–µ–ª—ã–µ —Å—Ç—Ä–æ–∫–∏<br />
<code>if echo "GET" | grep -Eq "^GET"; then echo da; else echo net; fi</code> –ø–æ–¥–∞–≤–ª—è—Ç—å –≤—ã–≤–æ–¥ (-q) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Å–ª–æ–≤–∏—è<br />
<code>curl https://api.github.com/repos/PowerShell/PowerShell/releases/latest | grep -Eom 1 "https://.+.deb"</code> –∑–∞–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π –ø–æ–¥—Ö–æ–¥—è—â–∏–π –ø–æ–¥ –ø–æ–∏—Å–∫</p>
<h3 id="sig">sig</h3>
<p><code>brew install ynqa/tap/sigrs</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å sig (https://github.com/ynqa/sig) –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π grep –Ω–∞ Rust<br />
<code>curl -s https://raw.githubusercontent.com/Lifailon/hwstat/rsa/README.md &gt; README.md</code><br />
<code>cat README.md |&amp; sig -a</code></p>
<h2 id="sed">sed</h2>
<p><code>cat /etc/passwd | sed -n "1,5p"</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å –ø–µ—Ä–≤–æ–π –ø–æ –ø—è—Ç—É—é —Å—Ç—Ä–æ–∫—É (p)<br />
<code>cat /etc/passwd | sed "$ d"</code> —É–¥–∞–ª–∏—Ç—å (d) –ø–æ—Å–ª–µ–¥–Ω—é—é —Å—Ç—Ä–æ–∫—É<br />
<code>cat /etc/passwd | sed "1,3d"</code> —É–¥–∞–ª–∏—Ç—å c –ø–µ—Ä–≤–æ–π –ø–æ —Ç—Ä–µ—Ç—å—é —Å—Ç—Ä–æ–∫—É (2,3d)<br />
<code>echo "One 1" | sed "s/One/Two/; s/1/2/"</code> –∑–∞–º–µ–Ω–∏—Ç—å One –Ω–∞ Two –∏ 1 –Ω–∞ 2<br />
<code>cat /etc/zabbix/zabbix_agentd.conf | sed "s/127.0.0.1/192.168.3.102/" #  &gt; /etc/zabbix/zabbix_agentd.conf</code> –∑–∞–º–µ–Ω–∏—Ç—å (s) ip-–∞–¥—Ä–µ—Å<br />
<code>cat /etc/zabbix/zabbix_agentd.conf | sed "/^#\|^$/d"</code> —É–¥–∞–ª–∏—Ç—å –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ <code>^$</code> –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ <code>^#</code><br />
<code>timedatectl | grep zone | sed -E "s/.+zone: //"</code> —É–¥–∞–ª–∏—Ç—å –ª—é–±–æ–µ –∫–æ–ª-–≤–æ –ª–∏–º–≤–æ–ª–æ–≤ –¥–æ —Å–ª–æ–≤–∞ "zone: " –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É—è Regex (-E/-r)<br />
<code>echo -e "test\ntest" | sed "2s/test/test2/"</code> –∑–∞–º–µ–Ω–∏—Ç—å –≤–æ –≤—Ç–æ—Ä–æ–π —Å—Ç—Ä–æ–∫–µ (2s)<br />
<code>echo -e "test\ntest\ntest\ntest" | sed "2,3s/test/test2/"</code> –∑–∞–º–µ–Ω–∏—Ç—å –≤–æ –≤—Ç–æ—Ä–æ–π –∏ —Ç—Ä–µ—Ç–µ–π —Å—Ç—Ä–æ–∫–µ (2,3s)<br />
<code>echo -e "test\ntest\ntest\ntest" | sed "2ctest2"</code> –∑–∞–º–µ–Ω–∏—Ç—å –≤—Ç–æ—Ä—É—é —Å—Ç—Ä–æ–∫—É (2c)<br />
<code>echo "The test and test" | sed "s/test/test2/g"</code> –∑–∞–º–µ–Ω–∏—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è (/global)<br />
<code>echo "The test and test" | sed "s/test/test2/2"</code> –∑–∞–º–µ–Ω–∏—Ç—å –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è (/2)<br />
<code>echo "line2" | sed "i\line1"</code> –¥–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É –≤ –Ω–∞—á–∞–ª–æ (i)<br />
<code>echo "line1" | sed "a\line2"</code> –¥–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É –≤ –∫–æ–Ω–µ—Ü (a) –∏–ª–∏ –≤ –ø–æ—Å–ª–µ —É–∫–∞–∑–∞–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ (2a)<br />
<code>echo "11 22 33 34" | sed "y/123/234/"</code> –∑–∞–º–µ–Ω–∏—Ç—å 1 –Ω–∞ 2, 2 –Ω–∞ 3, 3 –Ω–∞ 4 (y)<br />
<code>ls -R | grep ':' | sed "s/:$//; s/[^\/]*\// - /g"</code> —É–¥–∞–ª–∏—Ç—å ":" –≤ –∫–æ–Ω—Ü–µ –∏ –∑–∞–º–µ–Ω–∏—Ç—å –≤–Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏ "/–ª—é–±–æ–µ –∫–æ–ª-–≤–æ —Å–∏–º–≤–æ–ª–æ–≤ –º–µ–∂–¥—É/" –Ω–∞ " - " –¥–ª—è –≤—Å–µ—Ö (/g global)<br />
<code>echo "test&lt;version&gt;3.6.4&lt;/version&gt;test" | sed -r 's/[^&lt;]*&lt;(.*)&gt;.*/\1/;s/&lt;.*//;s/.*&gt;//'</code> –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å regex (-r)<br />
<code>ps aux | grep -E "^zabbix .+ -c" | sed -E "s/^zabbix.+-c //"</code> –Ω–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å zabbix —Å –∫–ª—é—á–µ–º -c –∏ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Ç—å conf<br />
<code>echo "MPEG-H HEVC, 88.5 –ú–±–∏—Ç/—Å, 3840x2160, 23.976 –∫–∞–¥—Ä/—Å, 10 –±–∏—Ç" | sed -nr 's/.* ([0-9]+x[0-9]+).*/\1/p'</code> –≤—ã–≤–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (-n) —Å –∑–∞–º–µ–Ω–æ–π (s/), –∏—â–µ–º —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã [0-9] –≥–¥–µ –æ–¥–Ω–æ –∏–ª–∏ –±–æ–ª–µ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–π (+) –∏ –º–µ–∂–¥—É –Ω–∏–º–∏ "x", –≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—É—é –≥—Ä—É–ø–ø—É –ø–æ–∏—Å–∫–∞ (—Ç–æ, —á—Ç–æ –≤ —Å–∫–æ–±–∫–∞—Ö) –Ω–∞ –ø–µ—á–∞—Ç—å (/p)</p>
<h2 id="awk">awk</h2>
<p><code>cat /etc/passwd | awk -F: '{print "name: " $1 " \t Dir: " $NF}'</code> –≤—ã–≤–µ—Å—Ç–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–µ—Ä–≤–æ–≥–æ –∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ <code>$NF</code> —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ —Å—Ç—Ä–æ–∫–µ, –∏—Å–ø–æ–ª—å–∑—É—è —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å ":" –∏ —Ç–∞–±—É–ª—è—Ü–∏—é (\t)<br />
<code>echo 'one two three four' | awk '{print $(NF-1)}'</code> –≤—ã–≤–µ—Å—Ç–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–µ–ø–æ–¥—Å–ª–µ–¥–Ω–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞<br />
<code>echo 'one two three four five' | awk '{print $((NF/2)+1)}'</code> –≤—ã–≤–µ—Å—Ç–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–∑ —Å–µ—Ä–µ–¥–∏–Ω—ã<br />
<code>echo "One Two Three" | awk '{$3="Four"; print $0}'</code> –∑–∞–º–µ–Ω–∏—Ç—å —Ç—Ä–µ—Ç—å–µ –∑–Ω–∞—á–µ–Ω–∏–µ/–ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤ —Å—Ç—Ä–æ–∫–µ<br />
<code>cat /etc/passwd | awk 'BEGIN{FS=":"; OFS=" - "} {print $1,$7}'</code> —É–∫–∞–∑–∞—Ç—å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –ø–æ—Å–ª–µ–π (—ç–ª–µ–º–µ–Ω—Ç–æ–≤) –Ω–∞ –≤—Ö–æ–¥ (FS) –∏ –∑–∞–º–µ–Ω–∏—Ç—å –µ–≥–æ –Ω–∞ –≤—ã—Ö–æ–¥–µ (OFS)<br />
<code>uptime | awk 'BEGIN{RS=" "; ORS="\n"} {print $0}'</code> —É–∫–∞–∑–∞—Ç—å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –∑–∞–ø–∏—Å–µ–π (—Å—Ç—Ä–æ–∫) –Ω–∞ –≤—Ö–æ–¥–µ (RS) –∏ –∑–∞–º–µ–Ω–∏—Ç—å –µ–≥–æ –Ω–∞ –≤—ã—Ö–æ–¥–µ (ORS)<br />
<code>echo -e "12345\n54321" | awk 'BEGIN{FIELDWIDTHS="2 3"}{print $1,$2}'</code> —É–∫–∞–∑–∞—Ç—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫–æ–ª-–≤–æ —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è<br />
<code>lsof | awk '{if($7=="REG")print $0}'</code> —É—Å–ª–æ–≤–∏–µ –¥–ª—è –≤—ã–±–æ—Ä–∫–∏ –ø–æ —Å—Ç–æ–ª–±—Ü—É<br />
<code>cat /etc/ssh/sshd_config | awk '/Port / {print $2}'</code> —É—Å–ª–æ–≤–∏–µ –ø–æ–∏—Å–∫–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞<br />
<code>cat /etc/ssh/sshd_config | awk 'length $0 &gt; 1'</code> –≤—ã–≤–µ—Å—Ç–∏ —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥–ª–∏–Ω–Ω–µ–µ, —á–µ–º 1 —Å–∏–º–≤–æ–ª (—É–¥–∞–ª–∏—Ç—å –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏)<br />
<code>cat /var/log/syslog | grep "$date" | awk '{print length($6)}'</code> –≤—ã–≤–µ—Å—Ç–∏ –¥–ª–∏–Ω–Ω—É –∑–Ω–∞—á–µ–Ω–∏—è<br />
<code>awk 'BEGIN{x = "low"; print toupper(x)}'</code> –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –≤ –≤–≤–µ—Ä—Ö–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä<br />
<code>awk 'BEGIN{x = "LOW"; print tolower(x)}'</code> –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –≤ –Ω–∏–∂–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä<br />
<code>echo "1 2 3 4:5:6" | awk '{item=$4; split(item,array,":"); print array[2]}'</code> —Ä–∞–∑–±–∏—Ç—å 4 –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ –º–∞—Å—Å–∏–≤ (–∏—Å–ø–æ–ª—å–∑—É—è —Ñ—É–Ω–∫—Ü–∏—é split) –∏ –∑–∞–±—Ä–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ 2-–º—É –∏–Ω–¥–µ–∫—Å—É<br />
<code>free | awk '{if (NR == 2) print $0}'</code> –≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ –≤—Ç–æ—Ä—É—é —Å—Ç—Ä–æ–∫—É<br />
<code>free | awk '{if (NR &gt;= 2) print $0}'</code> –≤—ã–≤–µ—Å—Ç–∏ –≤—Ç—Ä–æ—É—é –∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏<br />
<code>free | awk '{if (NF &gt;= 5) print $0}'</code> –≤—ã–≤–µ—Å—Ç–∏ —Å—Ç—Ä–æ–∫–∏, –≥–¥–µ 5 –∏–ª–∏ –±–æ–ª—å—à–µ –∑–Ω–∞—á–µ–Ω–∏–π<br />
<code>cat /etc/passwd | awk '{ if (NR &gt;= 10 &amp;&amp; NR &lt;= 20) print $0}'</code> –≤—ã–≤–µ—Å—Ç–∏ —Å 10 –ø–æ 20 —Å—Ç—Ä–æ–∫–∏<br />
<code>last | sed -n 1p | awk '$2=" ",$4=" "{print $0}'</code> –≤—ã–≤–µ—Å—Ç–∏ –≤—Å–µ, –∫—Ä–æ–º–µ 2 –∏ 4 –∑–Ω–∞—á–µ–Ω–∏—è (–∑–∞–º–µ–Ω–∏—Ç—å)<br />
<code>ps -A | awk '{sum=""; for(i=1;i&lt;=NF;i++) { if (i != 2) {sum=sum" "$i} } print sum}'</code> –≤—ã–≤–µ—Å—Ç–∏ –≤—Å–µ, –∫—Ä–æ–º–µ 2-–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è</p>
<h2 id="printf">printf</h2>
<p><code>top=$(top -bn1)</code><br />
<code>printf "%s\n" "${top[@]}"</code> –≤—ã–≤–µ—Å—Ç–∏ –≤—ã–≤–æ–¥ –º–∞—Å—Å–∏–≤–∞ –ø–æ—Å—Ç—Ä–æ—á–Ω–æ<br />
<code>printf "%.2f \n" 1.1111</code> –æ–∫—Ä—É–≥–ª–∏—Ç—å –¥–æ 2 —Å–∏–º–≤–æ–ª–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π<br />
<code>printf "%.0f \n" 1.6</code> —É–¥–∞–ª–∏—Ç—å –¥—Ä–æ–±–Ω—É—é —á–∞—Å—Ç—å (–æ–∫—Ä—É–≥–ª–∏—Ç—å –¥–æ 2)<br />
<code>printf "Arg1: %s\nArg2: %s\n" "10" "20"</code> –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏ –≤—ã–≤–æ–¥–∏—Ç –∞—Ä–≥—É–º–µ–Ω—Ç—ã (%s) –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏</p>
<h2 id="cut">cut</h2>
<p><code>echo "1 2 3" | cut -c 1,5</code> –≤—ã–≤–µ—Å—Ç–∏ –ø–µ—Ä–≤—ã–π –∏ –ø—è—Ç—ã–π —Å–∏–º–æ–≤ (--bytes/--characters)<br />
<code>echo "1 2 3" | cut -c 1-3</code> –≤—ã–≤–µ—Å—Ç–∏ —Å –ø–µ—Ä–≤–æ–π –ø–æ —Ç—Ä–µ—Ç–∏–π —Å–∏–º–≤–æ–ª<br />
<code>echo "1 2 3" | cut -c3-</code> —É–¥–∞–ª–∏—Ç—å –ø–µ—Ä–≤—ã–µ 2 —Å–∏–º–≤–æ–ª–∞<br />
<code>echo -e "test1,test2,test3\ntest1,test2,test3" | cut -d , -f 2-100</code> —É–∫–∞–∑–∞—Ç—å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –ø–æ–ª–µ–π/—Å—Ç–æ–ª–±—Ü–æ–≤ (--delimiter) –∏ –∫–∞–∫–∏–µ —Å—Ç–æ–ª–±—Ü—ã –≤—ã–≤–µ—Å—Ç–∏ (--fields) —Å 2 –ø–æ 100<br />
<code>echo -e "test1,test2,test3\ntest1,test2,test3" | cut -d , -f 1,3 | sed "s/,/ /"</code> –≤—ã–≤–µ—Å—Ç–∏ 1 –∏ 3<br />
<code>echo -e "test1,test2,test3\ntest1 test2 test3" | cut -d , -f 1,3 -s</code> –ø–µ—á–∞—Ç–∞—Ç—å —Å—Ç—Ä–æ–∫–∏, –≥–¥–µ –µ—Å—Ç—å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å (-s)</p>
<h3 id="rev">rev</h3>
<p><code>echo "D:\plex-content\Rick.and.Morty.S07.2023.WEBDLRip.MegaPeer" | rev | cut -d \\ -f 1 | rev</code> –∑–∞–±—Ä–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç –≤ –ø—É—Ç–∏ (–≤–Ω–∞—á–∞–ª–µ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –≤—Å—é —Å—Ç—Ä–æ–∫—É, –∑–∞–±–∏—Ä–∞–µ—Ç –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –∏ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –æ–±—Ä–∞—Ç–Ω–æ)<br />
<code>echo "D:\plex-content\Rick.and.Morty.S07.2023.WEBDLRip.MegaPeer" | sed -r 's/.+\\//'</code> —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–ª–µ—à–∞<br />
<code>echo "D:\plex-content\Rick.and.Morty.S07.2023.WEBDLRip.MegaPeer" | sed 's/.*\\\(.*\)/\1/'</code> —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–ª–µ—à–∞ –∏ –∑–∞–±–∏—Ä–∞–µ—Ç –æ–¥–Ω—É –≥—Ä—É–ø–ø—É –∑–∞—Ö–≤–∞—Ç–∞, —á—Ç–æ –æ—Å—Ç–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è, –∏ –∑–∞–º–µ–Ω—è–µ—Ç –≤—ã–≤–æ–¥ –Ω–∞ –ø–µ—Ä–≤—É—é –≥—Ä—É–ø–ø—É (1)<br />
<code>echo "D:\plex-content\Rick.and.Morty.S07.2023.WEBDLRip.MegaPeer" | awk -F '\\' '{print $NF}'</code> –∑–∞–±—Ä–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞ (NF)</p>
<h2 id="tr">tr</h2>
<p><code>echo "10 20 100 200" | tr 1 2</code> translate –∑–∞–º–µ–Ω—è–µ—Ç 1 –Ω–∞ 2 –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Å–æ–º–≤–æ–ª–æ–≤ (20 20 200 200)<br />
<code>echo "1 2 3" | tr " " ","</code> –∑–∞–º–µ–Ω–∏—Ç—å –ø—Ä–æ–±–µ–ª—ã –Ω–∞ –∑–∞–ø—è—Ç—ã–µ (1,2,3)<br />
<code>echo "1 2 3" | tr -d " "</code> —É–¥–∞–ª–∏—Ç—å –ø—Ä–æ–±–µ–ª—ã (123)</p>
<h2 id="man">man</h2>
<h3 id="cheatsh">cheat.sh</h3>
<p><code>curl cheat.sh/curl</code><br />
<code>curl cheat.sh/grep</code><br />
<code>curl cheat.sh/sed</code><br />
<code>curl cheat.sh/awk</code><br />
<code>curl cheat.sh/jq</code><br />
<code>curl cheat.sh/iptables</code><br />
<code>curl cheat.sh/find</code></p>
<h3 id="tldr">tldr</h3>
<p><code>pip3 install tldr</code> —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç man —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è<br />
<code>tldr curl</code> –≤–µ–±-–≤–µ—Ä—Å–∏—è: https://manned.org/man/curl</p>
<h2 id="debug">debug</h2>
<p><code>trap 'echo "$BASH_COMMAND"' DEBUG</code> –ø–æ—Å—Ç—Ä–æ—á–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤ bash, –∫–æ–º–∞–Ω–¥–∞ trap –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Å–∏–≥–Ω–∞–ª DEBUG, –ø–æ—Å—ã–ª–∞–µ–º—ã–π –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–æ–º–∞–Ω–¥—ã –∏ –≤—ã–≤–æ–¥–∏—Ç –∫–æ–º–∞–Ω–¥—É –Ω–∞ —ç–∫—Ä–∞–Ω<br />
<code>trap 'echo "$BASH_COMMAND";read' DEBUG</code> read –æ–∂–∏–¥–∞–µ—Ç –≤–≤–æ–¥–∞ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (Enter –∏–ª–∏ Ctrl+C) –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥–æ–π<br />
<code>bash -x script.sh</code> –æ—Ç–ª–∞–¥–∫–∞ (–ø–µ—á–∞—Ç—å –∫–æ–º–∞–Ω–¥ –∏ –∏—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –ø–æ –º–µ—Ä–µ –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)<br />
<code>bash -x -c "ls -l" | grep *.sh | awk '{print $5,$NF}'</code> –∑–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–ø—Ä–∏—Ç–∞—Ç–æ—Ä bash –∏ –≤—ã–≤–æ–¥ –æ—Ç–ª–∞–¥–∫–∏<br />
<code>bash --debug script.sh</code> –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—à–∏–±–∫–∏<br />
<code>apt-get install shellcheck</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å shellcheck<br />
<code>shellcheck -S error hwstat.sh</code> error/warning/info/style<br />
<code>pip3 install thefuck</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å thefuck<br />
<code>bas hwstat.sh</code> –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—É —Å –æ—à–∏–±–∫–æ–π<br />
<code>fuck</code> –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –æ—à–∏–±–æ—á–Ω—É—é –∫–æ–º–∞–Ω–¥—É –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞ (up/down)</p>
<h2 id="tools">tools</h2>
<p><code>apt install fzf</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å fzf<br />
<code>history | fzf</code> –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π<br />
<code>eval $(history | fzf | awk '{print $2}')</code> –≤—ã–ø–æ–ª–Ω–∏—Ç—å (eval) –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É –∏–∑ —Å–ø–∏—Å–∫–∞ (–¥–æ–±–∞–≤–∏—Ç—å –≤ –º–∞–∫—Ä–æ—Å)<br />
<code>ls *.json | fzf | xargs cat | jq .</code> –≤—ã–≤–µ—Å—Ç–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ json —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ fzf<br />
<code>find / -name "*.yaml" | fzf | xargs cat</code> –Ω–∞–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º–µ –≤—Å–µ —Ñ–∞–π–ª—ã yaml –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ –Ω–∏–º –ø–æ–∏—Å–∫</p>
<p><code>pip install toolong</code><br />
<code>tl /var/log/auth.log</code> –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π<br />
<code>tl access.log* --merge</code> –ø—Ä–æ—Å–º–æ—Ç—Ä –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤</p>
<p><code>tree /var/log/</code> –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –∏ –¥–æ—á–µ—Ä–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤</p>
<p><code>echo 'deb http://cz.archive.ubuntu.com/ubuntu jammy main universe' &gt;&gt; /etc/apt/sources.list &amp;&amp; apt update</code><br />
<code>apt install exa</code><br />
<code>exa $(pwd) -l --icons</code> –∞–Ω–∞–ª–æ–≥ ls</p>
<p><code>column /etc/passwd -t -s ":"</code><br />
<code>netcheck -t ping yandex.ru us1.node.check-host.net | sed -r 's/"//g; s/,$//; s/\{|\}|\[|\]//' | column -t -s ":"</code> —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å JSON –∏ –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç—Å—Ç—É–ø (—Ç–∞–±—É–ª—è—Ü–∏—é) –¥–ª—è –∫–æ–ª–æ–Ω–æ–∫</p>
<p><code>ls /home | wc -l</code> word count –≤—ã–≤–æ–¥–∏—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ (--line)<br />
<code>ls /home | wc -w</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤ (--words)<br />
<code>ls /home | wc -m</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–º (--chars)<br />
<code>ls /home | wc -c</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤/–±–∞–π—Ç (--bytes)</p>
<p><code>echo "(5.5-2.2)" | bc</code> –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è<br />
<code>echo "(5.5-2.2)" | bc | sed -E "s/\..+//"</code> —É–¥–∞–ª–∏—Ç—å –¥—Ä–æ–±–Ω—É—é —á–∞—Å—Ç—å<br />
<code>echo "1 &lt; 2" | bc</code> –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (1 - –¥–∞ –∏–ª–∏ 0 - –Ω–µ—Ç)<br />
<code>echo "1 &gt; 2" | bc</code> false (0)<br />
<code>icmp_ignore=$(cat /proc/sys/net/ipv4/icmp_echo_ignore_all)</code> –∑–∞–±—Ä–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ<br />
<code>if (( $(echo "$icmp_ignore == 1" | bc) )); then echo "true"; else echo "false"; fi</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ —É—Å–ª–æ–≤–∏–∏ –∞—Ä–µ—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0 - false –∏–ª–∏ 1 - true)</p>
<p><code>a=1</code><br />
<code>b=0.55</code><br />
<code>echo $(bc &lt;&lt;&lt; "scale=2; $a+$b")</code><br />
<code>echo "print $a+$b" | perl</code><br />
<code>echo "print($a+$b)" | python3</code><br />
<code>echo "print($a+$b)" | lua</code><br />
<code>echo "puts $a+$b" | ruby</code><br />
<code>pwsh -Command $a+$b</code></p>
<p><code>echo -e "key1\nkey2\nkey3" &gt; 1.txt</code><br />
<code>echo -e "value1\nvalue2\nvalue3" &gt; 2.txt</code><br />
<code>paste 1.txt 2.txt -d :</code> –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–≤–∞ —Ñ–∞–π–ª–∞ –≤ –æ–¥–∏–Ω –º–Ω–æ–≥–æ–∫–æ–ª–æ–Ω–æ—á–Ω—ã–π –≤—ã–≤–æ–¥<br />
<code>cat /etc/passwd | paste -s -d +</code> –æ–±—ä–µ–¥–µ–Ω–∏—Ç—å (join) –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–π —Ñ–∞–π–ª, –∏—Å–ø–æ–ª—å–∑—É—è —É–∫–∞–∑–∞–Ω–Ω—ã–π delimiter</p>
<p><code>echo -e "test1\ntest2" &gt; 1.txt</code>echo -e "test\ntest2\ntest3" &gt; 2.txt<br />
<code>diff 1.txt 2.txt -c</code> ! –µ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è, + –µ—Å—Ç—å –Ω–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞<br />
<code>diff 1.txt 2.txt -yi</code> —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –≤ –¥–≤–µ –∫–æ–ª–æ–Ω–∫–∏ (| –µ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è, + –µ—Å—Ç—å –Ω–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞) –∏ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä (-i)<br />
<code>diff 1.txt 2.txt -u</code> –æ–±—ä–µ–¥–µ–Ω—è–µ—Ç –¥–≤–∞ —Ñ–∞–π–ª–∞ –≤ –æ–¥–∏–Ω –≤—ã–≤–æ–¥ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π (+/)<br />
<code>diff 1.txt 2.txt -ibBEt</code> –Ω–µ —É—á–∏—Ç—ã–≤–∞—Ç—å –ø—Ä–æ–±–µ–ª—ã (-b) –∏ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ (-B), –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ç–∞–±—É–ª—è—Ü–∏—è—Ö (-E) –∏ –∑–∞–º–µ–Ω–∏—Ç—å —Ç–∞–±—É–ª—è—Ü–∏–∏ –Ω–∞ –ø—Ä–æ–±–µ–ª—ã –≤ –≤—ã–≤–æ–¥–µ (-t)<br />
<code>diff -c &lt;(echo "$predu") &lt;(echo "$du")</code> —Å—Ä–∞–≤–Ω–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö</p>
<p><code>snap install diff-so-fancy</code><br />
<code>diff -u file-1.txt file-2.txt | diff-so-fancy</code></p>
<p><code>apt install jdupes</code><br />
<code>jdupes .</code> –ø–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤</p>
<p><code>cat /etc/passwd | sort -r</code> –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—ã–≤–æ–¥ –ø–æ –∞–ª—Ñ–æ–≤–∏—Ç—É –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ (-r)<br />
<code>du -h ~ | sort -n</code> —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é (-n) —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π<br />
<code>ls -l | sed 1d | sort -nk5</code> —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø—è—Ç–æ–π –∫–æ–ª–æ–Ω–∫–µ (-k)<br />
<code>cat $tmp | sort -t "." -nk4</code> —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —á–µ—Ç–≤–µ—Ä—Ç–æ–π –∫–æ–ª–æ–Ω–∫–µ, –∏—Å–ø–æ–ª—å–∑—É—è —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å (-t) —Ç–æ—á–∫—É</p>
<p><code>echo -e "1 2\n1 2\n2 1\n1 2" | uniq</code> —É–¥–∞–ª—è–µ—Ç —Å–æ—Å–µ–¥–Ω–∏–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏<br />
<code>echo -e "1 2\n1 2\n2 1\n1 2" | sort | uniq</code> —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥—É–±–ª–∏–∫–∞—Ç—ã<br />
<code>echo -e "1 2\n1 2\n2 1\n1 2" | sort | uniq -c</code> –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ –Ω–∞—á–∞–ª–æ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ –∫–æ–ª-–≤–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π<br />
<code>echo -e "1 2\n1 2\n2 1\n1 2" | sort | uniq -u</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–æ–ª—å–∫–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏, –±–µ–∑ —Å—Ç—Ä–æ–∫ —Å –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è–º–∏</p>
<p><code>ls -l | fold -w 50</code> –∑–∞–¥–∞—Ç—å —à–∏—Ä–∏–Ω—É –≤—ã–≤–æ–¥–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏, –≤—ã–ø–∞–¥–∞—é—â–µ–µ –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø—Ä–µ–¥–µ–ª –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É<br />
<code>ls -l | fold -w 50 -s</code> —Ä–∞–∑–±–∏–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–∏–º–≤–æ–ª–∞—Ö –ø—Ä–æ–±–µ–ª–∞ (--space)</p>
<p><code>cat /var/log/syslog | head -n 5</code> –≤—ã–≤–æ–¥–∏—Ç –ø–µ—Ä–≤—ã–µ 5 —Å—Ç—Ä–æ–∫ —Ñ–∞–π–ª–∞</p>
<p><code>cat /var/log/syslog | tail -n 5</code> –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 5 —Å—Ç—Ä–æ–∫ —Ñ–∞–π–ª–∞<br />
<code>tail -f /var/log/syslog</code> –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</p>
<p><code>apt install multitail</code><br />
<code>multitail -f /var/log/auth.log -f /var/log/kern.log</code><br />
<code>multitail -l "journalctl -fu ssh" -l "journalctl -fu cron"</code></p>
<p><code>less /var/log/dmesg</code> –≤—ã–≤–µ—Å—Ç–∏ –ª–æ–≥ —è–¥—Ä–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–æ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏—è</p>
<p><code>watch df -h</code> –≤—ã–≤–æ–¥–∏—Ç –Ω–∞ —ç–∫—Ä–∞–Ω –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã</p>
<p><code>echo "line1" | tee test.txt</code> –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å —Ñ–∞–π–ª (&gt;)<br />
<code>ls &gt; /dev/null</code> –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –≤—ã–≤–æ–¥ –≤ null<br />
<code>echo "line2" | tee -a test.txt</code> –¥–æ–±–∞–≤–∏—Ç—å (&gt;&gt;) —Ç–µ–∫—Å—Ç –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–π–æ–∫–π –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞<br />
<code>echo -e "line3\nline4" &gt;&gt; test.txt</code> –¥–æ–±–∞–≤–∏—Ç—å –¥–≤–µ –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏</p>
<p><code>du -a /var/log | awk '{print $2}' | xargs fincore</code> –ø–µ—Ä–µ–¥–∞—Ç—å –≤—ã–≤–æ–¥ –ø–µ—Ä–≤–æ–π –∫–æ–º–∞–Ω–¥—ã –ø–æ—Å—Ç—Ä–æ—á–Ω–æ –≤ –∞—Ä–≥—É–º–µ–Ω—Ç—ã —Å–ª–µ–¥—É—é—â–µ–π</p>
<p><code>split -l 100 input_file.txt output_prefix</code> —Ä–∞–∑–¥–µ–ª–∏—Ç—å —Ñ–∞–π–ª –Ω–∞ —á–∞—Å—Ç–∏ –ø–æ 100 —Å—Ç—Ä–æ–∫ –≤ –∫–∞–∂–¥–æ–π<br />
<code>split -b 10M input_file.txt output_prefix</code> —Ä–∞–∑–¥–µ–ª–∏—Ç—å —Ñ–∞–π–ª –Ω–∞ —á–∞—Å—Ç–∏ –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É —Ä–∞–∑–º–µ—Ä—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, 10MB)</p>
<h2 id="find">find</h2>
<p><code>find / -name "*.sql"</code> –Ω–∞–π—Ç–∏ —Ñ–∞–π–ª—ã, –Ω–∞—á–∞—Ç—å –ø–æ–∏—Å–∫ —Å –∫–æ—Ä–Ω—è (/)<br />
<code>find / -iname "mysql"</code> –Ω–∞–π—Ç–∏ —Ñ–∞–π–ª—ã –Ω–µ —É—á–∏—Ç—ã–≤–∞—è —Ä–µ–≥–∏—Å—Ç—Ä (-i)<br />
<code>find ~ -name "test.*" -not -name "*.conf"</code> –Ω–∞–π—Ç–∏ –≤—Å–µ —Ñ–∞–π–ª—ã —Å –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ test, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç –ª—é–±–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º (-not) —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è .conf<br />
<code>find ~ -amin -10</code> –ø–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ –ø–æ –¥–∞—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —á—Ç–µ–Ω–∏—è (-amin) –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–ª–∏—Å—å (cat/nano) –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –º–∏–Ω—É—Ç<br />
<code>find ~ -type f -mmin -10</code> –Ω–∞–π—Ç–∏ —Ñ–∞–π–ª—ã (-type f), –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –º–∏–Ω—É—Ç (-nmin)<br />
<code>find ~ -type f -mtime +1 -mtime -7</code> –Ω–∞–π—Ç–∏ –≤—Å–µ —Ñ–∞–π–ª—ã, –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É 1 –∏ 7 –¥–Ω—è–º–∏ –Ω–∞–∑–∞–¥<br />
<code>find ~ -type d -mtime +1 -mtime -7</code> –ø–æ–∏—Å–∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π<br />
<code>find ~ -size +50M -size -100M</code> –ø–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ –≤ Linux –ø–æ –∏—Ö —Ä–∞–∑–º–µ—Ä—É, –æ—Ç 50 –¥–æ 100 –º–µ–≥–∞–±–∞–π—Ç<br />
<code>find / -perm 444</code> –ø–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ –ø–æ —Ä–µ–∂–∏–º—É –¥–æ—Å—Ç—É–ø–∞ (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö)<br />
<code>find /home/lifailon/ -user root</code> –ø–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ –ø–æ –≤–ª–∞–¥–µ–ª—å—Ü—É<br />
<code>find /home/lifailon/ -group root</code> –ø–æ–∏—Å–∫ –ø–æ –≥—Ä—É–ø–ø–µ<br />
<code>find /root/ -empty</code> –ø–æ–∏—Å–∫ –ø—É—Å—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π</p>
<h3 id="exec">exec</h3>
<p><code>touch -t 202306222200.15 /tmp/test.txt</code> —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª —Å —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∞—Ç–æ–π —Å–æ–∑–¥–∞–Ω–∏—è<br />
<code>find /tmp -type f -mtime +30 -exec rm -f {} \;</code> —É–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—ã—Ä–µ –Ω–µ –∏–∑–º–µ–Ω—è–ª–∏—Å—å –±–æ–ª—å—à–µ 30 –¥–Ω–µ–π<br />
<code>find /tmp -type f -name "*.txt" -exec rm -f {} \;</code> —É–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ tmp<br />
<code>dd if=/dev/zero of=/var/log/test.log count=11 bs=1M</code> —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –Ω—É–ª—è–º–∏ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞<br />
<code>find /var/log -type f -name "*.log" -size +10M -exec rm -f {} \;</code> —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –ª–æ–≥-—Ñ–∞–π–ª—ã, –æ–±—ä—ë–º–æ–º –±–æ–ª—å—à–µ 10 –ú–±–∞–π—Ç</p>
<h3 id="locate">locate</h3>
<p><code>apt install plocate</code><br />
<code>updatedb</code> –æ–±–Ω–æ–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö<br />
<code>locate .torrent</code> –Ω–∞–π—Ç–∏ –ø–æ —á–∞—Å—Ç–∏—á–Ω–æ–º—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é –≤ –∏–º–µ–Ω–∏ –∏–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é<br />
<code>locate .torrent -c</code> –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤<br />
<code>locate -n 10 .torrent</code> –≤—ã–≤–µ—Å—Ç–∏ 10 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤<br />
<code>locate -i Kinozal-Bot</code> –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä<br />
<code>locate -r "\.log$"</code> –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è</p>
<pre><code class="language-shell">sudo curl -s https://github.com/pr4k/locate/releases/download/v0.1.1/locate-linux -o /usr/bin/locate -o /usr/bin/locate
sudo chmod +x /usr/bin/locate
</code></pre>
<p><code>locate-linux -p /home/lifailon/ -q /qbittorrent</code><br />
<code>locate-linux -p /home/lifailon/.bash_history -q /qbittorrent</code></p>
<h3 id="fd">fd</h3>
<p><code>apt install fd-find</code> —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (https://github.com/sharkdp/fd)<br />
<code>fdfind</code> –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∑–∞–º–µ–Ω—è–µ—Ç ls -R –¥–ª—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –≤ —Ç–µ–∫—É—â–µ–º –∫–∞—Ç–∞–ª–æ–≥–µ<br />
<code>fdfind pass /etc</code> –∏—â–µ—Ç –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø–æ —á–∞—Å—Ç–∏—á–Ω–æ–º—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é<br />
<code>fdfind -H pre-commit</code> –ø–æ–∏—Å–∫ —Å–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤<br />
<code>fdfind .yaml / | fzf</code> –∏—â–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã —Å –∫–æ—Ä–Ω—è —Å –≤—ã–≤–æ–¥–æ–≤ –≤ fzf<br />
<code>sudo fdfind .yaml / | fzf</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞<br />
<code>fdfind --type f -e pdf . $HOME | rofi -keep-right -dmenu -i -p FILES -multi-select | xargs -I {} xdg-open {}</code> –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å rofi (–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ –º–µ–Ω—é)<br />
<code>fd -e zip -x unzip</code> —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –Ω–∞–π—Ç–∏ –≤—Å–µ zip-–∞—Ä—Ö–∏–≤—ã –∏ —Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –∏—Ö</p>
<h2 id="bashrc">bashrc</h2>
<p><code>nano ~/.bashrc</code></p>
<pre><code class="language-shell">alias ll='ls -lFh'
alias la='ls -alFh'

# –û—á–∏—Å—Ç–∫–∞ —ç–∫—Ä–∞–Ω–∞ –Ω–∞ Ctrl+C
bind '&quot;\C-l&quot;: &quot;^\C-u\C-mclear\C-m&quot;'
# –í—ã–≤–æ–¥ –ª–æ–≥–æ–≤ –Ω–∞ Ctrl+B
bind '&quot;\C-b&quot;: &quot;bash kinozal-bot/kinozal-bot-0.4.5.sh log bot\C-m&quot;'

# –î–æ–±–∞–≤–ª—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤–≤–µ–¥–µ–Ω–æ–º—É —Ç–µ–∫—Å—Ç—É –ø—Ä–∏ –∏—Å–ø–æ—å–∑–æ–≤–∞–Ω–∏–∏ —Å—Ç—Ä–µ–ª–æ—á–µ–∫
if [[ $- == *i* ]]; then
    bind '&quot;\e[A&quot;: history-search-backward'
    bind '&quot;\e[B&quot;: history-search-forward'
fi
</code></pre>
<p><code>source ~/.bashrc</code> –ø—Ä–∏–º–µ–Ω–∏—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∏</p>
<h3 id="fzf">fzf</h3>
<p><code>apt install fzf</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å fzf (https://github.com/junegunn/fzf)<br />
<code>history | fzf</code> –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π<br />
<code>eval $(history | fzf | awk '{print $2}')</code> –≤—ã–ø–æ–ª–Ω–∏—Ç—å (eval) –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É –∏–∑ —Å–ø–∏—Å–∫–∞ (–¥–æ–±–∞–≤–∏—Ç—å –≤ –º–∞–∫—Ä–æ—Å)<br />
<code>ls *.json | fzf | xargs cat | jq .</code> –≤—ã–≤–µ—Å—Ç–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ json —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ fzf<br />
<code>find / -name "*.yaml" | fzf | xargs cat</code> –Ω–∞–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º–µ –≤—Å–µ —Ñ–∞–π–ª—ã yaml –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ –Ω–∏–º –ø–æ–∏—Å–∫</p>
<pre><code class="language-shell"># –ü–æ–∏—Å–∫ –ø–æ –∏—Å—Ç–æ—Ä–∏–∏ —Å –ø–æ–º–æ—â—å—é fzf –∏ –≤—ã–∑–æ–≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã
if command -v fzf &gt; /dev/null; then
    #alias h='eval $(cat ~/.bash_history | fzf)'
    alias h='eval $(history | fzf | sed -r &quot;s/^\s+[0-9]+\s+[0-9]{4}-[0-9]{2}-[0-9]{2}\s+[0-9]{2}:[0-9]{2}:[0-9]{2}\s//&quot;)'
    bind -x '&quot;\C-f&quot;: h'
fi
</code></pre>
<h3 id="hstr">hstr</h3>
<p><code>sudo apt install hstr</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å hstr (https://github.com/dvorka/hstr)<br />
<code>hstr -f</code> –∏–∑–±—Ä–∞–Ω–Ω–æ–µ (Ctrl+F –¥–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ)<br />
<code>hstr -n bash log</code> –≤—ã–≤–µ—Å—Ç–∏ –Ω–∞ —ç–∫—Ä–∞–Ω –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é</p>
<pre><code class="language-shell">if command -v hstr &gt; /dev/null; then
    bind -x '&quot;\C-r&quot;: hstr'
fi
</code></pre>
<h2 id="compgen">compgen</h2>
<p><code>compgen -c</code> –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤ —Ç–µ–∫—É—â–µ–π –æ–±–æ–ª–æ—á–∫–µ<br />
<code>compgen -a</code> –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –∞–ª–∏–∞—Å—ã, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤ —Ç–µ–∫—É—â–µ–π –æ–±–æ–ª–æ—á–∫–µ<br />
<code>compgen -b</code> –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Bash<br />
<code>compgen -k</code> –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–ª–æ–≤–∞ Bash<br />
<code>compgen -v</code> –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤ —Ç–µ–∫—É—â–µ–π –æ–±–æ–ª–æ—á–∫–µ<br />
<code>compgen -A export</code> –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ<br />
<code>compgen -A function</code> –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤ —Ç–µ–∫—É—â–µ–π –æ–±–æ–ª–æ—á–∫–µ<br />
<code>compgen -A arrayvar</code> –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –º–∞—Å—Å–∏–≤—ã, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤ —Ç–µ–∫—É—â–µ–π –æ–±–æ–ª–æ—á–∫–µ (echo ${BASH_ALIASES[@]})<br />
<code>compgen -A hostname</code> –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ö–æ—Å—Ç—ã<br />
<code>compgen -A job</code> –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è (ping ya.ru &gt; /dev/null &amp;)<br />
<code>compgen -A service</code> –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ —Å–ª—É–∂–±—ã (–¥–ª—è —Å–∏—Å—Ç–µ–º, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏—Ö —Å–ª—É–∂–±—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ systemd)<br />
<code>compgen -d</code> –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤ —Ç–µ–∫—É—â–µ–º –∫–∞—Ç–∞–ª–æ–≥–µ<br />
<code>compgen -f</code> –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ —Ñ–∞–π–ª—ã –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤ —Ç–µ–∫—É—â–µ–º –∫–∞—Ç–∞–ª–æ–≥–µ<br />
<code>compgen -u</code> –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–∏—Å—Ç–µ–º—ã<br />
<code>compgen -g</code> –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –≥—Ä—É–ø–ø—ã —Å–∏—Å—Ç–µ–º—ã<br />
<code>compgen -W "start stop status restart" st</code> –≤—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤ –∏–∑ wordlist, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å prefix "st"</p>
<h2 id="cron">cron</h2>
<p><code>ls /etc/cron.d/</code> –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ (atop, sysstat)<br />
<code>ls -l /etc/cron.hourly &amp;&amp; ls -l /etc/cron.daily &amp;&amp; ls -l /etc/cron.weekly &amp;&amp; ls -l /etc/cron.monthly</code> –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–¥–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ä–∞–∑ –≤ —á–∞—Å, –¥–µ–Ω—å, –Ω–µ–¥–µ–ª—é –∏ –º–µ—Å—è—Ü<br />
<code>crontab -l</code> –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–¥–∞—á<br />
<code>crontab -l | grep -Pv "^$|^#"</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è<br />
<code>crontab -u lifailon -l</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∑–∞–¥–∞—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è root<br />
<code>crontab -e</code> —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br />
<code>sudo crontab -u root -e</code> —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è root<br />
<code>crontab -r</code> –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏</p>
<p><code>cat /etc/crontab</code></p>
<pre><code>#### # .---------------- –º–∏–Ω—É—Ç–∞ (0 - 59)
#### # |  .------------- —á–∞—Å (0 - 23)
#### # |  |  .---------- –º–µ–Ω—å –º–µ—Å—è—Ü–∞ (1 - 31)
#### # |  |  |  .------- –º–µ—Å—è—Ü (1 - 12) –∏–ª–∏ jan,feb,mar,apr...
#### # |  |  |  |  .---- –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ (0 - 6) (–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å 0 –∏–ª–∏ 7) –∏–ª–∏ sun,mon,tue,wed,thu,fri,sat
#### # |  |  |  |  |
#### # *  *  *  *  * user-name command to be executed
####  17  *  *  *  *   root    cd / &amp;&amp; run-parts --report /etc/cron.hourly
####  25  6  *  *  *   root    test -x /usr/sbin/anacron || ( cd / &amp;&amp; run-parts --report /etc/cron.daily )
####  47  6  *  *  7   root    test -x /usr/sbin/anacron || ( cd / &amp;&amp; run-parts --report /etc/cron.weekly )
####  52  6  1  *  *   root    test -x /usr/sbin/anacron || ( cd / &amp;&amp; run-parts --report /etc/cron.monthly )
</code></pre>
<p><code>0,14,29,44 * * * *</code> –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç<br />
<code>*/15 * * * *</code> –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç</p>
<p><code>00 23 * * * systemctl restart zabbix-agent &amp;&amp; echo $(date): Reboot Zabbix Agent use cron &gt;&gt; /var/log/reboot.log</code> –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–ª—É–∂–±—ã –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 23:00 –∏ –ø–∏—Å–∞—Ç—å –≤ –ª–æ–≥<br />
<code>00 03 * * 6 echo $(date): Reboot Operating System use cron &gt;&gt; /var/log/reboot.log &amp;&amp; /sbin/reboot</code> –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É —Å–∏—Å—Ç–µ–º—ã –æ–¥–∏–Ω —Ä–∞–∑ –≤ —Å—É–±–±–æ—Ç—É –≤ 3 —á–∞—Å–∞ –Ω–æ—á–∏<br />
<code>@reboot date &gt;&gt; ~/date-reboot.log</code> –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ–¥–∏–Ω —Ä–∞–∑ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏</p>
<p><code>journalctl -eu cron</code><br />
<code>cat /var/log/syslog | grep -i cron</code></p>
<pre><code class="language-bash">#!/bin/bash
addr=&quot;google.com&quot;
path=&quot;/var/log/icmp-test.log&quot;
date=$(date | awk '{print $3,$2,$4}')
loss=$(ping -c 2 $addr | grep -Ewo &quot;[0-9]+%&quot;)
if [ $loss = &quot;100%&quot; ]; then
    echo &quot;$date: $addr - unavailable&quot; &gt;&gt; $path
else
    echo &quot;$date: $addr - available&quot; &gt;&gt; $path
fi
</code></pre>
<p><code>echo "*/1 * * * * bash /root/google-icmp-test.sh" &gt;&gt; /var/spool/cron/crontabs/root</code> –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—â–∏–∫ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É</p>
<p><code>cp /etc/hosts /etc/hosts.bak</code> backup —Ñ–∞–π–ª–∞<br />
<code>echo "11.11.11.11 google.com" &gt;&gt; /etc/hosts</code> –∏–∑–º–µ–Ω–∏—Ç—å –∞–¥—Ä–µ—Å –¥–ª—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ö–æ—Å—Ç–∞<br />
<code>cp /etc/hosts.bak /etc/hosts</code> –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª<br />
<code>cat /var/log/icmp-test.log | grep unavailable</code> –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ª–æ–≥ –ø–æ unavailable</p>
<h2 id="systemctl">systemctl</h2>
<p><code>systemctl reload ssh</code> –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–µ—Ä–≤–∏—Å–∞ –∏–∑ —Ñ–∞–π–ª–∞ —é–Ω–∏—Ç–∞ (–µ—Å–ª–∏ —É —é–Ω–∏—Ç–∞ –µ—Å—Ç—å —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è)<br />
<code>systemctl status ssh</code> –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã, —é–Ω–∏—Ç–æ–≤ (–≤ —Ç–æ–º —á–∏—Å–ª–µ Failed) –∏ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π<br />
<code>systemctl status sshd | grep -P "Active.+;" | sed -r "s/.+; | ago//g"</code> –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–ª—É–∂–±—ã<br />
<code>systemctl start ssh</code> –∑–∞–ø—É—Å—Ç–∏—Ç—å —é–Ω–∏—Ç (–¥–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏)<br />
<code>systemctl stop ssh</code> –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —é–Ω–∏—Ç (–¥–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏)<br />
<code>systemctl restart ssh</code> –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å<br />
<code>systemctl enable ssh</code> –¥–æ–±–∞–≤–∏—Ç—å –≤ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É<br />
<code>systemctl disable ssh</code> —É–¥–∞–ª–∏—Ç—å –∏–∑ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∏<br />
<code>systemctl mask ssh</code> –≤—ã–∫–ª—é—á–∏—Ç—å —é–Ω–∏—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–ª—å–∑—è –±—É–¥–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å (—Å–æ–∑–¥–∞–µ—Ç —Å–∏–º–ª–∏–Ω–∫ –Ω–∞ /dev/null)<br />
<code>systemctl unmask ssh</code> –≤–∫–ª—é—á–∏—Ç—å —é–Ω–∏—Ç (—É–¥–∞–ª–∏—Ç—å —Å–∏–º–ª–∏–Ω–∫)<br />
<code>systemctl daemon-reload</code> –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —é–Ω–∏—Ç systemd<br />
<code>systemctl cat ssh</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø—É—Ç—å –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ unit-—Ñ–∞–π–ª–∞<br />
<code>systemctl edit --full ssh</code> –æ—Ç–∫—Ä—ã—Ç—å –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª —é–Ω–∏—Ç–∞<br />
<code>systemctl list-dependencies ssh</code> –¥–µ—Ä–µ–≤–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π<br />
<code>systemctl list-dependencies ssh --reverse</code> –∑–∞–≤–∏—Å—è—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã –æ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —é–Ω–∏—Ç–∞<br />
<code>systemctl list-units --type service --all</code> –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤<br />
<code>systemctl list-unit-files | sed "1d;$ d" | sed "$ d" | wc</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–æ–ª-–≤–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞ –¥–∏—Å–∫–µ<br />
<code>systemctl list-unit-files | grep zabbix</code> –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –∏–º–µ–Ω–∏<br />
<code>systemctl list-unit-files --type=service</code> —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤<br />
<code>systemctl list-unit-files --type=service --state=enabled</code> —Å–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–∏—Å–æ–≤, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –≤ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É<br />
<code>systemctl list-units --all --type=service --plain --no-legend --no-pager --output=json</code><br />
<code>--all</code> –≤—ã–≤–æ–¥–∏—Ç—å –≤—Å–µ —Ç–∏–ø—ã —é–Ω–∏—Ç–æ–≤, –≤–∫–ª—é—á–∞—è –∞–∫—Ç–∏–≤–Ω—ã–µ, –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –∏ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ<br />
<code>--type=service</code> –≤—ã–≤–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–ª—É–∂–±—ã —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ systemd (–Ω–µ –∫–ª—é—á–∞–µ—Ç –≤ –≤—ã–≤–æ–¥ –¥—Ä—É–≥–∏–µ —Ç–∏–ø—ã —é–Ω–∏—Ç–æ–≤, —Ç–∞–∫–∏–µ –∫–∞–∫ socket –∏–ª–∏ device)<br />
<code>--plain</code> –≤—ã–≤–æ–¥ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –±–µ–∑ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è<br />
<code>--no-legend</code> –æ—Ç–∫–ª—é—á–∞–µ—Ç –≤—ã–≤–æ–¥ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –¥–ª—è —Å—Ç–æ–ª–±—Ü–æ–≤<br />
<code>--no-pager</code> –æ—Ç–∫–ª—é—á–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ (less)<br />
<code>ls /usr/lib/systemd/system</code> —é–Ω–∏—Ç—ã –ø–æ—Å—Ç–∞–≤–ª—è–µ–º—ã–µ –≤–º–µ—Å—Ç–µ —Å —Å–∏—Å—Ç–µ–º–æ–π –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—ã–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏<br />
<code>ls /run/systemd/system</code> —é–Ω–∏—Ç—ã —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤ runtime<br />
<code>ls /etc/systemd/system</code> —é–Ω–∏—Ç—ã —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</p>
<h3 id="unit">unit</h3>
<pre><code class="language-bash">#!/bin/bash
while true; do
    addr=&quot;google.com&quot;
    path=&quot;/var/log/icmp-test.log&quot;
    date=$(date | awk '{print $3,$2,$4}')
    loss=$(ping -c 2 $addr | grep -Ewo &quot;[0-9]+%&quot;)
    if [ $loss = &quot;100%&quot; ]; then
        echo &quot;$date: $addr - unavailable&quot; &gt;&gt; $path
    else
        echo &quot;$date: $addr - available&quot; &gt;&gt; $path
        tail -n 1 $path
    fi
    sleep 5
done
</code></pre>
<p><code>nano /etc/systemd/system/icmp-test-log.service</code></p>
<pre><code>[Unit]
Description=icmp test output to log
After=network.target

[Service]
ExecStart=/bin/bash &quot;/root/google-icmp-test.sh&quot;
ExecReload=/bin/kill -HUP $MAINPID
KillMode=process
Restart=on-failure
Type=simple

[Install]
WantedBy=multi-user.target
</code></pre>
<p><code>systemctl daemon-reload</code><br />
<code>systemctl enable icmp-test-log.service</code><br />
<code>systemctl start icmp-test-log</code><br />
<code>systemctl status icmp-test-log</code><br />
<code>tail -f /var/log/icmp-test.log</code></p>
<h2 id="journalctl">journalctl</h2>
<p><code>journalctl -eu ssh</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–æ–Ω—Ü–∞ (-e) –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (-u)<br />
<code>journalctl _PID=3972315</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ PID –ø—Ä–æ—Ü–µ—Å—Å–∞<br />
<code>journalctl --since today</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –∑–∞ —Å–µ–≥–æ–¥–Ω—è<br />
<code>journalctl -fu ssh</code> –≤—ã–≤–æ–¥–∏—Ç—å –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (-f)<br />
<code>ournalctl -p 3</code> –≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ –∏ –≤—ã—à–µ –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏: –Ω–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å(0)/alerts(1)/critical(2)/errors(3)/warning(4)/notice(5)/info(6)/debug(7)<br />
<code>journalctl -ek</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏—è —è–¥—Ä–∞ (kernel)<br />
<code>journalctl -S "2023-09-01 12:00:00" -U "2023-09-01 15:00:00"</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç (-S) 1 —Å–µ–Ω—Ç—è–±—Ä—è 12:00 –ø–æ (-U) 15:00<br />
<code>journalctl -b</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã (boot)<br />
<code>journalctl --list-boots</code> –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∑–∞–≥—Ä—É–∑–æ–∫ —Å–∏—Å—Ç–µ–º—ã<br />
<code>journalctl -b ba6b2292a0e84d83a81cedfaa221926f</code> –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —Å –º–æ–º–µ–Ω—Ç–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã<br />
<code>journalctl --disk-usage</code> –≤—ã–≤–µ—Å—Ç–∏ –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä –ª–æ–≥ —Ñ–∞–π–ª–æ–≤ –Ω–∞ –¥–∏—Å–∫–µ<br />
<code>journalctl --vacuum-time=1month</code> –æ—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏, –¥–∞–≤–Ω–æ—Å—Ç—å—é –±–æ–ª—å—à–µ 1-–≥–æ –º–µ—Å—è—Ü–∞<br />
<code>journalctl --vacuum-size=100M</code> –æ—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏, —á—Ç–æ–±—ã —Ä–∞–∑–º–µ—Ä —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª —É–∫–∞–∑–∞–Ω–Ω–æ–º—É<br />
<code>g</code> –ø–µ—Ä–µ–π—Ç–∏ –≤ –Ω–∞—á–∞–ª–æ –ª–∏—Å—Ç–∏–Ω–≥–∞<br />
<code>G</code> –ø–µ—Ä–µ–π—Ç–∏ –≤ –∫–æ–Ω–µ—Ü<br />
<code>nano /etc/systemd/journald.conf</code><br />
<code>SystemMaxUse=400M</code> –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–∏–º–∏—Ç –∑–∞–ø–∏—Å–∏</p>
<h3 id="dmesg">dmesg</h3>
<p><code>dmesg -Tx</code> –ø—Ä–æ—á–∏—Ç–∞—Ç—å –ª–æ–≥–∏ –±—É—Ñ–µ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —è–¥—Ä–∞ (/var/log/dmesg), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã –ø–æ–∫–∞ —Å–µ—Ä–≤–∏—Å Syslog –µ—â—ë –Ω–µ –∑–∞–ø—É—â–µ–Ω<br />
<code>dmesg -Tx -l crit,err</code> –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –≤—ã–≤–æ–¥<br />
<code>dmesg -E</code> –≤–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–≤–æ–∞–Ω–∏–µ —è–¥—Ä–∞ –≤ –∫–æ–Ω—Å–æ–ª—å (--console-on)<br />
<code>dmesg -D</code> –æ—Ç–∫–ª—é—á–∏—Ç—å (--console-off) <br />
<code>dmesg -n 1</code> –∏–∑–º–µ–Ω–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –ø–µ—á–∞—Ç–∏ –≤ –∫–æ–Ω—Å–æ–ª—å<br />
<code>dmesg -u</code> –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –≤—ã–≤–æ–¥ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br />
<code>dmesg -w</code> –≤—ã–≤–æ–¥–∏—Ç—å –∂—É—Ä–Ω–∞–ª –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–∂–¥–∞—Ç—å –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π)</p>
<h2 id="hardware">hardware</h2>
<p><code>systemd-analyze</code> –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –û–° (Kernel - –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —è–¥—Ä–∞) –∏ userspace<br />
<code>systemd-analyze blame</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–≥—Ä—É–∑–∫–∏<br />
<code>systemd-analyze blame | grep zabbix</code><br />
<code>systemd-analyze plot &gt; graph.svg</code> —Å–æ–∑–¥–∞—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –æ—Ç—á–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ Scalable Vector Graphics –æ–ø–∏—Å–∞–Ω–Ω—ã–π XML</p>
<p><code>history</code> –∏—Å—Ç–æ—Ä–∏—è –∫–æ–º–∞–Ω–¥<br />
<code>history -c</code> –æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</p>
<p><code>who -b</code> –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è<br />
<code>last</code> –∏—Å—Ç–æ—Ä–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏<br />
<code>last -n 5 reboot</code> –∏—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏<br />
<code>last shutdown</code> –∏—Å—Ç–æ—Ä–∏—è –≤—ã–∫–ª—é—á–µ–Ω–∏–π</p>
<p><code>arch</code> –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã<br />
<code>lsb_release -a</code> –≤–µ—Ä—Å–∏—è –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞<br />
<code>uname -srv</code> –≤–µ—Ä—Å–∏—è —è–¥—Ä–∞<br />
<code>cat /proc/version</code> –≤–µ—Ä—Å–∏—è —è–¥—Ä–∞ –∏ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞<br />
<code>cat /etc/os-release</code> –æ–ø–∏—Å–∞–Ω–∏–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞ –∏ –≤–µ—Ä—Å–∏—è –û–°<br />
<code>hostnamectl</code> –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (Operating System, Kernel, Architecture, Hardware Vendor/Model)</p>
<p><code>uptime</code> –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã, –∫–æ–ª-–≤–æ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, Load average - —Å—Ä–µ–¥–Ω—è—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 1, 5 –∏ 15 –º–∏–Ω—É—Ç (2.00 - —ç—Ç–æ 100% –Ω–∞ –¥–≤–∞ —è–¥—Ä–∞)<br />
<code>dmidecode -t bios</code> –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ (system/baseboard/processor/memory)<br />
<code>dmidecode -s bios-vendor</code> –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ (bios-version/bios-release-date/baseboard-manufacturer/system-manufacturer/processor-version)<br />
<code>dmidecode -t baseboard</code> –≤–µ—Ä—Å–∏—è –º–∞—Ç–µ—Ä–∏–Ω—Å–∫–æ–π –ø–ª–∞—Ç—ã, Video –∏ Sound –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å</p>
<p><code>nproc</code> –∫–æ–ª-–≤–æ —è–¥–µ—Ä<br />
<code>lscpu</code> –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–µ<br />
<code>cat /proc/cpuinfo</code> –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–µ<br />
<code>cat /proc/cpuinfo | grep "core id" | wc -l</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —è–¥–µ—Ä (–±–µ–∑ —É—á–µ—Ç–∞ –ø–æ—Ç–æ–∫–æ–≤)<br />
<code>cat /proc/partitions</code> –ø–µ—Ä–µ—á–∏—Å–ª—è–µ—Ç –≤—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ —Ä–∞–∑–¥–µ–ª—ã –Ω–∞ —ç—Ç–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö —Ö—Ä–∞–Ω–µ–Ω–∏—è<br />
<code>cat /proc/asound/cards</code> Audio PCI<br />
<code>cat /proc/cmdline</code> —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–º—è —Ñ–∞–π–ª–∞ –æ–±—Ä–∞–∑–∞ —è–¥—Ä–∞ –∏ –µ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—É—Å–∫–∞, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —É–∫–∞–∑–∞–Ω—ã –≤ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–∏ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ GRUB (–ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –≤–≤–µ–¥–µ–Ω—ã –≤—Ä—É—á–Ω—É—é)<br />
<code>cat /etc/default/grub</code> —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–∞–Ω–¥–∞ update-grub –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–∞ /boot/grub/grub.cfg<br />
<code>cat /boot/grub/grub.cfg</code> –∫–æ–º–∞–Ω–¥–∞ update-grub –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —ç—Ç–æ—Ç —Ñ–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏, –∑–∞–¥–∞–Ω–Ω—ã–º–∏ –≤ —Ñ–∞–π–ª–µ /etc/default/grub<br />
<code>cat /proc/loadavg</code> —Å—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏–ª–∏ –ø–æ—Ç–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è, –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥–∏ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–ª–∏ –∂–¥—É—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 1, 5 –∏ 15 –º–∏–Ω—É—Ç. 4-–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —ç—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤—ã–ø–æ–ª–Ω—è–µ–º—ã—Ö –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç/–æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ. –ü–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —ç—Ç–æ PID –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞.</p>
<p><code>lspci</code> –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ –∫ –º–∞—Ç–µ—Ä–∏–Ω—Å–∫–æ–π –ø–ª–∞—Ç–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –ø–æ —à–∏–Ω–µ PCIe<br />
<code>lspci | grep -i vga</code> —É–∑–Ω–∞—Ç—å –∫–∞–∫–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–∏–¥–µ–æ–∫–∞—Ä—Ç–∞ (VGA controller)<br />
<code>lspci | grep -i audio</code> Audio controller<br />
<code>lspci | grep -i ethernet</code> Ethernet controller<br />
<code>lspci | grep -i scsi</code> SCSI storage controller<br />
<code>lspci | grep -i sata</code> SATA storage controller<br />
<code>lspci | grep "USB controller"</code><br />
<code>lspci | grep 02:00.0</code> —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ —Å–ª–æ—Ç—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞<br />
<code>lspci -vv | grep -iE "driver"</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥—Ä–∞–π–≤–µ—Ä–æ–≤ —è–¥—Ä–∞ –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤<br />
<code>lsusb -vt</code> –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ USB —É—Å—Ç–æ–π—Å—Ç–≤–∞—Ö (–ø—Ä–∏–Ω—Ç–µ—Ä—ã, Bluetooth –∞–¥–∞–ø—Ç–µ—Ä, –º—ã—à–∫–∞, –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞)</p>
<p><code>lshw -short</code> –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –∫–∞–∂–¥–æ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É<br />
<code>lshw -class bus</code> Motherboard/USB<br />
<code>lshw -class display</code> VGA controller<br />
<code>lshw -class network</code><br />
<code>lshw -class disk</code> –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∂–µ—Å—Ç–∫–æ–º –¥–∏—Å–∫–µ (product, vendor, size, capabilities: 7200rpm)<br />
<code>lshw | grep product</code></p>
<p><code>ls /sys/class/net</code> —Å–ø–∏—Å–æ–∫ —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤<br />
<code>cat /proc/net/dev</code> —Å–ø–∏—Å–æ–∫ —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∏ –∏—Ö —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (bytes, packets, errs, drop) –¥–ª—è Receive (–ü—Ä–∏–µ–º) –∏ Transmit (–ü–µ—Ä–µ–¥–∞—á–∞)<br />
<code>ethtool -S ens33</code> —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–¥–ª—è —Å–±—Ä–æ—Å–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –Ω—É–∂–Ω–æ ip down –∏ –≤—ã–≥—Ä—É–∑–∏—Ç—å –º–æ–¥—É–ª—å —è–¥—Ä–∞ —Å –¥—Ä–∞–π–≤–µ—Ä–æ–≤ modprobe -r module –∏ –≤–µ—Ä–Ω—É—Ç—å –æ–±—Ä–∞—Ç–Ω–æ)<br />
<code>ethtool ens33 | grep -Ei "wake-on|speed"</code> –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Wake-on-Lan –∏ —Å–∫–æ—Ä–æ—Å—Ç—å —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞<br />
<code>ethtool -i ens33</code> –¥—Ä–∞–π–≤–µ—Ä —Å–µ—Ç–µ–≤–æ–π –∫–∞—Ä—Ç—ã<br />
<code>ethtool ens33 -p 100</code> –≤–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç–æ–¥–∏–æ–¥ –Ω–∞ —Å–µ—Ç–µ–≤–æ–π –∫–∞—Ä—Ç–µ –Ω–∞ 100 —Å–µ–∫—É–Ω–¥</p>
<p><code>cat /sys/block/sda/stat</code> —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∏—Å–∫–∞ sda<br />
<code>lsmod</code> —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π —è–¥—Ä–∞ –≤–º–µ—Å—Ç–µ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏<br />
<code>/proc/modules</code> —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π —è–¥—Ä–∞<br />
<code>modinfo ip_tables</code> –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –º–æ–¥—É–ª–µ<br />
<code>ls /etc/*modprobe*</code> —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —Å–æ —Å–ø–∏—Å–∫–∞–º–∏ –º–æ–¥—É–ª–µ–π —è–¥—Ä–∞<br />
<code>cat /etc/modprobe.d/mdadm.conf</code>/etc/modules-load.d/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ–∞–π–ª—ã —Å–æ —Å–ø–∏—Å–∫–∞–º–∏ –º–æ–¥—É–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∏—Å—Ç–µ–º—ã</p>
<p><code>ls -l /var/lib/apt/periodic/update-success-stamp</code> –¥–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è apt update<br />
<code>ls -l /var/cache/apt/pkgcache.bin</code> –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫—ç—à–∞ –ø–∞–∫–µ—Ç–æ–≤ apt<br />
<code>HISTTIMEFORMAT="%d/%m/%y %T " history | grep "apt update"</code> –∏—Å—Ç–æ—Ä–∏—è –∫–æ–º–∞–Ω–¥—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å —Ç–æ—á–∫–æ–π –≤—Ä–µ–º–µ–Ω–∏</p>
<p><code>cat /etc/hostname</code> –∏–º—è —Ö–æ—Å—Ç–∞<br />
<code>cat /etc/services | grep -iE "ntp|zabbix"</code> —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –∏–º –ø–æ—Ä—Ç–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ<br />
<code>cat /etc/mime.types | grep -Ew "json|csv"</code> —Å–ø–∏—Å–æ–∫ —Å–æ–ø–æ—Å—Ç–∞–ª–≤–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∏ –∏—Ö –ø—Ä–æ–≥—Ä–∞–º–º –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ</p>
<p><code>cat /etc/hosts</code> –ª–æ–∫–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏ ip –≤ –∏–º—è<br />
<code>cat /etc/hosts.allow &amp;&amp; cat /etc/hosts.deny</code> –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º<br />
<code>cat /etc/hosts.{allow,deny} | grep -Pv "^$|^#"</code><br />
<code>echo "in.telnetd: 192.168.3., .domain.ru" &gt;&gt; /etc/hosts.allow</code> —Ä–∞–∑—Ä–µ—à–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–π –ø–æ–¥—Å–µ—Ç–∏ –∏ –¥–æ–º–µ–Ω–∞</p>
<p><code>ls -l /dev | grep sd</code> –≤—ã–≤–µ—Å—Ç–∏ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–∏—Å–∫–æ–≤ –∏ —Ä–∞–∑–¥–µ–ª–æ–≤ –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ<br />
<code>ls -l /dev | grep -wo sd.</code> –≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ —Å–ø–∏—Å–æ–∫ –¥–∏—Å–∫–æ–≤<br />
<code>cat /proc/diskstats</code> —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∏—Å–∫–æ–≤<br />
<code>cat /proc/stat</code> cpu user/nice/system/idle/iowait/irq/softirq/steal_time, ctxt - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –Ω–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞—Ö, btime - –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã –≤ —Å–µ–∫—É–Ω–¥–∞—Ö —Å –Ω–∞—á–∞–ª–∞ —ç–ø–æ—Ö–∏ unix, processes -  —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ –ø–æ—Ç–æ–∫–æ–≤, –≤–∫–ª—é—á–∞—è (–Ω–æ –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—è—Å—å –∏–º–∏) —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–∑–¥–∞–Ω—ã –≤—ã–∑–æ–≤–∞–º–∏ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ fork() –∏ clone(), procs_blocked - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –∏ –æ–∂–∏–¥–∞—é—â–∏—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞<br />
<code>stat -f /dev/sda</code><br />
<code>cat /proc/buddyinfo</code> –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–∞–º—è—Ç–∏ –≤ —è–¥—Ä–µ Linux, —Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º —Å —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–µ–π –ø–∞–º—è—Ç–∏<br />
<code>cat /proc/cgroups</code> —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞–º–∏ –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ cgroups, –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ª—é–±—ã–º —Ä–µ—Å—É—Ä—Å–∞–º –¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–∞, –∞ —Ç–∞–∫–∂–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ —Å–∏—Å—Ç–µ–º–µ</p>
<h2 id="sysctl">sysctl</h2>
<p><code>sysctl -a</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã/–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —è–¥—Ä–∞ Linux (Kernel), –≥–¥–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –≤–∏–¥–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –ø—É—Ç–∏ —Ñ–∞–π–ª–∞ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ /proc/sys (–≤–º–µ—Å—Ç–æ —Å–ª–µ—à–∞ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ—á–∫–∞)<br />
<code>sysctl net.ipv6.conf.all</code><br />
<code>sysctl net.ipv6.conf.all.disable_ipv6=1</code> –æ—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª IPv6 (&gt; /proc/sys/net/ipv6/conf/ens33/disable_ipv6)<br />
<code>sysctl net.ipv6.conf.ens33.disable_ipv6=1</code> –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ ens33<br />
<code>sysctl --system</code> –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ —Ñ–∞–π–ª–æ–≤/–≤–µ—Ä–Ω—É—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ –≤ —Ñ–∞–π–ª–∞—Ö (—É–¥–∞–ª–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ sysctl)<br />
<code>sysctl -w net.ipv6.conf.ens33.disable_ipv6=1</code> —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ (-w –∑–∞–ø–∏—Å–∞—Ç—å –≤ —Ñ–∞–π–ª)<br />
<code>sysctl fs.file-nr</code> –∫–æ–ª-–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤—ã—Ö –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤ –≤ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç, –æ—Ç–∫—Ä—ã—Ç—ã–µ —Ñ–∞–π–ª—ã –∫–æ—Ç–æ—Ä—ã–µ —Å–µ–π—á–∞—Å –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è<br />
<code>sysctl -a | grep fs.file-max</code> –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤ (–¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤), –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ –≤—Å–µ–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ —è–¥—Ä–∞ –û–°<br />
<code>nano /proc/sys/fs/file-max</code> –∏–∑–º–µ–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–ª-–≤–∞ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤<br />
<code>echo "fs.file-max=500000" &gt;&gt; /etc/sysctl.conf</code> –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é sysctl.conf<br />
<code>sysctl -p</code> –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏<br />
<code>sysctl fs.nr_open</code> –ª–∏–º–∏—Ç –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–∞–π–ª–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ—Ç–¥–µ–ª—å–Ω–æ<br />
<code>ls /proc/1/fd/ | wc -l</code> —É–∑–Ω–∞—Ç—å –∫–æ–ª-–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤ —É –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ —Å PID 1<br />
<code>sysctl fs.aio-nr</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞ –∏ –≤—ã–≤–æ–¥–∞ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ –≤ –º–∞—Å—à—Ç–∞–±–µ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã (Asynchronous IO number requests)<br />
<code>sysctl fs.aio-max-nr</code> –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è fs.aio-max-nr ‚Äî 1048576, –Ω–æ –≤ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–π —Å—Ä–µ–¥–µ ASE —Å–æ –º–Ω–æ–≥–∏–º–∏ —è–¥—Ä–∞–º–∏ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –±–æ–ª—å—à–µ–µ —á–∏—Å–ª–æ<br />
<code>sysctl fs.inotify.max_queued_events</code> –ø–æ–¥—Å–∏—Å—Ç–µ–º–∞ —è–¥—Ä–∞ inotify –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–ª–µ–¥–∏—Ç—å –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –æ—á–µ—Ä–µ–¥–∏, –ø–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∞<br />
<code>sysctl fs.inotify.max_user_watches</code> –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π, –∑–∞ –∫–æ—Ç–æ—Ä—ã–º–∏ –º–æ–∂–µ—Ç –Ω–∞–±–ª—é–¥–∞—Ç—å –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç inotify<br />
<code>sysctl fs.inotify.max_user_instances</code> –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤ inotify, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å<br />
<code>sysctl fs.mqueue.queues_max</code> –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ—á–µ—Ä–µ–¥–µ–π —Å–æ–æ–±—â–µ–Ω–∏–π POSIX, —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –≤ —Å–∏—Å—Ç–µ–º–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø—Ä–æ—Ü–µ—Å—Å–∞–º (–∏ –∏—Ö –ø–æ—Ç–æ–∫–∞–º) –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –¥–∞–Ω–Ω—ã–º–∏ –≤ –≤–∏–¥–µ —Å–æ–æ–±—â–µ–Ω–∏–π (—Å–æ–∑–¥–∞—é—Ç—Å—è –∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ mq_open)<br />
<code>sysctl fs.mqueue.msg_max</code> –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∑–Ω–∞—á–µ–Ω–∏–∏ –æ—á–µ—Ä–µ–¥–∏<br />
<code>sysctl fs.mqueue.msgsize_max</code> –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è<br />
<code>sysctl vm.min_free_kbytes</code> –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Å–≤–æ–±–æ–¥–Ω–æ–π –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å<br />
<code>sysctl vm.swappiness</code> –ø—Ä–æ—Ü–µ–Ω—Ç —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏, –ø–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –¥–∞–Ω–Ω—ã–µ –Ω–∞—á–∏–Ω–∞—é—Ç –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å—Å—è –Ω–∞ SWAP —Ä–∞–∑–¥–µ–ª<br />
<code>sysctl -w vm.swappiness=80</code> –ø—Ä–∏ 80% —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏ (—Å–≤—ã—à–µ 20% –∑–∞–Ω—è—Ç–æ–π –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏) –Ω–∞—á–Ω–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è SWAP, –≤ –∫–æ—Ç–æ—ã–π –ø–æ–º–µ—â—è—é—Ç—Å—è –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–∞–º—è—Ç–∏ –Ω–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç, –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –ø–æ—Ç—Ä–µ–±—É—é—Ç—Å—è —ç—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –ø—Ä–æ—Ü–µ—Å—Å –∏—Ö –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∏—è –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ –ø–æ–¥–∫–∞—á–∫–∏ –æ–±—Ä–∞—Ç–Ω–æ –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—É—é –ø–∞–º—è—Ç—å (–¥–∞–Ω–Ω—ã–µ –Ω—É–∂–Ω–æ –æ–±—Ä–∞—Ç–Ω–æ —Å—á–∏—Ç–∞—Ç—å —Å –¥–∏—Å–∫–∞ –≤ –ø–∞–º—è—Ç—å)<br />
<code>sysctl -w vm.swappiness=10</code> —Ñ–∞–π–ª –ø–æ–¥–∫–∞—á–∫–∏ (–≤—ã–≥—Ä—É–∑–∫–∞ –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –ø–∞–º—è—Ç—å) –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ —Å–≤–æ–±–æ–¥–Ω–æ 10% –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏<br />
<code>sysctl vm.vfs_cache_pressure</code> —Å–∫–æ—Ä–æ—Å—Ç—å —É–¥–∞–ª–µ–Ω–∏—è dentry –∏ inode –∏–∑ –∫—ç—à–∞ (100 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)<br />
<code>sysctl vm.dirty_background_ratio</code> –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –æ–±—â–µ–π –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω —Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–º –∫—ç—à–µ–º, –ø–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –∫–æ—Ç–æ—Ä–æ–π –¥–µ–º–æ–Ω pdflush (dirty page flush) –Ω–∞—á–∏–Ω–∞–µ—Ç —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫—ç—à–∞ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –Ω–∞ –¥–∏—Å–∫. –ö–æ–≥–¥–∞ –æ–±—ä–µ–º —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–µ–Ω—å—à–µ —ç—Ç–æ–≥–æ –ø–æ—Ä–æ–≥–∞, —è–¥—Ä–æ –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é wakeup_bdflush() –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞ pdflush, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –æ–±—Ä–∞—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –ø–∞–º—è—Ç–∏ background_writeout() –Ω–∞ –¥–∏—Å–∫, —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç –æ–¥–∏–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü, –∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –∑–∞–ø–∏—Å–∞—Ç—å –Ω–∞ –¥–∏—Å–∫.<br />
<code>sysctl -w vm.dirty_background_ratio=5</code><br />
<code>sysctl vm.dirty_ratio</code> –≤–µ—Ä–Ω—Ö–Ω–∏–π –ø—Ä–µ–¥–µ–ª –æ–±—ä–µ–º–∞ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö –æ—Ç free Available –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–¥–µ–ª–µ–Ω –ø–æ–¥ PageCache –¥–æ –∏—Ö –∑–∞–ø–∏—Å–∏ –Ω–∞ –¥–∏—Å–∫, –Ω–∞ —ç—Ç–æ–º —É—Ä–æ–≤–Ω–µ –≤—Å–µ –Ω–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–∞ –¥–∏—Å–∫ –Ω–µ –±—É–¥—É—Ç –∑–∞–ø–∏—Å–∞–Ω—ã –≥—Ä—è–∑–Ω—ã–µ (Dirty) —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤—ã—à–µ —á–µ–º dirty_background_ratio<br />
<code>sysctl vm.dirty_expire_centisecs</code> –≤—Ä–µ–º—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≥—Ä—è–∑–Ω—ã—Ö (Dirty) —Å—Ç—Ä–∞–Ω–∏—Ü –≤ –∫—ç—à–µ –≤ —Å–æ—Ç—ã—Ö –¥–æ–ª—è—Ö —Å–µ–∫—É–Ω–¥ (3000 = 30 —Å–µ–∫—É–Ω–¥) –¥–ª—è –∏—Ö –∑–∞–ø–∏—Å–∏ –Ω–∞ –¥–∏—Å–∫ —Å —Ü–µ–ª—å—é. –§—É–Ω–∫—Ü–∏—è wb_kupdate() –¥–µ–º–æ–Ω–∞ pdflush –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–±—Ä–∞—Ç–Ω—É—é –∑–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∏—Å–∫, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã –±–æ–ª–µ–µ —á–µ–º dirty_expire_centisecs –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–≥–æ –∫—ç—à–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –Ω–∞ –¥–∏—Å–∫–µ, —Ç.–∫. –ø—Ä–∏ —Å–±–æ–µ, —Ç.–∫. —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–º—è—Ç–∏ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è.<br />
<code>sysctl vm.dirty_writeback_centisecs</code> –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–ª–µ–∂–∞—Ç –∑–∞–ø–∏—Å–∏ –Ω–∞ –¥–∏—Å–∫ (500 - 5 —Å–µ–∫—É–Ω–¥)<br />
<code>sysctl abi.vsyscall32</code> —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ 32 –±–∏—Ç–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º –≤ 64 –±–∏—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1 - —Ä–∞–∑—Ä–µ—à–∞–µ—Ç)<br />
<code>sysctl kernel.hostname</code> –∏–∑–º–µ–Ω–∏—Ç—å –∏–º—è –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏<br />
<code>sysctl kernel.printk</code> —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è<br />
<code>sysctl -w kernel.printk="2 4 1 7"</code><br />
<code>sysctl net.ipv4.ip_default_ttl</code> –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –≤–µ–ª–∏—á–∏–Ω—ã Time To Live –∏—Å—Ö–æ–¥—è—â–∏—Ö –ø–∞–∫–µ—Ç–æ–≤ (–ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∂–∏–∑–Ω–∏ –ø–∞–∫–µ—Ç–∞ –≤ Internet - –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –ø–∞–∫–µ—Ç –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ –æ—á–µ—Ä–µ–¥–Ω–æ–π —Ä–æ—É—Ç–µ—Ä, –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä –∏ —Ç.–ø. –≤–µ–ª–∏—á–∏–Ω–∞ TTL –ø–∞–∫–µ—Ç–∞ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –Ω–∞ 1)<br />
<code>sysctl net.ipv4.ip_no_pmtu_disc</code> –∑–∞–ø—Ä–µ—â–∞–µ—Ç –ø–æ–∏—Å–∫ Path Maximum Transfer Unit (–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—É—Ç–∏, —ç—Ç–æ –Ω–µ MTU), –∫–æ–≥–¥–∞ —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –ø—ã—Ç–∞—Ç—å—Å—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –Ω–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω—è—Ç—å –∏—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—é, –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –Ω–∞ –∑–∞–¥–∞–Ω–Ω—ã–π —Ö–æ—Å—Ç<br />
<code>sysctl net.ipv4.tcp_mem</code> –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è (–º–∏–Ω–∏–º—É–º, —Ä–µ–∂–∏–º –Ω–∞–≥—Ä—É–∑–∫–∏, –º–∞–∫—Å–∏–º—É–º), –∫–æ—Ç–æ—Ä–∞—è c–æ–¥–µ—Ä–∂–∏—Ç –æ–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ –¥–ª—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ TCP, –∏–∑–º–µ—Ä—è–µ—Ç—Å—è –≤ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö (–æ–±—ã—á–Ω–æ 4–ö–±), –∞ –Ω–µ –±–∞–π—Ç–∞—Ö. –ü–æ–∫–∞ –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä –ø–∞–º—è—Ç–∏ –¥–ª—è —Ü–µ–ª–µ–π –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ TCP –Ω–∏–∂–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü, –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç —Å –ø–∞–º—è—Ç—å—é –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ TCP —Å–æ–∫–µ—Ç–∞–º–∏, –≤ —Ä–µ–∂–∏–º–µ –Ω–∞–≥—Ä—É–∑–∫–∏ TCP –Ω–∞—á–∏–Ω–∞–µ—Ç –±—ã—Å—Ç—Ä–æ –æ—Å–≤–æ–±–æ–∂–¥–∞—Ç—å –ø–∞–º—è—Ç—å, –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π - –æ–±—ä–µ–º –ø–∞–º—è—Ç–∏, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –Ω—É–∂–¥ TCP –∏ –ø—Ä–∏ –µ–≥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏, –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –ø–æ—Ç–µ—Ä–∏ –ø–∞–∫–µ—Ç–æ–≤.<br />
<code>sysctl net.ipv4.tcp_rmem</code> –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –≤–µ–ª–∏—á–∏–Ω–∞ —Ä–∞–∑–º–µ—Ä–∞ –±—É—Ñ–µ—Ä–∞ —Å–æ–∫–µ—Ç–æ–≤ TCP –¥–ª—è –ø—Ä–∏–µ–º–∞. –ö–∞–∂–¥—ã–π —Å–æ–∫–µ—Ç TCP –∏–º–µ–µ—Ç –ø—Ä–∞–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –ø–∞–º—è—Ç—å –ø–æ —Ñ–∞–∫—Ç—É —Å–≤–æ–µ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äì 4096 –±–∞–π—Ç, 4 –ö–±) –∏ –µ–≥–æ –Ω–µ —Å—Ç–æ–∏—Ç —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å, —Ç.–∫. –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –∑–∞–π–º—É—Ç –º–Ω–æ–≥–æ –ø–∞–º—è—Ç–∏. –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤–∑–∞–º–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ rmem_default (–∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏), –≤—Ç–æ—Ä–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–º–µ–µ—Ç —É–¥–≤–æ–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, 87380 * 2 bytes, –∏–ª–∏ 174760 –±–∞–π—Ç (170 –ö–±). –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤–æ–∑–º–æ–∂–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø—Ä–∏–µ–º–Ω–æ–≥–æ –±—É—Ñ–µ—Ä–∞, —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –æ—Ç–º–µ–Ω—è–µ—Ç –º–∞–∫—Å–∏–º—É–º–∞, –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –≤ rmem_max<br />
<code>sysctl net.ipv4.tcp_wmem</code> –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –≤–µ–ª–∏—á–∏–Ω–∞ —Ä–∞–∑–º–µ—Ä–∞ –±—É—Ñ–µ—Ä–∞ —Å–æ–∫–µ—Ç–æ–≤ TCP –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏<br />
<code>sysctl net.core.rmem_default</code> –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–∏–º–µ–µ—Ç –Ω–∏–∂–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, —á–µ–º tcp_rmem)<br />
<code>sysctl net.core.wmem_default</code> –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é<br />
<code>sysctl net.core.rmem_max</code> –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞ –Ω–∞ —Å–æ–∫–µ—Ç–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–π—Ç–∞—Ö (–≥–ª–æ–±–∞–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä, –∏–º–µ–µ—Ç –≤—ã—à–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, —á–µ–º tcp_rmem)<br />
<code>sysctl net.core.wmem_max</code> –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞ –Ω–∞ —Å–æ–∫–µ—Ç–µ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–π—Ç–∞—Ö<br />
<code>sysctl net.core.optmem_max</code> –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä—ë–º –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –±—É—Ñ–µ—Ä–æ–≤ –ø–∞–º—è—Ç–∏<br />
<code>sysctl -w net.core.rmem_max=26214400 &amp;&amp; sysctl -w net.core.rmem_default=26214400</code> —É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 25 –ú–ë–∞–π—Ç<br />
<code>sysctl -w net.core.wmem_max=26214400 &amp;&amp; sysctl -w net.core.wmem_default=26214400</code> —É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 25 –ú–ë–∞–π—Ç<br />
<code>sysctl net.ipv4.tcp_no_metrics_save</code> –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (0) TCP —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤ –∫—ç—à–µ –º–∞—Ä—à—Ä—É—Ç–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ (1) TCP –Ω–µ –±—É–¥–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π<br />
<code>sysctl net.ipv4.icmp_echo_ignore_all</code> –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ, —è–¥—Ä–æ –±—É–¥–µ—Ç –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ icmp –∑–∞–ø—Ä–æ—Å—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç DOS –∞—Ç–∞–∫)<br />
<code>sysctl net.ipv4.icmp_echo_ignore_broadcasts</code> –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã ICMP ECHO, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ —à–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω—ã–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏<br />
<code>sysctl net.ipv4.icmp_ignore_bogus_error_responses</code> –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–æ—á–Ω—ã–µ ICMP –∑–∞–ø—Ä–æ—Å—ã<br />
<code>sysctl net.ipv4.conf.all.accept_source_route</code> —Ä–∞–∑—Ä–µ—à–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –æ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏, –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—É—Ç—å, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –ø–∞–∫–µ—Ç –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–π—Ç–∏ –ø–æ —Å–µ—Ç–∏ Internet, —á—Ç–æ–±—ã –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—å –ø—É–Ω–∫—Ç–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è. –≠—Ç–æ —É–¥–æ–±–Ω–æ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –∏ –æ—Ç–ª–∞–¥–∫–∏ —Ä–∞–±–æ—Ç—ã —Å–µ—Ç–∏, –Ω–æ –Ω–∞—Ä—É—à–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–º–µ–Ω—ã –∞–¥—Ä–µ—Å–æ–≤ –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ –∏ –º–æ–∂–µ—Ç –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –ø–æ–¥—Å—É–Ω—É—Ç—å –ø–æ–¥–¥–µ–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –≤–µ—Å—Ç—å —Ç—Ä–∞—Ñ–∏–∫ —á–µ—Ä–µ–∑ —É–∑–µ–ª, –∫–æ—Ç–æ—Ä—ã–π –æ–Ω –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç (–∞—Ç–∞–∫–∞ Man In The Middle).<br />
<code>sysctl net.ipv4.conf.all.accept_redirects</code> –∑–∞–ø—Ä–µ—Ç–∏—Ç—å(0)/—Ä–∞–∑—Ä–µ—à–∏—Ç—å(1) –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å ICMP –ø–∞–∫–µ—Ç—ã –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è<br />
<code>sysctl net.ipv4.conf.all.send_redirects</code><br />
<code>sysctl net.ipv4.conf.all.secure_redirects</code><br />
<code>sysctl net.ipv4.ip_forward</code> —Ä–∞–∑—Ä–µ—à–∞–µ—Ç (1) –∏–ª–∏ –∑–∞–ø—Ä–µ—â–∞–µ—Ç (0) –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –ø–∞–∫–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ —Ç–µ–∫—É—â–∏–π —Ö–æ—Å—Ç<br />
<code>sysctl net.ipv4.conf.default.forwarding</code> –≤–∫–ª—é—á–∏—Ç—å —Ñ–æ—Ä–≤–∞—Ä–¥–∏–Ω–≥ –ø–∞–∫–µ—Ç–æ–≤ - —Ä–∞–∑—Ä–µ—à–∏—Ç—å —è–¥—Ä—É –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –æ—Å—É—â–µ—Ç—Å–≤–ª—è—Ç—å –ø—Ä–æ–±—Ä–æ—Å —Ç—Ä–∞—Ñ–∏–∫–∞ —Å –æ–¥–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –Ω–∞ –¥—Ä—É–≥–æ–π<br />
<code>sysctl net.ipv4.ip_local_port_range</code> –¥–∏–∞–ø–∞–∑–æ–Ω –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏—Å—Ö–æ–¥—è—â–∏—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π (—Å–æ–∑–¥–∞–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —Å–æ–∫–µ—Ç–æ–≤)<br />
<code>sysctl net.ipv4.tcp_max_tw_buckets</code> –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ —Å–æ–∫–µ—Ç–æ–≤, –Ω–∞—Ö–æ–¥—è—â–∏—Ö—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ TIME-WAIT –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø—Ä–æ—Å—Ç–µ–π—à–∏—Ö —Ä–∞–∑–Ω–æ–≤–∏–¥–Ω–æ—Å—Ç–µ–π DoS-–∞—Ç–∞–∫<br />
<code>sysctl net.ipv4.tcp_tw_recycle</code> —Ä–∞–∑—Ä–µ—à–∞–µ—Ç/–∑–∞–ø—Ä–µ—â–∞–µ—Ç –±—ã—Å—Ç—Ä—É—é —É—Ç–∏–ª–∏–∑–∞—Ü–∏—é —Å–æ–∫–µ—Ç–æ–≤, –Ω–∞—Ö–æ–¥—è—â–∏—Ö—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ TIME-WAIT<br />
<code>sysctl net.ipv4.tcp_tw_reuse</code> –ø–æ–∑–≤–æ–ª—è—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TIME-WAIT —Å–æ–∫–µ—Ç–æ–≤ –≤ —Å–ª—É—á–∞—è—Ö, –µ—Å–ª–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª —Å—á–∏—Ç–∞–µ—Ç —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º<br />
<code>sysctl net.ipv4.tcp_rfc1337</code> –∑–∞—â–∏—Ç–∞ –æ—Ç TIME-WAIT –∞—Ç–∞–∫<br />
<code>sysctl net.ipv4.tcp_max_orphans</code> –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ "–æ—Å–∏—Ä–æ—Ç–µ–≤—à–∏—Ö" TCP —Å–æ–∫–µ—Ç–æ–≤, –Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∫–∞–∫–∏–º-–ª–∏–±–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ñ–∞–π–ª–∞ (user file handle), –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è. –≠—Ç–æ—Ç –ø–æ—Ä–æ–≥ –ø–æ–º–æ–≥–∞–µ—Ç –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—Ç—å –ø—Ä–æ—Å—Ç—ã–µ –∞—Ç–∞–∫–∏ DoS –∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ –û–ó–£, –∫–∞–∂–¥–æ–µ orphan-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ–≥–ª–æ—â–∞–µ—Ç –æ–∫–æ–ª–æ 64 –ö–±–∞–π—Ç –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º–æ–π –Ω–∞ –¥–∏—Å–∫ (unswappable) –ø–∞–º—è—Ç–∏ –∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–±—Ä–æ—à–µ–Ω–∞ –≤ SWAP. –ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å —ç—Ç–∏–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º ‚Äì –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –∂—É—Ä–Ω–∞–ª –±—É–¥–µ—Ç –ø–æ–¥–æ–±–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: TCP: too many of orphaned sockets, –∏ —ç—Ç–æ –º–æ–∂–µ—Ç —Å–ª—É–∂–∏—Ç—å –ø–æ–≤–æ–¥–æ–º –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è tcp_fin_timeout –∏–ª–∏ tcp_orphan_retries.<br />
<code>sysctl -w net.ipv4.tcp_max_orphans=65536</code><br />
<code>sysctl net.ipv4.tcp_orphan_retries</code> —á–∏—Å–ª–æ –ø–æ–ø—ã—Ç–æ–∫ –∑–∞–∫—Ä—ã—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –æ–Ω–æ –±—É–¥–µ—Ç —Ä–∞–∑–æ—Ä–≤–∞–Ω–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏ —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç—Å—è TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –∑–∞–∫—Ä—ã—Ç–æ–µ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ 7, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–∏–æ–¥—É –æ—Ç 50 —Å–µ–∫—É–Ω–¥ –¥–æ 16 –º–∏–Ω—É—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç RTO (Retransmission Timeout).<br />
<code>sysctl net.ipv4.tcp_fin_timeout</code> –∑–∞–¥–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è —Å–æ–∫–µ—Ç–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ FIN-WAIT-2 –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ—Å–ª–∏ –¥—Ä—É–≥–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –Ω–µ –∑–∞–∫—Ä—ã–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å–æ —Å–≤–æ–µ–π —Å—Ç–æ—Ä–æ–Ω—ã. –ö–∞–∂–¥—ã–π —Å–æ–∫–µ—Ç –∑–∞–Ω–∏–º–∞–µ—Ç –≤ –ø–∞–º—è—Ç–∏ 1.5 –ö–±, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–º —É—Ç–µ—á–∫–∞–º –ø–∞–º—è—Ç–∏ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö.<br />
<code>sysctl net.ipv4.tcp_syncookies</code> –ø–æ–º–æ–≥–∞–µ—Ç –∑–∞—â–∏—Ç–∏—Ç—å—Å—è –æ—Ç –∞—Ç–∞–∫ SYN flood, —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è net.ipv4.tcp_max_syn_backlog, –µ—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ SYN –ø–∞–∫–µ—Ç–æ–≤ –∑–∞–±–∏–≤–∞–µ—Ç –≤—Å—é –æ—á–µ—Ä–µ–¥—å, –≤–∫–ª—é—á–∞–µ—Ç—Å—è –º–µ—Ö–∞–Ω–∏–∑–º Syn cookies. SYN cookies –≤–æ–æ–±—â–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—á–µ—Ä–µ–¥—å SYN, –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ —è–¥—Ä–æ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–∞–∂–¥—ã–π SYN –ø–∞–∫–µ—Ç, –∫–∞–∫ –æ–±—ã—á–Ω–æ SYN/ACK, –Ω–æ —Ç—É–¥–∞ –±—É–¥–µ—Ç –≤–∫–ª—é—á–µ–Ω–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ IP –∞–¥—Ä–µ—Å–æ–≤ –∏ –ø–æ—Ä—Ç–æ–≤ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—è, –∞ —Ç–∞–∫–∂–µ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å—ã–ª–∫–∏ –ø–∞–∫–µ—Ç–∞. –ê—Ç–∞–∫—É—é—â–∏–π –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–ª—É—á–∏—Ç —ç—Ç–∏ –ø–∞–∫–µ—Ç—ã, –∞ –ø–æ—ç—Ç–æ–º—É –∏ –Ω–µ –æ—Ç–≤–µ—Ç–∏—Ç –Ω–∞ –Ω–∏—Ö. –ü—Ä–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏, –±—É–¥–µ—Ç –ø–æ—Å–ª–∞–Ω —Ç—Ä–µ—Ç–∏–π –ø–∞–∫–µ—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —á–∏—Å–ª–æ, –∞ —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä–∏—Ç –±—ã–ª –ª–∏ —ç—Ç–æ –æ—Ç–≤–µ—Ç –Ω–∞ SYN cookie –∏, –µ—Å–ª–∏ –¥–∞, —Ç–æ —Ä–∞–∑—Ä–µ—à–∏—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–∞–∂–µ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –≤ –æ—á–µ—Ä–µ–¥–∏ SYN –Ω–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∑–∞–ø–∏—Å–∏.<br />
<code>sysctl net.ipv4.tcp_fastopen</code> –ø–æ–º–æ–≥–∞–µ—Ç —É–º–µ–Ω—å—à–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ —Å–µ—Ç–∏, –ø–æ–∑–≤–æ–ª—è—è –Ω–∞—á–∞—Ç—å –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö —Å—Ä–∞–∑—É –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∫–ª–∏–µ–Ω—Ç–æ–º –ø–µ—Ä–≤–æ–≥–æ TCP SYN (3 - –≤–∫–ª—é—á–∞–µ—Ç –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö –∏ –∏—Å—Ö–æ–¥—è—â–∏—Ö)<br />
<code>sysctl net.ipv4.tcp_max_syn_backlog</code> —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ) –∑–∞–ø–æ–º–∏–Ω–∞–µ–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –ø–æ–ø—ã—Ç–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏ TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (SYN-–ø–∞–∫–µ—Ç–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ Waiting Acknowledgment) –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–º TCP SYN –ø–∞–∫–µ—Ç–∞, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ –±—ã–ª–æ –ø–æ–ª—É—á–µ–Ω–æ —Å–µ—Ä–≤–µ—Ä–æ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ (–ø–æ–ª—É–æ—Ç–∫—Ä—ã—Ç—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π)<br />
<code>sysctl -w net.ipv4.tcp_max_syn_backlog=4096</code> —É–≤–µ–ª–∏—á–∏—Ç—å, –µ—Å–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏<br />
<code>sysctl net.core.somaxconn</code> —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ) –ø–æ–ª—É–æ—Ç–∫—Ä—ã—Ç—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (–æ—Ç–∫—Ä—ã—Ç—ã—Ö —Å–æ–∫–µ—Ç–æ–≤) –æ–∂–∏–¥–∞—é—â–∏—Ö —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –ï—Å–ª–∏ –≤ –æ—Ç–≤–µ—Ç –Ω–∞ SYN-–ø–∞–∫–µ—Ç–∞ (synchronize) –∫–ª–∏–µ–Ω—Ç–æ–º –±—ã–ª –ø–æ–ª—É—á–µ–Ω –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –ø–∞–∫–µ—Ç SYN-ACK (acknowledges), —Å–µ—Ä–≤–µ—Ä –æ–∂–∏–¥–∞–µ—Ç –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ ACK –ø–∞–∫–µ—Ç–∞, –ø–æ—Å–ª–µ —á–µ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º.<br />
<code>sysctl net.ipv4.tcp_syn_retries</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—Ä–µ–¥–∞—á–∏ SYN-–ø–∞–∫–µ—Ç–∞ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –Ω–∞ –∫–∞–∂–¥—É—é –ø–æ–ø—ã—Ç–∫—É –æ—Ç–≤–æ–¥–∏—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ 30-40 —Å–µ–∫—É–Ω–¥. –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é 5 = 180 —Å–µ–∫—É–Ω–¥–∞–º.<br />
<code>sysctl net.ipv4.tcp_synack_retries</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—Ä–µ–¥–∞—á–∏ SYN-ACK-–ø–∞–∫–µ—Ç–∞ –≤ –æ—Ç–≤–µ—Ç –Ω–∞ SYN-–∑–∞–ø—Ä–æ—Å –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞—Å—Å–∏–≤–Ω–æ–≥–æ TCP-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –¥—Ä—É–≥–∏–º —Ö–æ—Å—Ç–æ–º, –µ—Å–ª–∏ —É–º–µ–Ω—å—à–∏—Ç—å –¥–æ –æ–¥–Ω–æ–≥–æ, –±—É–¥–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ 9 —Å–µ–∫—É–Ω–¥<br />
<code>sysctl net.core.netdev_max_backlog</code> —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –ø–∞–∫–µ—Ç–æ–≤ –º–µ–∂–¥—É —Å–µ—Ç–µ–≤–æ–π –∫–∞—Ä—Ç–æ–π –∏ —è–¥—Ä–æ–º, –µ—Å–ª–∏ —è–¥—Ä–æ –Ω–µ —É—Å–ø–µ–≤–∞–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø–∞–∫–µ—Ç—ã (–µ—Å–ª–∏ —Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–ª—É—á–∞–µ—Ç –ø–∞–∫–µ—Ç—ã –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º —è–¥—Ä–æ –º–æ–∂–µ—Ç –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å) –∏ –æ—á–µ—Ä–µ–¥—å –ø–µ—Ä–µ–ø–æ–ª–Ω—è–µ—Ç—Å—è, —Ç–æ –Ω–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã –æ—Ç–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è, –µ—Å–ª–∏ —É–≤–µ–ª–∏—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ, –º–æ–∂–Ω–æ —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å –ø–∏–∫–æ–≤—ã–º–∏ –Ω–∞–≥—Ä—É–∑–∫–∞–º–∏<br />
<code>sysctl -a | grep net.ipv4.tcp_keepalive</code> –ø–æ—Å–ª–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–æ–∫–µ—Ç–∞ –ø–æ—Å—ã–ª–∞–µ—Ç –ø–∞–∫–µ—Ç keepalive –Ω–∞ –≤—Ç–æ—Ä–æ—É—é —Å—Ç–æ—Ä–æ–Ω—É, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –Ω—É–ª–µ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ, –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–µ—Ä–≤–æ–≥–æ –ø–∞–∫–µ—Ç–∞ —á–µ—Ä–µ–∑ –≤—Ä–µ–º—è, —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤ tcp_keepalive_time –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø–∞–∫–µ—Ç—ã —á–µ—Ä–µ–∑ –∫–∞–∂–¥—ã–µ tcp_keepalive_intvl —Å–µ–∫—É–Ω–¥ tcp_keepalive_probes —Ä–∞–∑, –µ—Å–ª–∏ –¥—Ä—É–≥–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç, —Å–æ–∫–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è<br />
<code>tcp_keepalive=$(sysctl -a | grep net.ipv4.tcp_keepalive | grep -Po "(?&lt;=\=\s)[0-9]+")</code> –∑–∞–±—Ä–∞—Ç—å –º–∞—Å—Å–∏–≤ –∑–Ω–∞—á–µ–Ω–∏–π<br />
<code>echo $tcp_keepalive | awk '{print $3+($1*$2)}'</code> 7200+(75*7)<br />
<code>sysctl net.ipv4.conf.all.rp_filter</code> 1 - —Å—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ 2 - —Å–≤–æ–±–æ–¥–Ω—ã–π —Ä–µ–∂–∏–º –ø—Ä–æ–≤–µ—Ä–∫–∏, –≤–∫–ª—é—á–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –ø—É—Ç–∏ (reverse path filter) –∏–ª–∏ –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–º–µ–Ω—ã –∞–¥—Ä–µ—Å–æ–≤ (—Å–ø—É—Ñ–∏–Ω–≥–∞), –≤—Å–µ —á—Ç–æ –ø–æ—Å—Ç—É–ø–∞–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏—Å—Ö–æ–¥—è—â–µ–≥–æ –∞–¥—Ä–µ—Å–∞ —Å —Ç–∞–±–ª–∏—Ü–µ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∏ —Ç–∞–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ–π, –µ—Å–ª–∏ –ø—Ä–∏–Ω—è—Ç—ã–π –ø–∞–∫–µ—Ç –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –ø–µ—Ä–µ–¥–∞—á—É –æ—Ç–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ —Ç–æ—Ç –∂–µ —Å–∞–º—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –ù–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–≥–¥–∞ –≤—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ –∏–¥–µ—Ç —á–µ—Ä–µ–∑ –æ–¥–∏–Ω –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä, –∞ –∏—Å—Ö–æ–¥—è—â–∏–π —á–µ—Ä–µ–∑ –¥—Ä—É–≥–æ–π, –º–æ–≥—É—Ç —Ç–µ—Ä—è—Ç—å—Å—è –ø–∞–∫–µ—Ç—ã, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–±—Ä–∞—Ç–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏, –∑–∞–¥–∞–Ω —á–µ—Ä–µ–∑ –¥—Ä—É–≥–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.<br />
<code>sysctl -w net.ipv4.conf.ens33.rp_filter=1</code> –≤–∫–ª—é—á–∞–µ—Ç —Å—Ç—Ä–æ–≥—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ ens33<br />
<code>sysctl net.ipv4.conf.all.log_martians</code> –≤–∫–ª—é—á–∞–µ—Ç/–æ—Ç–∫–ª—é—á–∞–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤<br />
<code>sysctl net.ipv4.tcp_window_scaling</code> —Ä–∞–∑—Ä–µ—à–∞–µ—Ç/–∑–∞–ø—Ä–µ—â–∞–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ TCP-–æ–∫–Ω–∞, –∫–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –≤ RFC 1323. –ü—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ TCP-–ø–∞–∫–µ—Ç–æ–≤ –ø–æ —Ç–æ–ª—Å—Ç—ã–º –∫–∞–Ω–∞–ª–∞–º –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø–æ—Ç–µ—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –æ–Ω–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ –ø—Ä–∏–µ–º–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ TCP-–æ–∫–Ω–∞. –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ –æ–∫–Ω–æ –Ω–µ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Ä–∞–∑–º–µ—Ä –±–æ–ª—å—à–µ, —á–µ–º 216 –±–∞–π—Ç (65 –ö–±). –†–∞–∑—Ä–µ—à–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ TCP-–æ–∫–Ω–∞ –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –µ–≥–æ —Ä–∞–∑–º–µ—Ä –∏ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º —É–º–µ–Ω—å—à–∏—Ç—å –ø–æ—Ç–µ—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.<br />
<code>sysctl net.ipv4.tcp_retries2</code><br />
<code>sysctl net.ipv4.tcp_abort_on_overflow</code> –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç —è–¥—Ä–æ –æ—Ç–≤–µ—Ä–≥–∞—Ç—å –Ω–æ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –µ—Å–ª–∏ –∏—Ö –ø–æ—Å—Ç—É–ø–∞–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã—à–µ, —Å —á–µ–º —Å–∏—Å—Ç–µ–º–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è<br />
<code>sysctl net.ipv4.ip_nonlocal_bind</code> –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–º –ª–æ–∫–∞–ª—å–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–∞–º –≤—ã—Å—Ç—É–ø–∞—Ç—å –æ—Ç –∏–º–µ–Ω–∏ –≤–Ω–µ—à–Ω–µ–≥–æ (—á—É–∂–æ–≥–æ) IP –∞–¥—Ä–µ—Å–∞, –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è, –∫–æ–≥–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ IP –∞–¥—Ä–µ—Å–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–Ω–∏—Ñ—Ñ–∏–Ω–≥ —á—É–∂–æ–≥–æ —Ç—Ä–∞—Ñ—Ñ–∏–∫–∞<br />
<code>net.ipv4.ipfrag_low_thresh</code> –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä–µ–º –ø–∞–º—è—Ç–∏, –≤—ã–¥–µ–ª—è–µ–º—ã–π –ø–æ–¥ –æ—á–µ—Ä–µ–¥—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç 0 –¥–æ 2147483647, –∫–æ–≥–¥–∞ –¥–ª–∏–Ω–∞ –æ—á–µ—Ä–µ–¥–∏ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç —ç—Ç–æ–≥–æ –ø–æ—Ä–æ–≥–∞, —Ç–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –±—É–¥–µ—Ç –æ—Ç–≤–µ—Ä–≥–∞—Ç—å –≤—Å–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –∏ –ø–æ—Å–ª–µ —É–º–µ–Ω—å—à–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥–∏ –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø–µ—Ä–µ–¥–∞–Ω—ã —É–∑–ª–æ–º-–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–º.<br />
<code>sysctl net.ipv4.netfilter.ip_conntrack_max</code> –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –¥–ª—è —Ä–∞–±–æ—Ç—ã –º–µ—Ö–∞–Ω–∏–∑–º–∞ connection tracking (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ iptables)</p>
<h2 id="limits">limits</h2>
<p><code>cat /etc/security/limits.conf | grep -Ev "^$|^#"</code></p>
<pre><code>&lt;user/@group&gt;  &lt;soft/hard&gt;  &lt;core/rss/as/nproc/cpu&gt;  &lt;value&gt;
@zabbix           soft              nofile          65535 # —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å soft –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –∫–æ–ª-–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤ (nofile) –¥–ª—è –≥—Ä—É–ø–ø—ã zabbix (–º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –≤ –ª—é–±—É—é —Å—Ç–æ—Ä–æ–Ω—É, –ø–æ–∫–∞ –æ–Ω–æ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç hard)
@zabbix           hard              nofile          65535 # –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ hard –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ –≤ –º–µ–Ω—å—à—É—é —Å—Ç–æ—Ä–æ–Ω—É –æ—Ç –∏–º–µ–Ω–∏ –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
*                 soft              nofile          2048 # –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (-n)
*                 hard              nofile          8192
zabbix            soft              as              100 # –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª-–≤–æ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –≤ –ö–ë (-m)
zabbix            hard              as              100
*                 soft              msgqueue        unlimited # —Å–Ω—è—Ç–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–∞–º—è—Ç–∏ (-q)
*                 hard              msgqueue        unlimited
*                 soft              nproc           unlimited # –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (-u)
*                 hard              nproc           unlimited
user              hard              maxlogins       1 # –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ SSH-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π/—Å–µ—Å—Å–∏–π –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ–∞–Ω—Å–æ–≤ SSH –ø–æ–¥ –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)
*                 hard              maxsyslogins    1 # –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ–∞–Ω—Å–æ–≤/–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π SSH (–∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º root)
</code></pre>
<p><code>ulimit -a</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π</p>
<pre><code>core file size              (blocks, -c) 0
data seg size               (kbytes, -d) unlimited
scheduling priority                 (-e) 0
file size                   (blocks, -f) unlimited
pending signals                     (-i) 15052
max locked memory           (kbytes, -l) 496180
max memory size             (kbytes, -m) unlimited
open files                          (-n) 1024
pipe size                (512 bytes, -p) 8
POSIX message queues         (bytes, -q) 819200
real-time priority                  (-r) 0
stack size                  (kbytes, -s) 8192
cpu time                   (seconds, -t) unlimited
max user processes                  (-u) 15052
virtual memory              (kbytes, -v) unlimited
file locks                          (-x) unlimited
</code></pre>
<p><code>ulimit -Sn</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Soft (-S) –¥–ª—è nofile (-n)<br />
<code>ulimit -Hn</code> –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ Hard (-H)<br />
<code>ulimit -n 3000</code> –∏–∑–º–µ–Ω–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤ –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ (–¥–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏)<br />
<code>ulimit -Sm 1500000</code> –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ soft (-S) –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ (-m) –≤ 1500 –ú–± –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br />
<code>ulimit -u 5000</code> –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (-u)<br />
<code>ulimit -s</code> –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –º–µ—Å—Ç–∞ –¥–ª—è —Ä–∞–∑–º–µ—Ä–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ (stack size) –∫–æ–º–∞–Ω–¥—ã/—Å–∫—Ä–∏–ø—Ç–∞ (bash: /usr/bin/diff: Argument list too long)<br />
<code>ulimit -m</code> –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä–µ–º –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏<br />
<code>ulimit -v</code> –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏<br />
<code>ulimit -f</code> –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤<br />
<code>ulimit -t</code> –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏</p>
<p><code>systemctl edit rsyslog</code> –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ Unit –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞</p>
<pre><code>[Service]
LimitNOFILE=1617596
LimitNOFILESoft=1617596
</code></pre>
<p><code>systemctl restart rsyslog</code><br />
<code>pid=$(ps -A | grep rsyslogd | awk '{print $1}')</code> –ø–æ–ª—É—á–∏—Ç—å pid –ø—Ä–æ—Ü–µ—Å—Å–∞<br />
<code>cat /proc/$pid/limits</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞</p>
<h2 id="quota">quota</h2>
<p><code>nano /etc/fstab</code> –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–≤–æ—Ç—É —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏</p>
<pre><code>/dev/sda  /  ext4  defaults,usrquota,grpquota  0 0
</code></pre>
<p><code>mount -o remount,rw /</code> –ø–µ—Ä–µ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É –≤ —Ä–µ–∂–∏–º–µ read and write<br />
<code>mount | grep quota</code><br />
<code>quotacheck -favugm</code> –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞–ª–∏—á–∏—è —Å–ª—É–∂–µ–±–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ aquota.user –∏ aquota.group ‚Äî –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç, –∫–æ–º–∞–Ω–¥–∞ –∏—Ö —Å–æ–∑–¥–∞—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏<br />
<code>quotaon -avug</code> –≤–∫–ª—é—á–∏—Ç—å –∫–≤–æ—Ç—É<br />
<code>edquota -u lifailon</code> —Å–æ–∑–¥–∞—Ç—å –∫–≤–æ—Ç—É –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –¥–ª—è –≥—Ä—É–ø–ø—ã (-g) –Ω–∞ —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –∏ –∫–æ–ª-–≤–æ —Ñ–∞–π–ª–æ–≤</p>
<pre><code>Disk quotas for user lifailon (uid 1000):
  Filesystem                            blocks       soft       hard     inodes     soft     hard
  /dev/mapper/ubuntu--vg-ubuntu--lv     397112       400M       500M      3004       0        0
</code></pre>
<p><code>edquota -p lifailon user</code> —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–≤–æ—Ç—É –Ω–∞ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br />
<code>edquota -t</code> –∏–∑–º–µ–Ω–∏—Ç—å –ø–µ—Ä–∏–æ–¥ –æ—Ç—Å—Ä–æ—á–∫–∏ soft –∫–≤–æ—Ç—ã –¥–æ –º–æ–º–µ–Ω—Ç–∞, –∫–æ–≥–¥–∞ –æ–Ω–∞ —Å—Ç–∞–Ω–µ—Ç hard (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 7 –¥–Ω–µ–π)<br />
<code>quota lifailon -s</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–≤–æ—Ç—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br />
<code>repquota -us /</code> –æ—Ç—á–µ—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –≥—Ä—É–ø–ø (-u/-g), —Ç–µ–∫—É—â–∏–π used –∏ soft/hard –¥–ª—è Space limits –∏ File limits, +-/-+/++ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–¥–∏–Ω –∏–∑ –ø—Ä–µ–¥–µ–ª–æ–≤ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –º–∞–∫—Å–∏–º—É–º–∞</p>
<pre><code>lifailon  --     388M     400M     500M     3004     0     0
</code></pre>
<p><code>su lifailon</code><br />
<code>dd if=/dev/zero of=/tmp/test.file bs=1024000 count=400</code> —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª —Ä–∞–∑–º–µ—Ä–æ–º 400MB</p>
<pre><code>dd: error writing '/tmp/test.file': Disk quota exceeded
117645312 bytes (118 MB, 112 MiB) copied, 0.158031 s, 744 MB/s
</code></pre>
<p><code>ls -lh /tmp/test.file</code></p>
<pre><code>-rw-rw-r-- 1 lifailon lifailon 113M Sep 26 14:37 /tmp/test.file
</code></pre>
<h2 id="networkmanager">networkmanager</h2>
<p><code>apt install network-manager</code><br />
<code>systemctl status NetworkManager</code><br />
<code>nmcli device status</code> —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤<br />
<code>nmcli general status</code><br />
<code>nmcli connection show</code> —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π (ethernet, vpn –∏ WiFi-—Å–µ—Ç–µ–π)<br />
<code>nmcli device wifi list</code> —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö Wi-Fi-—Å–µ—Ç–µ–π<br />
<code>nmcli connection show "–ü—Ä–æ–≤–æ–¥–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ 2"</code> –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ç–∏<br />
<code>nmcli connection up "–ü—Ä–æ–≤–æ–¥–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ 2"</code> –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è<br />
<code>nmcli conn down "–ü—Ä–æ–≤–æ–¥–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ 2"</code> –æ—Ç–∫–ª—é—á–∏—Ç—å—Å—è<br />
<code>nmcli radio wifi</code> —Å–æ—Å—Ç–æ—è–Ω–∏–µ Wi-Fi<br />
<code>nmcli connection add con-name "dhcp" type ethernet ifname ens33</code> —Å–æ–∑–¥–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, –ø–µ—Ä–µ–¥–∞—Ç—å —Ç–∏–ø —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ ethernet (–ü—Ä–æ–≤–æ–¥–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ) –∏ ifname, –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞<br />
<code>nmcli conn modify "dhcp" ipv4.dns 8.8.8.8</code> –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (modify)<br />
<code>nmcli radio wifi on</code> –≤–∫–ª—é—á–∏—Ç—å –∏–ª–∏ –≤—ã–∫–ª—é—á–∏—Ç—å (off) Wi-Fi<br />
<code>nmcli device wifi connect "TP-Link" password 12345678 name "TP-Link Wifi"</code> –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Wi-Fi —Å–µ—Ç–∏<br />
<code>nmcli networking off</code> –æ—Ç–∫–ª—é—á–∏—Ç—å —Å–µ—Ç—å —á–µ—Ä–µ–∑ (–µ—Å–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Network Manager, —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –±–ª–æ–∫–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ renderer –¥–ª—è netplan)<br />
<code>nmcli networking on</code> –≤–∫–ª—é—á–∏—Ç—å —Å–µ—Ç—å<br />
<code>systemctl restart NetworkManager</code></p>
<h2 id="wireless">wireless</h2>
<p><code>apt install wireless-tools</code><br />
<code>iwconfig</code><br />
<code>apt install iw</code><br />
<code>iw list</code><br />
<code>apt install wavemon</code><br />
<code>wavemon</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏ –º–æ—â–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–∞</p>
<h2 id="networking">networking</h2>
<p><code>nano /etc/network/interfaces</code></p>
<p><code>auto ens33</code> –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ<br />
<code>iface ens33 inet static</code> —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π<br />
<code>address 192.168.1.50/24</code><br />
<code>#netmask 255.255.255.0</code><br />
<code>gateway 192.168.1.254</code><br />
<code>dns-nameservers 8.8.8.8 1.1.1.1</code></p>
<p><code>auto ens33</code><br />
<code>iface ens33 inet dhcp</code> –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π</p>
<p><code>service networking restart</code> –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Ç–∏<br />
<code>systemctl restart networking.service</code></p>
<h2 id="netplan">netplan</h2>
<p><code>netplan --debug generate</code> –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–∞ –æ—à–∏–±–∫–∏<br />
<code>netplan apply</code> –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è (–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ç—å)<br />
<code>netplan get</code> –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é</p>
<p><code>nano /etc/netplan/*.yaml</code></p>
<ul>
<li>–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–≤–∞ —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞):</li>
</ul>
<pre><code class="language-yaml">network:
  version: 2
  ethernets:
    ens33:
      dhcp4: yes
    ens36:
      dhcp4: yes
</code></pre>
<ul>
<li>–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å:</li>
</ul>
<pre><code class="language-yaml">network:
  version: 2
  renderer: networkd
  ethernets:
    ens33:
      dhcp4: no
      addresses: [192.168.3.105/24]
      routes:
        - to: default
          via: 192.168.3.1
      nameservers:
        addresses: [192.168.3.101, 8.8.8.8, 1.1.1.1]
        search: [domain.local]
</code></pre>
<p>renderer —É–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–æ–º—É –ø–µ—Ä–µ–¥–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ç—å—é NetworkManager (nmcli) –≤ —Å—Ä–µ–¥–∞—Ö —Å –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –∏–ª–∏ networkd (networkctl)</p>
<p><code>netplan status</code> –≤ —Ä–µ–ª–∏–∑–µ netplan 0.106 –æ—Ç —Ñ–µ–≤—Ä–∞–ª—è 2023 (Ubuntu 23.04) –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ renderer</p>
<ul>
<li>MAC –∏ MTU:</li>
</ul>
<pre><code class="language-yaml">network:
  ethernets:
    ens33:
      dhcp4: no
      match:
        macaddress: 54:43:32:21:10:09
        mtu: 1500
</code></pre>
<ul>
<li>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WiFi:</li>
</ul>
<pre><code class="language-yaml">network:
  version: 2
  wifis:
    wlp33:
      dhcp4: yes
      dhcp6: no
      nameservers:
        addresses: [8.8.8.8]
      access-points:
        &quot;wifi-ssid&quot;:
          password: &quot;12345678&quot;
</code></pre>
<ul>
<li>Bonding –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –≤ –æ–¥–∏–Ω –ª–æ–≥–∏—á–µ—Å–∫–∏–π:</li>
</ul>
<pre><code class="language-yaml">network:
  version: 2
  ethernets:
    ens33: {}
    ens36: {}
  bonds:
    bond0:
      dhcp4: no
        interfaces:
          - ens33
          - ens36
          parameters:
            mode: active-backup # –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –≤—Ç–æ—Ä–æ–π –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –≤ —Å–ª—É—á–∞–µ –Ω–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø–µ—Ä–≤–æ–≥–æ
            mode: broadcast # –∑–∞–¥–µ–π—Å—Ç–≤—É—é—Ç—Å—è –æ–±–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –ø–∞–∫–µ—Ç—ã –ø–µ—Ä–µ–¥–∞—é—Ç –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
            mode: balance-rr # –∑–∞–¥–µ–π—Å—Ç–≤—É—é—Ç—Å—è –æ–±–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–æ –æ—á–µ—Ä–µ–¥–∏ —Å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –ø–∞–∫–µ—Ç–æ–≤
            mode: balance-tlb # –∑–∞–¥–µ–π—Å—Ç–≤—É—é—Ç—Å—è –æ–±–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–æ –æ—á–µ—Ä–µ–¥–∏, –ø–∞–∫–µ—Ç—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ç–µ–∫—É—â–µ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π
            mode: balance-xor # –∑–∞–¥–µ–π—Å—Ç–≤—É—é—Ç—Å—è –æ–±–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–æ –æ—á–µ—Ä–µ–¥–∏, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª–∏—Ç–∏–∫–∏ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
          addresses:
            - 192.168.1.150/24
          gateway4: 192.168.1.1
          mtu: 1500
          nameservers:
            addresses:
              - 8.8.8.8
</code></pre>
<h2 id="ip">ip</h2>
<p><code>ip a</code> ip addr show<br />
<code>ip -s link</code> –≤—ã–≤–µ—Å—Ç–∏ —Å—Ç–∏—Ç—Å—Ç–∏–∫—É –≤—Å–µ—Ö —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤<br />
<code>ip -br a show</code> –≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, —Å—Ç–∞—Ç—É—Å —Ä–∞–±–æ—Ç—ã –∏ ip-–∞–¥—Ä–µ—Å<br />
<code>ip link set dev ens33 up</code> –≤–∫–ª—é—á–∏—Ç—å —Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å<br />
<code>ip link set dev ens33 down</code> –≤—ã–∫–ª—é—á–∏—Ç—å —Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å <br />
<code>ip link set mtu 1550 dev ens33</code> –∏–∑–º–µ–Ω–∏—Ç—å mtu<br />
<code>ip link set dev ens33 address AA:BB:CC:DD:EE:FF</code> –∏–∑–º–µ–Ω–∏—Ç—å mac-–∞–¥—Ä–µ—Å (–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏)<br />
<code>ip addr add 192.168.3.106/24 broadcast 192.168.3.255 dev ens33</code> –¥–æ–±–∞–≤–∏—Ç—å –∞–¥—Ä–µ—Å<br />
<code>ip addr del 192.168.3.106/24 dev ens33</code> —É–¥–∞–ª–∏—Ç—å –∞–¥—Ä–µ—Å<br />
<code>ip route show</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏<br />
<code>ip route add 192.168.4.0 via 192.168.3.100</code> –¥–æ–±–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç<br />
<code>ip route del 192.168.4.0 via 192.168.3.100</code> —É–¥–∞–ª–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç<br />
<code>ip route add 192.168.4.0 dev ens33</code> —É–∫–∞–∑–∞—Ç—å —Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–∞–∫–µ—Ç—ã –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –ø–æ–¥—Å–µ—Ç—å<br />
<code>ip neigh show</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å ARP-—Ç–∞–±–ª–∏—Ü—É<br />
<code>ip neigh add 192.168.3.110 lladdr b0:be:76:43:21:41 dev ens33</code><br />
<code>ip neigh del dev end33 192.168.3.110</code><br />
<code>ip neigh flush</code> –æ—á–∏—Å—Ç–∏—Ç—å ARP-—Ç–∞–±–ª–∏—Ü—É</p>
<h3 id="net-tools">net-tools</h3>
<p><code>ifconfig ens33</code> up/down<br />
<code>ifdown -a</code> –≤—ã–∫–ª—é—á–∏—Ç—å –≤—Å–µ —Å–µ—Ç–µ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (–ø—Ä–æ–ø–∞–¥—É—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ ifconfig) –∏ –≤–∫–ª—é—á–∏—Ç—å (ifup -a)<br />
<code>ifconfig ens33 192.168.3.106 netmask 255.255.255.0 broadcast 192.168.3.255</code><br />
<code>ifconfig -s || netstat -i</code> —Å–ø–∏—Å–æ–∫ —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤<br />
<code>netstat -atu</code> ALL (-a) tcp (-t) –∏ udp (-u)<br />
<code>netstat -lntup</code> LISTEN (-l) dont resolve names (-n) –∏ —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é /proc –¥–ª—è –≤—ã–≤–æ–¥–∞ PID/Program name (-p)<br />
<code>arp -a</code> —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è ip –∏ mac –∞–¥—Ä–µ—Å–æ–≤<br />
<code>route -e</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏<br />
<code>route add -net 192.168.4.0 netmask 255.255.255.0 gw 192.168.3.100</code> –¥–æ–±–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç –≤ –ø–æ–¥—Å–µ—Ç—å 192.168.4.0 —á–µ—Ä–µ–∑ —à–ª—é–∑ 192.168.3.100<br />
<code>route del -net 192.168.4.0 netmask 255.255.255.0</code> —É–¥–∞–ª–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç</p>
<h3 id="networkd">networkd</h3>
<p><code>systemctl status systemd-networkd</code><br />
<code>networkctl list</code> —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–¥–∞–ø—Ç–µ—Ä–æ–≤, —Ç–∏–ø –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è<br />
<code>networkctl status</code> —Å—Ç–∞—Ç—É—Å —Å–ª—É–∂–±—ã, Address –∏ Gateway –∞–¥–∞–ø—Ç–µ—Ä–∞, DNS-–∞–¥—Ä–µ—Å–∞ –∏ –ª–æ–≥ systemd-networkd<br />
<code>networkctl status ens33</code> —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∞–¥–∞–ø—Ç–µ—Ä–∞ (Network File, Driver, Vendor, Model, MTU, Speed)</p>
<h2 id="ss">ss</h2>
<p><code>ss -a</code> All –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ —Å–æ–∫–µ—Ç—ã<br />
<code>ss -l</code> –ø–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–µ–º—ã–µ —Å–æ–∫–µ—Ç—ã (LISTEN)<br />
<code>ss -t</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–æ–ª—å–∫–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (ESTAB/ESTABLISHED)<br />
<code>ss -ua</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ UDP —Å–æ–∫–µ—Ç—ã<br />
<code>ss -da</code> DHCP —Å–æ–∫–µ—Ç—ã<br />
<code>ss -x</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–µ UNIX —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è<br />
<code>ss -r</code> Resolve, –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Å–µ—Ç–µ–≤—ã–µ –∏–º–µ–Ω–∞ –∞–¥—Ä–µ—Å–æ–≤ —Å –ø–æ–º–æ—â—å—é DNS<br />
<code>ss -p</code> Processes, –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ —Å–æ–∫–µ—Ç<br />
<code>ss -n</code> Numeric –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –∏–º–µ–Ω–∞ —Å–ª—É–∂–± (–æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–æ–º–µ—Ä –ø–æ—Ä—Ç–∞ –≤ —á–∏—Å–ª–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ)<br />
<code>ss -ltp | grep 8080</code><br />
<code>ss -tna | grep 22</code></p>
<h2 id="dns">dns</h2>
<h3 id="resolv">resolv</h3>
<p><code>cat /etc/resolv.conf | grep nameserver</code><br />
<code>nano /etc/resolv.conf</code> —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏<br />
<code>domain domain.local</code><br />
<code>search domain.local</code><br />
<code>nameserver 8.8.8.8</code><br />
<code>nameserver 1.1.1.1</code></p>
<h3 id="resolved">resolved</h3>
<p><code>networkctl status</code> –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ DNS-—Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ —á–µ—Ä–µ–∑ netplan (–∏–ª–∏ –¥—Ä—É–≥–æ–µ) –¥–ª—è –≤—Å–µ—Ö –∞–¥–∞–ø—Ç–µ—Ä–æ–≤<br />
<code>resolvectl status</code> –≤ systemd 239 (ubuntu 22.04) systemd-resolve –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ resolvectl, –≤—ã–≤–æ–¥–∏—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è global –∏ —Å–ø–∏—Å–æ–∫ –≤—Å–µ –∞–¥—Ä–µ—Å–æ–≤ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ Link (ens33)<br />
<code>resolvectl status | grep "Current DNS"</code> –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ DNS-—Å–µ—Ä–≤–µ—Ä<br />
<code>systemd-resolve --status</code> —Å–ª—É–∂–±–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ DNS —Å–µ—Ä–≤–µ—Ä–∞<br />
<code>resolvectl flush-caches &amp;&amp; systemd-resolve --flush-caches</code> –æ—á–∏—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à DNS<br />
<code>journalctl -u systemd-resolved | grep -E "IN A|IN PTR|IN AAAA|IN PTR|IN MX"</code> –ª–æ–≥–∏ –∫—ç—à–∞ DNS<br />
<code>systemctl status systemd-resolved</code> —Å—Ç–∞—Ç—É—Å —Å–ª—É–∂–±—ã –∏ –µ–≥–æ –ª–æ–≥<br />
<code>cat /run/systemd/resolve/stub-resolv.conf</code> —Ñ–∞–π–ª-–∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è –¥–µ–º–æ–Ω–∞ systemd-resolved, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é nameserver 127.0.0.53, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É DNS —Å–µ—Ä–≤–µ—Ä—É, –∞ –æ–Ω, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å —É–∂–µ –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ—Ç –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ</p>
<p><code>nano /etc/systemd/resolved.conf</code> –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫—É DNS-—Å–µ—Ä–≤–µ—Ä–æ–≤</p>
<p>–í–∫–ª—é—á–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:</p>
<pre><code>[Resolve]
DNS=8.8.8.8, 192.168.3.101
Cache=yes
</code></pre>
<p><code>ln -svi /run/systemd/resolve/resolv.conf /etc/resolv.conf</code> —Å–æ–∑–¥–∞—Ç—å —Å–∏–º–ª–∏–Ω–∫ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã–µ –≤—ã–∑–æ–≤—ã, –∞ –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ DNS —Å–µ—Ä–≤–µ—Ä–∞–º –Ω–∞–ø—Ä—è–º—É—é, –ø–æ–ª—É—á–∞—è –∏—Ö –∏–∑ <code>/etc/resolv.conf</code><br />
<code>ls -la /etc/resolv.conf</code></p>
<p><code>nano /etc/resolv.conf</code> –Ω–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é —Å–ª—É–∂–±–æ–π systemd-resolved, –∞ –∏–Ω–æ–≥–¥–∞ —Å –ø–æ–º–æ—â—å—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è initscripts –∏–ª–∏ NetworkManager, –∏ –ª—é–±—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω—ã —á–µ—Ä–µ–∑ –≤—Ä–µ–º—è –∏–ª–∏ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏</p>
<pre><code>nameserver 8.8.8.8
</code></pre>
<p><code>apt install resolvconf</code> —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∞ –∞–¥—Ä–µ—Å–æ–≤ –≤ /etc/resolv.conf (—á—Ç–æ –±—ã –æ–Ω –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–ª—Å—è)<br />
<code>systemctl status resolvconf</code></p>
<p><code>nano /etc/resolvconf/resolv.conf.d/head</code></p>
<pre><code>nameserver 8.8.8.8
nameserver 1.1.1.1
</code></pre>
<h3 id="dig">dig</h3>
<p><code>dig</code><br />
<code>dig google.com</code><br />
<code>dig @1.1.1.1 google.com a</code> –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DNS —Å–µ—Ä–≤–µ—Ä Cloudflare –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∏–º–µ–Ω–∏<br />
<code>dig @9.9.9.9 google.com mx</code> –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DNS —Å–µ—Ä–≤–µ—Ä Quad9 –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è MX –∑–∞–ø–∏—Å–∏ (A, NS, TXT)<br />
<code>dig -x 8.8.8.8 @9.9.9.9</code> —Ä–∞–∑—Ä–µ—à–∏—Ç—å ip –≤ –∏–º—è</p>
<h3 id="mtr">mtr</h3>
<p><code>mtr google.com</code> –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç traceroute –∏ ping –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞ –≤ —Ç—Ä–∞—Å—Å–µ—Ä–æ–≤–∫–µ<br />
<code>mtr -I ens33 google.com</code> —É–∫–∞–∑–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏<br />
<code>mtr -b google.com</code> –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –∏–º—è –∏ ip<br />
<code>mtr --tcp google.com</code> –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TCP SYN-–ø–∞–∫–µ—Ç—ã –∏–ª–∏ UDP-–¥–µ–π—Ç–∞–≥—Ä–∞–º–º—ã (--udp)<br />
<code>mtr -s 1000 google.com</code> —É–∫–∞–∑–∞—Ç—å —Ä–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞<br />
<code>mtr -r -c 1 google.com --json</code> —É–∫–∞–∑–∞—Ç—å –∫–æ–ª-–≤–æ ping –ø–∞–∫–µ—Ç–æ–≤ (-c 1 –∏ -i 2 –∏–∑–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª) –∏ –≤—ã–≤–µ—Å—Ç–∏ –≤ –≤–∏–¥–µ –æ—Ç—á–µ—Ç–∞ (--report) –≤ —Ñ–æ—Ä–º–∞—Ç–µ json/xml/csv/raw</p>
<h2 id="vnstat">vnstat</h2>
<p><code>apt install vnstat</code> –∂—É—Ä–Ω–∞–ª —á–∞—Å–æ–≤–æ–≥–æ, –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –∏ –µ–∂–µ–º–µ—Å—è—á–Ω–æ–≥–æ —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞<br />
<code>systemctl status vnstat</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ª—É–∂–±—É<br />
<code>vnstat -l</code> –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ<br />
<code>vnstat -h</code> –µ–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ø–æ—á–∞—Å–æ–≤–∞—è –∏—Å—Ç–æ—Ä–∏—è</p>
<h2 id="netcat">netcat</h2>
<p><code>nc -zv 192.168.3.100 5985</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç –±–µ–∑ –ø–æ–ø—ã—Ç–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (-z) –≤ –ø–æ–¥—Ä–æ–±–Ω–æ–º —Ä–µ–∂–∏–º–µ (-v)<br />
<code>nc -zvn 192.168.3.100 1-1000</code> —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ tcp-–ø–æ—Ä—Ç–æ–≤, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ DNS (-n)<br />
<code>nc -zvn 192.168.3.100 1-1000 2&gt;&amp;1 | grep succeeded</code> –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –≤—ã–≤–æ–¥ –æ—à–∏–±–æ–∫ –≤ stdout –∏ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –≤—ã–≤–æ–¥<br />
<code>nc -zvnu 192.168.3.100 5550-5560</code> —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ udp-–ø–æ—Ä—Ç–æ–≤ (-u)<br />
<code>nc -lp 8081</code> –æ—Ç–∫—Ä—ã—Ç—å —Å–æ–∫–µ—Ç (—á–∞—Ç —Å–µ—Ä–≤–µ—Ä) –≤ —Ä–µ–∂–∏–º–µ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è (-listen) —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –Ω–æ–º–µ—Ä–∞ –ø–æ—Ä—Ç–∞ (-p)<br />
<code>nc 192.168.3.101 8081</code> –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–æ–∫–µ—Ç—É (—á–∞—Ç-–∫–ª–∏–µ–Ω—Ç)<br />
<code>nc -lp 8081 &gt; out.txt</code> –≤—Å–µ –ø–æ—Å—Ç—É–ø–∏–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–æ–∫–µ—Ç –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª (–≤–º–µ—Å—Ç–æ –≤—ã–≤–æ–¥–∞ –≤ –∫–æ–Ω—Å–æ–ª—å)<br />
<code>cat /etc/passwd | nc -N 192.168.3.101 8081</code> –ø–µ—Ä–µ–¥–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–æ–∫–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—é—â–µ–π —Å—Ç–æ—Ä–æ–Ω—ã (—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ /etc/passwd –∑–∞–ø–∏—à–µ—Ç—Å—è –≤ out.txt) –∏ –∑–∞–∫—Ä—ã—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–æ–∫–µ—Ç (-N)<br />
<code>nc -l -w 1 -p 8081</code> –∑–∞–¥–∞—Ç—å timeout (-w) –æ–∂–∏–¥–∞–Ω–∏—è, –≤ —Ç–µ—á–µ–Ω–∏–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–µ—Ä–≤–µ—Ä —Å–ª—É—à–∞–µ—Ç –∑–∞–ø—Ä–æ—Å, –µ—Å–ª–∏ –±—É–¥–µ—Ç 0, –º–æ–∂–µ—Ç –Ω–µ —É—Å–ø–µ—Ç—å —Å—á–∏—Ç–∞—Ç—å –∑–∞–ø—Ä–æ—Å, –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ timeout –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –Ω–∏–∂–µ<br />
<code>nc -w 5 -Uvl server.sock &gt; out.txt</code> —Å–æ–∑–¥–∞—Ç—å UNIX-—Å–æ–∫–µ—Ç –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –≤—ã–≤–æ–¥ –≤ —Ñ–∞–π–ª, —Å–æ–∫–µ—Ç –∑–∞–∫—Ä–æ–µ—Ç—Å—è —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥ (-w 5) –∏–ª–∏ –µ—Å–ª–∏ –±—É–¥–µ—Ç –∑–∞–¥–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä -N –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞<br />
<code>lsblk | nc -Uv server.sock</code> –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É —Å–æ–∫–µ—Ç—É —Å –≤—Ç–æ—Ä–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã –≤ —Ñ–∞–π–ª —Å–æ–∫–µ—Ç–∞ –ø—Ä–∏–µ–º–∞<br />
<code>while true; do echo -e "HTTP/1.1 200 OK\n\n$(systemd-analyze plot)" | nc -l -w 1 -p 8085; done</code> HTTP-—Å–µ—Ä–≤–µ—Ä —Å –≤—ã–≤–æ–¥–æ–º –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã</p>
<h3 id="api">api</h3>
<pre><code class="language-bash">port=8085
while true
do
    request=$(nc -l -w 1 -p $port)
    request=$(echo &quot;$request&quot; | head -n 1)
    method=$(echo &quot;$request&quot; | cut -d &quot; &quot; -f 1)
    endpoint=$(echo &quot;$request&quot; | cut -d &quot; &quot; -f 2)
    if [[ $endpoint == &quot;/api/date&quot; ]]
        then
        response=&quot;HTTP/1.1 200 OK\nContent-Type: application/text\n\n$(date)&quot;
    elif [[ $endpoint == &quot;/api/disk&quot; ]]
        then
        response=&quot;HTTP/1.1 200 OK\nContent-Type: application/json\n\n$(lsblk -e7 --json)&quot;
    else
        response=&quot;HTTP/1.1 404 Not Found\n\n404 Not Found\n&quot;
    fi
    echo -e &quot;$response&quot; | nc -l -w 1 -p $port
done
</code></pre>
<p>curl -s http://192.168.3.101:8085/api/date<br />
curl -s http://192.168.3.101:8085/api/disk | jq .blockdevices[]</p>
<h3 id="proxy">proxy</h3>
<p><code>ncat -l 8080 -k --sh-exec "ncat 192.168.3.101 80"</code><br />
<code>socat TCP-LISTEN:8080,fork,reuseaddr TCP:192.168.3.101:80</code></p>
<h2 id="nmap">nmap</h2>
<p><code>nmap localhost</code> —É–∑–Ω–∞—Ç—å –∫–∞–∫–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—é—Ç—Å—è<br />
<code>nmap -sV localhost</code> –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞–∫–æ–µ –∫–∞–∫–∞—è –û–° –∏ –ü–û —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç–∞—Ö –∏ –∏—Ö –≤–µ—Ä—Å–∏—è<br />
<code>nmap -sL 192.168.3.0/24</code> —Å–ø–∏—Å–æ–∫ —Ö–æ—Å—Ç–æ–≤ —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º –∏–º–µ–Ω –±–µ–∑ –ø–∏–Ω–≥–∞<br />
<code>nmap -sP 192.168.3.0/24</code> ping –º–µ—Ç–æ–¥ host discovery (TCP ACK SYN –ø–∞–∫–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É—è —Å–∏—Å—Ç–µ–º–Ω—ã–µ–π –≤—ã–∑–æ–≤ connect) —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è —Å–µ—Ç–µ–≤–æ–π –ø–ª–∞—Ç—ã<br />
<code>nmap -F 192.168.3.0/24</code> fast mode port<br />
<code>nmap -A 192.168.3.100</code> –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –û–° –∏ –ü–û (ssh –Ω–∞ –¥—Ä—É–≥–æ–º –ø–æ—Ä—Ç—É, version, ad sites, rdp-ntlm-info)<br />
<code>nmap -sA 192.168.3.100</code> –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–∞–∫–µ—Ç–æ–≤ fw (filtered/unfiltered) —Å –ø–æ–º–æ—â—å—é TCP ACK<br />
<code>nmap -PN 192.168.3.100</code> —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –∑–∞—â–∏—â–µ–Ω–Ω–æ–≥–æ —Ö–æ—Å—Ç–∞ –±–µ–∑ ping<br />
<code>nmap -sO 192.168.3.100</code> –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ IP-–ø—Ä–æ—Ç–æ–∫–æ–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å, –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –∑–Ω–∞—á–∏—Ç —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç—Å—è<br />
<code>nmap -PU 192.168.3.100</code> –æ–±–æ–π—Ç–∏ –º–µ–∂—Å–µ—Ç–µ–≤–æ–π —ç–∫—Ä–∞–Ω —Å –ø–æ–º–æ—â—å—é UDP-–ø–∏–Ω–≥–∞<br />
<code>nmap -sS 192.168.3.100</code> –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª—É–æ—Ç–∫—Ä—ã—Ç–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (TCP SYN) –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è<br />
<code>nmap -sU 192.168.3.100</code> –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ UDP-–ø–æ—Ä—Ç–æ–≤</p>
<h3 id="rustscan">rustscan</h3>
<p><code>wget https://github.com/RustScan/RustScan/releases/download/2.0.1/rustscan_2.0.1_amd64.deb</code>snap install nmap<code>—Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏</code>apt-get install -f<code>—Ä–∞–∑—Ä–µ—à–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏</code>dpkg --install rustscan_2.0.1_amd64.deb<code></code>rustscan -a 127.0.0.1<code></code>rustscan -a 192.168.3.100` 32400/tcp open plex</p>
<h2 id="tcpdump">tcpdump</h2>
<p><code>tcpdump -D</code> —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤<br />
<code>tcpdump -n -i ens33 icmp</code> —Å–ª—É—à–∞—Ç—å icmp-–ø–∞–∫–µ—Ç—ã –æ—Ç –≤—Å–µ—Ö –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ (-i) –±–µ–∑ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ–º–µ–Ω–Ω—ã—Ö –∏–º–µ–Ω (-n)<br />
<code>tcpdump -n -i ens33 udp -e</code> —Å–ª—É—à–∞—Ç—å udp-–ø–∞–∫–µ—Ç—ã –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å MAC-–∞–¥—Ä–µ—Å–∞ (-e)<br />
<code>tcpdump -n -i ens33 port 8080</code> —Å–ª—É—à–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫ 8080 –ø–æ—Ä—Ç–∞<br />
<code>tcpdump -n -i ens33 port 80 or 443</code><br />
<code>tcpdump -n -i ens33 portrange 21-80</code><br />
<code>tcpdump -n -i ens33 ip src 192.168.3.99 and dst 192.168.3.103</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å ip –ø–∞–∫–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã —Å —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ (src) ip-–∞–¥—Ä–µ—Å–∞ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π (dst) ip-–∞–¥—Ä–µ—Å<br />
<code>tcpdump -n -i ens33 -X host 192.168.3.100 and port 32400</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–∫–µ—Ç–æ–≤ (-X) –¥–ª—è —Ö–æ—Å—Ç–∞ –∏ –ø–æ—Ä—Ç–∞</p>
<h2 id="tshark">tshark</h2>
<p><code>apt install tshark</code><br />
<code>apt install termshark</code> terminal UI for tshark (https://github.com/gcla/termshark)<br />
<code>tshark -D</code> —Å–ø–∏—Å–æ–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤<br />
<code>tshark -i 1</code><br />
<code>disown</code><br />
<code>tshark -i 1 -Y "syslog"</code> –∑–∞—Ö–≤–∞—Ç –ø–∞–∫–µ—Ç–æ–≤ syslog (udp.port == 514)<br />
<code>tshark -i 1 host 192.168.3.104</code> –∑–∞—Ö–≤–∞—Ç –ø–∞–∫–µ—Ç–æ–≤ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ IP-–∞–¥—Ä–µ—Å–∞<br />
<code>tshark -i 1 net 192.168.3.0/24</code> –∑–∞—Ö–≤–∞—Ç –ø–∞–∫–µ—Ç–æ–≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π –ø–æ–¥—Å–µ—Ç–∏<br />
<code>tshark -i 1 src host 192.168.3.104</code> –∑–∞—Ö–≤–∞—Ç –∏—Å—Ö–æ–¥—è—â–∏—Ö –ø–∞–∫–µ—Ç–æ–≤<br />
<code>tshark -i 1 dst host 192.168.3.104</code> –∑–∞—Ö–≤–∞—Ç –≤—Ö–æ–¥—è—â–∏—Ö –ø–∞–∫–µ—Ç–æ–≤<br />
<code>tshark -i 1 dst host 192.168.3.104 and port 8086</code> –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –≤—Ö–æ–¥—è—â–µ–º—É —Ö–æ—Å—Ç—É –∏ –ø–æ—Ä—Ç—É<br />
<code>tshark -i 1 dst host 192.168.3.104 and port 8086 and src host 192.168.3.99</code> –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –∏—Å—Ö–æ–¥—è—â–µ–º—É —Ö–æ—Å—Ç—É<br />
<code>tshark -i 1 -x dst host 192.168.3.104 and port 8086 and src host 192.168.3.101</code> –ø—Ä–æ—á–∏—Ç–∞—Ç—å –ø–∞–∫–µ—Ç—ã –≤ —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (-x)<br />
<code>tshark -i 1 -O TCP dst host 192.168.3.104 and port 8086 and src host 192.168.3.101</code> –ø—Ä–æ—á–∏—Ç–∞—Ç—å TCP-–∑–∞–≥–æ–ª–æ–≤–∫–∏<br />
<code>tshark -i 1 -a duration:10 -w ~/192.168.3.0.pcap</code> —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞—Ö–≤–∞—Ç<br />
<code>tshark -Y 'ip.addr == 192.168.3.106' -r ~/192.168.3.0.pcap</code> –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª –∑–∞—Ö–≤–∞—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ñ–∏–ª—å—Ç—Ä–∞<br />
<code>tshark -Y "(ip.addr == 192.168.3.106) or (ip.addr == 192.168.3.107)" -r ~/192.168.3.0.pcap</code> –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –¥–≤—É–º –∞–¥—Ä–µ—Å–∞–º (–∏–ª–∏)<br />
<code>tshark -Y "(ip.addr == 192.168.3.104) and (tcp.port == 8086)" -r ~/192.168.3.0.pcap</code> –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –¥–≤—É–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º (–∏)<br />
<code>tshark -Y "!(ip.addr == 192.168.3.104)" -r ~/192.168.3.0.pcap</code> –∏—Å–∫–ª—é—á–∏—Ç—å<br />
<code>tshark -Y "not arp and not (udp.port == 53)" -r ~/192.168.3.0.pcap</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤–µ—Å—å udp-—Ç—Ä–∞—Ñ–∏–∫, –∏—Å–∫–ª—é—á–∏–≤ ping –∏ dns –ø–∞–∫–µ—Ç—ã</p>
<h2 id="ping">ping</h2>
<h3 id="fping">fping</h3>
<p><code>fping yandex.ru google.com</code> –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–≤—É—Ö —Ö–æ—Å—Ç–æ–≤<br />
<code>fping -p 5 yandex.ru google.com</code> 5 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –∫–∞–∂–¥–æ–º—É —Ö–æ—Å—Ç—É<br />
<code>fping -ag 192.168.3.0/24</code> icmp –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ –ø–æ–¥—Å–µ—Ç–∏<br />
<code>fping &lt; hosts.txt</code> –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ ping –≤—Å–µ—Ö —Ö–æ—Å—Ç–æ–≤ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≤ —Ñ–∞–π–ª–µ —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏</p>
<h3 id="netping">netping</h3>
<p><code>sudo curl -s https://raw.githubusercontent.com/Lifailon/net-tools/rsa/netping.sh -o /usr/bin/netping</code><br />
<code>sudo chmod +x /usr/bin/netping</code><br />
<code>netping 192.168.3.0</code></p>
<h2 id="firewall">firewall</h2>
<h3 id="ufw">ufw</h3>
<p><code>systemctl status ufw</code><br />
<code>ufw status</code><br />
<code>ufw enable</code> –≤–∫–ª—é—á–∏—Ç—å ufw (Uncomplicated Firewall)<br />
<code>ufw disable</code> –æ—Ç–∫–ª—é—á–∏—Ç—å<br />
<code>ufw reload</code> –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å/–ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏<br />
<code>ufw reset</code> —Å–±—Ä–æ—Å–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–æ—Ç–∫–ª—é—á–∏—Ç—å ufw –∏ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞)<br />
<code>ufw default deny incoming</code> –≤—Å–µ –≤—Ö–æ–¥—è—â–∏–µ –ø–∞–∫–µ—Ç—ã –æ—Ç–∫–ª–æ–Ω—è—Ç—å (–ø–æ–ª–∏—Ç–∏–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∫–∞–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –±—É–¥—É—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –∫ –ø–∞–∫–µ—Ç–∞–º, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ –ø–æ–¥–ø–∞–¥–∞—é—Ç –ø–æ–¥ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞)<br />
<code>ufw default allow outgoing</code> –≤—Å–µ –∏—Å—Ö–æ–¥—è—â–∏–µ —Ä–∞–∑—Ä–µ—à–∞—Ç—å<br />
<code>ufw allow in 22</code> —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ –ø–æ—Ä—Ç 22<br />
<code>ufw allow out 22</code> —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ –ø–æ—Ä—Ç 22<br />
<code>ufw deny in 80/tcp</code> –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –≤—Ö–æ–¥—è—â–∏–π TCP-—Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ 80 –ø–æ—Ä—Ç<br />
<code>ufw delete deny in 80/tcp</code> —É–¥–∞–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ<br />
<code>ufw allow 161,10050,10051/tcp</code> –æ—Ç–∫—Ä—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ä—Ç–æ–≤<br />
<code>ufw allow proto tcp from 0.0.0.0/24 to 192.168.3.100 port 3389</code> —Ä–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø —Å–æ –≤—Å–µ—Ö IP-–∞–¥—Ä–µ—Å–æ–≤ –ø–æ TCP-–ø—Ä–æ—Ç–æ–∫–æ–ª—É –∫ IP-–∞–¥—Ä–µ—Å—É –∏ –ø–æ—Ä—Ç—É 3389<br />
<code>ufw allow from 192.168.3.0/24 to 192.168.3.110</code> —Ä–∞–∑—Ä–µ—à–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤—Å–µ–º —Å –ø–æ–¥—Å–µ—Ç–∏ 192.168.1.0 –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É 192.168.1.2 (–¥–ª—è Proxmox MGW)<br />
<code>ufw allow 25/tcp</code> –æ—Ç–∫—Ä—ã—Ç—å –¥–ª—è –≤—Å–µ—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π 25 –ø–æ—Ä—Ç<br />
<code>ufw limit ssh</code> –ª–∏–º—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º—É –ø–æ—Ä—Ç—É —Å –æ–¥–Ω–æ–≥–æ IP-–∞–¥—Ä–µ—Å–∞ (–¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –ø–µ—Ä–µ–±–æ—Ä–∞), –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å —à–µ—Å—Ç—å –∏ –±–æ–ª—å—à–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∑–∞ 30 —Å–µ–∫—É–Ω–¥ (–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Ä–µ–º—è –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ iptables)<br />
<code>ufw logging on</code> –≤–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ<br />
<code>ufw logging medium</code> –≤—ã–±—Ä–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (low/medium/high)<br />
<code>cat /var/log/ufw</code> –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤. –°–∏–Ω—Ç–∞–∫—Å–∏—Å: [UFW ALLOW/BLOCK/AUDIT] IN=–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å OUT=–∏—Ç–µ—Ä—Ñ–µ–π—Å SRC=ip_–∏—Å—Ç–æ—á–Ω–∏–∫–∞ DST=ip_–Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è LEN=—Ä–∞–∑–º–µ—Ä_–ø–∞–∫–µ—Ç–∞ TOS=0x10 PREC=0x00 TTL=64 ID=728 DF PROTO=–ø—Ä–æ—Ç–æ–∫–æ–ª SPT=–ø–æ—Ä—Ç_–∏—Å—Ç–æ—á–Ω–∏–∫–∞ DPT=–ø–æ—Ä—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è LEN=—Ä–∞–∑–º–µ—Ä_–ø–∞–∫–µ—Ç–∞</p>
<h3 id="show">show</h3>
<p><code>ufw show listening</code> –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å–µ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–µ–º—ã–µ –ø–æ—Ä—Ç—ã –∏ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –Ω–∏—Ö (—Å —É–∫–∞–∑–∞–Ω–∏–µ–º –æ—á–µ—Ä–µ–¥–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞ –≤ —Å–ø–∏—Å–∫–µ: [20] allow 161,10050,10051/tcp)<br />
<code>ufw show raw</code> –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ iptables<br />
<code>ufw show added</code> –Ω–µ–¥–∞–≤–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞<br />
<code>ufw show builtins</code> –ø—Ä–∞–≤–∏–ª–∞, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é<br />
<code>ufw show user-rules</code> –ø—Ä–∞–≤–∏–ª–∞, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º<br />
<code>ufw show before-rules</code> –ø—Ä–∞–≤–∏–ª–∞, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–µ—Ä–µ–¥ –ø—Ä–∏–Ω—è—Ç–∏–µ–º –ø–∞–∫–µ—Ç–∞<br />
<code>ufw show after-rules</code> –ø—Ä–∞–≤–∏–ª–∞, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ –ø—Ä–∏–Ω—è—Ç–∏—è –ø–∞–∫–µ—Ç–∞<br />
<code>ufw show logging-rules</code> –ø—Ä–∞–≤–∏–ª–∞ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞–∫–µ—Ç–æ–≤</p>
<h3 id="firewalld">firewalld</h3>
<p><code>apt install firewalld</code><br />
<code>systemctl status firewalld</code><br />
<code>systemctl start firewalld</code><br />
<code>pkill -f firewalld</code> —É–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å, –µ—Å–ª–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ failed<br />
<code>firewall-cmd --state</code> —Å—Ç–∞—Ç—É—Å —Ä–∞–±–æ—Ç—ã<br />
<code>firewall-cmd --reload</code> –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–ø–µ—Ä–µ—á–∏—Ç–∞—Ç—å)<br />
<code>firewall-cmd --list-all</code> —Å–ø–∏—Å–æ–∫ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª (–¥–ª—è services –∏ ports)<br />
<code>firewall-cmd --list-port</code> —Ç–æ–ª—å–∫–æ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã<br />
<code>firewall-cmd --list-service</code> —Ç–æ–ª—å–∫–æ –æ—Ç–∫—Ä—ã—Ç—ã–µ —Å–ª—É–∂–±—ã<br />
<code>firewall-cmd --list-all-zones</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–æ–Ω<br />
<code>firewall-cmd --get-active-zones</code> —Å–ø–∏—Å–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∑–æ–Ω<br />
<code>firewall-cmd --list-all --zone=public</code> –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–æ–Ω–µ<br />
<code>firewall-cmd --permanent --add-port=22/tcp</code> –æ—Ç–∫—Ä—ã—Ç—å 22 –ø–æ—Ä—Ç<br />
<code>firewall-cmd --permanent --add-port=8000-8080/udp</code> –æ—Ç–∫—Ä—ã—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω –ø–æ—Ä—Ç–æ–≤<br />
<code>firewall-cmd --get-services | grep ssh</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª—É–∂–±<br />
<code>firewall-cmd --permanent --add-service=ssh</code> —Ä–∞–∑—Ä–µ—à–∏—Ç—å –ø–æ—Ä—Ç—ã –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞ ssh<br />
<code>firewall-cmd --permanent --new-service=speedtest</code> –¥–æ–±–∞–≤–∏—Ç—å —Å–ª—É–∂–±—É<br />
<code>firewall-cmd --permanent --service=speedtest --add-port=80/tcp</code> –¥–æ–±–∞–≤–∏—Ç—å –ø–æ—Ä—Ç –∫ —Å–ª—É–∂–±–µ<br />
<code>firewall-cmd --info-service=speedtest</code> –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–ª—É–∂–±–µ<br />
<code>firewall-cmd --permanent --add-rich-rule 'rule family="ipv4" source address="192.168.3.0/24" service name="speedtest" accept'</code> –æ—Ç–∫—Ä—ã—Ç—å –¥–æ—Å—Ç—É–ø –¥–ª—è –ø–æ–¥—Å–µ—Ç–∏<br />
<code>firewall-cmd --permanent --add-rich-rule 'rule family="ipv4" source address="192.168.3.0/24" port port="22" protocol="tcp" accept'</code><br />
<code>firewall-cmd --permanent --add-rich-rule="rule family='ipv4' source address='192.168.21.0/24' reject"</code> –∑–∞–∫—Ä—ã—Ç—å –¥–æ—Å—Ç—É–ø –¥–ª—è –ø–æ–¥—Å–µ—Ç–∏<br />
<code>firewall-cmd --list-rich-rules</code> —Å–ø–∏—Å–æ–∫ –ø—Ä–∞–≤–∏–ª —Å —É—Å–ª–æ–≤–∏—è–º–∏<br />
<code>firewall-cmd --permanent --remove-port=22/tcp</code> —É–¥–∞–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ</p>
<h3 id="iptables">iptables</h3>
<p><code>iptables -L -v</code> –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∫–∞–∂–¥–æ–π —Ü–µ–ø–æ—á–∫–∏<br />
<code>iptables -L | grep -E "tcp|udp"</code><br />
<code>if (( $(iptables -L | wc -l | bc) == 8)); then echo active; else echo inactive; fi</code><br />
<code>iptables -A INPUT -p tcp --dport 22 -j ACCEPT</code> –æ—Ç–∫—Ä—ã—Ç—å –≤—Ö–æ–¥—è—â–∏–π –ø–æ—Ä—Ç ssh<br />
<code>iptables -A INPUT -p tcp -s !192.168.3.99 --dport 22 -j DROP</code> –∑–∞–∫—Ä—ã—Ç—å –≤—Ö–æ–¥—è—â–∏–π –ø–æ—Ä—Ç ssh, –∏—Å–∫–ª—é—á–∏—Ç—å 192.168.3.99<br />
<code>iptables-save</code> —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —á—Ç–æ –±—ã –æ–Ω–∏ –±—ã–ª–∏ –∞–∫—Ç–∏–≤–Ω—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏<br />
<code>iptables -F</code> —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞ —Ç–µ–∫—É—â–µ–π —Ç–∞–±–ª–∏—Ü—ã</p>
<h3 id="nftables">nftables</h3>
<p><code>nft -a list ruleset</code> —Å–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–∞–≤–∏–ª<br />
<code>nft list tables</code> —Å–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü<br />
<code>nft flush ruleset</code> –æ—á–∏—Å—Ç–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞<br />
<code>nft add table inet filter</code> —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É filter<br />
<code>nft add chain inet filter input { type filter hook input priority 0\; }</code> –¥–æ–±–∞–≤–∏—Ç—å —Ü–µ–ø–æ—á–∫—É input<br />
<code>nft add rule inet filter input ct state related,established counter accept</code><br />
<code>nft add rule inet filter input iifname "lo" counter accept</code><br />
<code>nft add rule inet filter input ip protocol icmp counter accept</code> —Ä–∞–∑—Ä–µ—à–∏—Ç—å icmp<br />
<code>nft add rule inet filter input tcp dport {80, 443} counter accept</code> –æ—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç—ã<br />
<code>nft add rule inet filter input ip saddr { 192.168.100.0/24, 1.1.1.1/32 } tcp dport 22 counter accept</code> –æ—Ç–∫—Ä—ã—Ç—å 22 –ø–æ—Ä—Ç –¥–ª—è –ø–æ–¥—Å–µ—Ç–µ–π<br />
<code>nft chain inet filter input { policy drop \; }</code> –æ—Å—Ç–∞–ª—å–Ω–æ–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å<br />
<code>echo "flush ruleset" &gt; /etc/nftables.conf</code> –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞<br />
<code>nft -s list ruleset &gt;&gt; /etc/nftables.conf</code> –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é<br />
<code>systemctl enable nftables.service</code><br />
<code>nft delete rule inet filter input handle 5</code> —É–¥–∞–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ –ø–æ –Ω–æ–º–µ—Ä—É<br />
<code>nft add rule inet filter input position 5 tcp dport 22 counter accept</code> –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –º–µ—Å—Ç–æ —Å –Ω–æ–º–µ—Ä–æ–º –≤ —Å–ø–∏—Å–∫–µ</p>
<h2 id="ssh">ssh</h2>
<p><code>w</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –∏ –∏—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–≤—Ä–µ–º—è/–¥–∞—Ç–∞ –≤—Ö–æ–¥–∞, IDLE –≤—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ—è –∏ –ø–æ—Å–ª–µ–¥–Ω—è—è –≤—ã–ø–æ–ª–Ω—è–µ–º–∞—è –∫–æ–º–∞–Ω–¥–∞)<br />
<code>who</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏, –≤—Ä–µ–º—è/–¥–∞—Ç–∞ –≤—Ö–æ–¥–∞ –∏ ip —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å<br />
<code>last -a</code> –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤—Ö–æ–¥–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Å–∏—Å—Ç–µ–º—É<br />
<code>lastlog</code> –¥–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—Ö–æ–¥–∞ –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º—É<br />
<code>last reboot</code> –∏—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏<br />
<code>id -G</code> –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ id –∫—Ä—É–ø–ø –≤ –∫–æ—Ç–æ—Ä—ã—Ö —Å–æ—Å—Ç–æ–∏—Ç —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</p>
<p><code>apt install xclip xsel</code> –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞<br />
<code>cat /etc/ssh/sshd_config | xclip</code><br />
<code>xsel &gt; sshd_config.bak</code><br />
<code>nano /etc/ssh/sshd_config</code><br />
<code>Port 2121</code> –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç<br />
<code>PermitRootLogin yes</code> –≤–∫–ª—é—á–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º root<br />
<code>PasswordAuthentication no</code> –æ—Ç–∫–ª—é—á–∏—Ç—å –∞—É–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ –ø–∞—Ä–æ–ª—é<br />
<code>X11Forwarding yes</code> –≤–∫–ª—é—á–∏—Ç—å X11<br />
<code>TCPKeepAlive yes</code> –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (–æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—É—Å—Ç—ã—Ö keep-alive –ø–∞–∫–µ—Ç–æ–≤ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è)<br />
<code>ClientAliveInterval 60</code> –∑–∞–¥–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–∂–∏–¥–∞–Ω–∏—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π sshd –∑–∞–ø—Ä–æ—Å–∏—Ç –æ—Ç–≤–µ—Ç –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞<br />
<code>ClientAliveCountMax 3</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –±–µ–∑ –æ—Ç–≤–µ—Ç–∞ –¥–æ –∑–∞–≤–µ—à—Ä–µ–Ω–∏—è —Å–µ–∞–Ω—Å–∞ (ClientAliveInterval * ClientAliveCountMax = 180 —Å–µ–∫—É–Ω–¥)<br />
<code>systemctl restart sshd</code><br />
<code>systemctl status sshd</code></p>
<h3 id="keygen">keygen</h3>
<p><code>ssh-keygen -t rsa -b 4096</code> —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä—É –∫–ª—é—á–µ–π<br />
<code>id_rsa</code> –ø—Ä–∏–≤–∞—Ç–Ω—ã–π/–∑–∞–∫—Ä—ã—Ç—ã–π –∫–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ, –æ—Ç –∫–æ–≥–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (–¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –±–µ–∑ –ø–∞—Ä–æ–ª—è –∏–º—è —Ñ–∞–π–ª–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)<br />
<code>cat ~/.ssh/id_rsa.pub | xclip</code> –ø—É–±–ª–∏—á–Ω—ã–π/–æ—Ç–∫—Ä—ã—Ç—ã–π –∫–ª—é—á, –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –∫—É–¥–∞ –±—É–¥–µ–º –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è3<br />
<code>xsel &gt; ~/.ssh/authorized_keys</code> –ø–µ—Ä–µ–¥–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ (id_rsa.pub) –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –∫—É–¥–∞ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è</p>
<h3 id="x11">x11</h3>
<p><code>apt-get install virt-manager ssh-askpass</code><br />
<code>virt-manager</code><br />
<code>export DISPLAY=username-VirtualBox:10.0 &amp;&amp; firefox</code></p>
<h3 id="scp">scp</h3>
<p><code>ssh-copy-id root@192.168.3.105 -p 2121</code> —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (–¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–æ–π), —É—Ç–∏–ª–∏—Ç–∞ –±—É–¥–µ—Ç –∏—Å–∫–∞—Ç—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ç–µ–∫—É—â–µ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ñ–∞–π–ª –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ –∏ —Å–∫–æ–ø–∏—Ä—É–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –∫–ª—é—á–∞ ~/.ssh/id_rsa.pub —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä –≤ —Ñ–∞–π–ª authorized_keys<br />
<code>scp -P 2121 /home/lifailon/files/* lifailon@192.168.3.105:/home/lifailon/downaload/</code> —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–∞—Ç–∞–ª–æ–≥–∞ files –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é downaload<br />
<code>scp -P 2121 -r kup@192.168.3.105:/home/lifailon/downaload /home/lifailon/files/</code> —Å–∫–∞—á–∞—Ç—å (-r) –¥–∞–Ω–Ω—ã–µ —Å —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π</p>
<h3 id="sshpass">sshpass</h3>
<pre><code class="language-bash">hosts=(192.168.3.101 192.168.3.102 192.168.3.103 192.168.3.104)
username=&quot;lifailon&quot;
port=2121
read -s -p &quot;–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è $username: &quot; password
echo
for host in ${hosts[@]}; do
    sshpass -p $password ssh -p $port $username@$host &quot;echo $(uname -n) $(free -m | grep Mem: | awk '{print $3&quot;/&quot;$2}')&quot;
done
</code></pre>
<h2 id="sudoers">sudoers</h2>
<p><code>cat /etc/sudoers</code> –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ —É—Ç–∏–ª–∏—Ç—ã sudo<br />
<code>visudo</code> –æ—Ç–∫—Ä—ã—Ç—å sudoers –≤ —Ä–µ–∂–∏–º–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞<br />
<code>Defaults env_reset, timestamp_timeout=10</code> –∑–∞–¥–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è sudo –Ω–∞ 10 –º–∏–Ω—É—Ç<br />
<code>echo "lifailon ALL=(ALL) NOPASSWD:ALL" &gt; /etc/sudoers.d/lifailon</code> —Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è sudo –±–µ–∑ –ø–∞—Ä–æ–ª—è<br />
<code>chmod 644 /etc/sudoers.d/lifailon</code><br />
<code>lifailon ALL=NOPASSWD: /usr/bin/service memcahched restart, /usr/bin/apt-get update, /usr/bin/apt-get upgrade</code> —Ä–∞–∑—Ä–µ—à–∏—Ç—å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å–∏—Å—Ç–µ–º—ã<br />
<code>%powerusers ALL=NOPASSWD: /usr/bin/service memcahched restart</code> –¥–æ—Å—Ç—É–ø –Ω–∞ –≥—Ä—É–ø–ø—É<br />
<code>visudo --check</code> –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∏ –≤—Å–µ—Ö –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (0440)</p>
<h2 id="strace">strace</h2>
<p><code>strace -c top -n 1 &gt; /dev/null</code> –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º—ã (time - –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ –æ–±—â–µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, call - –∫–æ–ª-–≤–æ –æ–±—Ä–∞—â–µ–Ω–∏–π –∏ –æ—à–∏–±–∫–∏)<br />
<code>pid=$(pidof dd)</code> —É–∑–Ω–∞—Ç—å pid –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–æ –∏–º–µ–Ω–∏<br />
<code>strace -p $pid</code> –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã –ø—Ä–æ—Ü–µ—Å—Å–∞ (—á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ —Å –ø–æ–º–æ—â—å—é –≤—ã–∑–æ–≤–∞ read –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ –¥—Ä—É–≥–æ–µ —á–µ—Ä–µ–∑ write)<br />
<code>strace -f -p $(pgrep -o sshd) -o ~/passwd.txt -v -e trace=write -s 64</code> —Å–ª–µ–¥–∏–º –∑–∞ –≤—Å–µ–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ sshd (-f), –∏—â–µ–º –≤—Å–µ PID sshd –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (-p), —Ç—Ä–∏–≥–≥–µ—Ä —Ç–æ–ª—å–∫–æ –Ω–∞ –∑–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö (-e) –∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –≤—ã–≤–æ–¥ 64 –±–∞–π—Ç–∞–º–∏<br />
<code>cat ~/passwd.txt | grep "[1-32][1-32]) = [1-32][1-32]"</code></p>
<h2 id="apt">apt</h2>
<p><code>apt-mark showauto</code> —Å–ø–∏—Å–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–∞–∫–µ—Ç–æ–≤<br />
<code>apt-mark showmanual</code> —Å–ø–∏—Å–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –≤—Ä—É—á–Ω—É—é<br />
<code>echo $(($(apt-mark showauto | wc -l) + $(apt-mark showmanual | wc -l)))</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Å–µ—Ö —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤<br />
<code>apt list --installed</code> —Å–ø–∏—Å–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ apt (Advanced Package Tool)<br />
<code>apt update</code> –æ–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≤ —Ñ–∞–π–ª–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ /etc/apt/sources.list<br />
<code>cat /etc/apt/sources.list | grep -Ev "^#"</code> —Å–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤<br />
<code>apt list --upgradable</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫, –¥–ª—è –∫–∞–∫–∏—Ö –ø–∞–∫–µ—Ç–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è<br />
<code>apt list --upgradable -a</code> upgradable from, installed –∏ –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–µ—Ä—Å–∏–∏<br />
<code>apt install --only-upgrade powershell</code> –æ–±–Ω–æ–≤–∏—Ç—å –æ–¥–∏–Ω –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–∞–∫–µ—Ç<br />
<code>apt --fix-broken install</code> –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –∏ –æ—à–∏–±–∫–∏ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏<br />
<code>apt full-upgrade</code> –æ–±–Ω–æ–≤–ª—è–µ—Ç –≤—Å–µ –ø–∞–∫–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ —Å–∏—Å—Ç–µ–º–µ, –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —É–¥–∞–ª—è–µ—Ç –ø–∞–∫–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∏—Å—å –≤ —Å–∏—Å—Ç–µ–º—É –∏ —É–∂–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è<br />
<code>apt install net-tools</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç<br />
<code>apt download net-tools</code> —Å–∫–∞—á–∞—Ç—å –ø–∞–∫–µ—Ç –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏<br />
<code>apt install net-tools --reinstall</code> –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç<br />
<code>apt remove net-tools</code> —É–¥–∞–ª–∏—Ç—å –ø–∞–∫–µ—Ç (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã –≤ —Å–∏—Å—Ç–µ–º–µ —É–¥–∞–ª–µ–Ω—ã –Ω–µ –±—É–¥—É—Ç)<br />
<code>apt purge net-tools</code> –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç—å –ø–∞–∫–µ—Ç, –≤–º–µ—Å—Ç–µ —Å–æ –≤—Å–µ–º–∏ –µ–≥–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏<br />
<code>apt policy net-tools</code> –∫–∞–∫–∞—è –≤–µ—Ä—Å–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–∞ –∏ –∫–∞–∫–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã<br />
<code>apt install net-tools=number ver.</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤–µ—Ä—Å–∏—é<br />
<code>apt autoremove</code> –æ—á–∏—Å—Ç–∏—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ –ø–∞–∫–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç<br />
<code>apt autoclean</code> –æ—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –ø–∞–∫–µ—Ç–æ–≤</p>
<h2 id="snap">snap</h2>
<p>–°–æ–¥–µ—Ä–∂–∞—Ç —Å–∞–º—É –ø—Ä–æ–≥—Ä–∞–º–º—É (deb-–ø–∞–∫–µ—Ç), –∞ —Ç–∞–∫–∂–µ –≤—Å–µ –µ—ë –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –±–∏–±–ª–∏—Ç–æ—Ç–µ–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –≤–µ—Ä—Å–∏–π –¥–ª—è –¥–∞–Ω–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã.<br />
<code>ls /snap</code> –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø–∞–∫–µ—Ç–æ–≤<br />
<code>ls /var/lib/snapd/snaps</code> —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ .snap<br />
<code>snap install snap-store</code> —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∞–≥–∞–∑–∏–Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π<br />
<code>snap find nmap</code> –ø–æ–∏—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –º–∞–≥–∞–∑–∏–Ω–µ snap<br />
<code>snap info nmap</code> –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞–∫–µ—Ç–µ (–µ–≥–æ –Ω–∞–ª–∏—á–∏–∏, –≤–µ—Ä—Å–∏—è, –¥–∞—Ç–∞ —Ä–µ–ª–∏–∑–∞ –∏ —Ä–∞–∑–º–µ—Ä)<br />
<code>snap list</code> —Å–ø–∏—Å–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –≤ —Å–∏—Å—Ç–µ–º–µ –ø–∞–∫–µ—Ç–æ–≤<br />
<code>snap list | sed 1d | wc -l</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤<br />
<code>snap list --all nmap</code> –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞<br />
<code>snap refresh nmap</code> –æ–±–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏<br />
<code>snap revert nmap</code> –æ—Ç–∫–∞—Ç–∏—Ç—å –≤–µ—Ä—Å–∏—é –¥–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–π<br />
<code>snap install nmap --stable</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤–µ—Ä—Å–∏—é –ø–∞–∫–µ—Ç–∞<br />
<code>snap connections nmap</code> –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º —Å–∏—Å—Ç–µ–º—ã<br />
<code>snap remove nmap</code> —É–¥–∞–ª–∏—Ç—å –ø–∞–∫–µ—Ç</p>
<h2 id="dpkg">dpkg</h2>
<p><code>dpkg -i spark.deb</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç<br />
<code>dpkg -l</code> —Å–ø–∏—Å–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö deb-–ø–∞–∫–µ—Ç–æ–≤<br />
<code>dpkg -l | wc -l</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤<br />
<code>dpkg -l spark</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ –ø–∞–∫–µ—Ç –≤ —Å–∏—Å—Ç–µ–º–µ –∏ –µ–≥–æ –≤–µ—Ä—Å–∏—é<br />
<code>dpkg -s spark</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–∞–∫–µ—Ç–∞<br />
<code>dpkg -r spark</code> —É–¥–∞–ª–∏—Ç—å (--remove) .deb –ø–∞–∫–µ—Ç<br />
<code>dpkg -P spark</code> —É–¥–∞–ª–∏—Ç—å –ø–∞–∫–µ—Ç –≤–º–µ—Å—Ç–µ —Å —Ñ–∞–∏–ª–∞–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏<br />
<code>dpkg -L spark</code> –∫—É–¥–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–∞–∫–µ—Ç (opt/Spark)</p>
<h2 id="ntp">ntp</h2>
<h3 id="time">time</h3>
<p><code>timedatectl</code> —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è<br />
<code>timedatectl set-timezone 'Europe/Moscow'</code> –∏–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—É—é –∑–æ–Ω—É –Ω–∞ MSK, +0300 (–∏–∑–º–µ–Ω–∏—Ç—Å—è Local time)<br />
<code>timedatectl list-timezones</code> —Å–ø–∏—Å–æ–∫ —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤<br />
<code>timedatectl set-ntp no</code> –æ—Ç–∫–ª—é—á–∏—Ç—å NTP service<br />
<code>timedatectl set-time "13:00:00"</code> –ø–æ—Å–ª–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è NTP —É–∫–∞–∑–∞—Ç—å –≤—Ä–µ–º—è –≤ —Ä—É—á–Ω—É—é<br />
<code>timedatectl set-ntp yes</code> –≤–∫–ª—é—á–∏—Ç—å NTP service (NTP service: active)</p>
<h3 id="language">language</h3>
<p><code>locale</code> —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –≤ —Å–∏—Å—Ç–µ–º–µ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏<br />
<code>update-locale LANG=en_US.UTF-8</code> –∏–∑–º–µ–Ω–∏—Ç—å –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é<br />
<code>apt-get install language-pack-en language-pack-en-base</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–π<br />
<code>nano /etc/default/locale</code><br />
<code>LANG=en_US.UTF-8</code><br />
<code>dpkg-reconfigure locales</code></p>
<h3 id="timesyncd">timesyncd</h3>
<p><code>systemctl status systemd-timesyncd</code><br />
<code>systemctl status systemd-timesyncd | grep "Status": | sed -E "s/^.+server //; "s/.\"//""</code> —É–∑–Ω–∞—Ç—å –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏<br />
<code>apt install systemd-timesyncd</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–ª—É–∂–±—É, –µ—Å–ª–∏ unit –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è<br />
<code>apt-get remove ntp ntpstat --purge &amp;&amp; apt autoremove</code> —É–¥–∞–ª–∏—Ç—å ntpd (–µ—Å–ª–∏ –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)<br />
<code>nano /etc/systemd/timesyncd.conf</code><br />
<code>NTP=192.168.3.233</code> DC (Domain Controller)<br />
<code>NTP=0.debian.pool.ntp.org 1.debian.pool.ntp.org 2.debian.pool.ntp.org 3.debian.pool.ntp.org</code><br />
<code>FallbackNTP=ntp.ubuntu.com</code> —Ä–µ–∑–µ—Ä–≤<br />
<code>systemctl restart systemd-timesyncd</code><br />
<code>timedatectl set-ntp true</code> –≤–∫–ª—é—á–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ systemd-timesyncd –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ (–≤–º–µ—Å—Ç–æ ntpd)<br />
<code>timedatectl status</code></p>
<h3 id="ntpd">ntpd</h3>
<p><code>apt install ntp</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å NTP-—Å–µ—Ä–≤–µ—Ä/–∫–ª–∏–µ–Ω—Ç, –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –ø–∞–∫–µ—Ç systemd-timesyncd<br />
<code>systemctl status ntp</code><br />
<code>sntp --version</code><br />
<code>ufw allow 123/udp &amp;&amp; ufw reload</code><br />
<code>timedatectl set-ntp false</code> –æ—Ç–∫–ª—é—á–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ systemd-timesyncd –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ<br />
<code>nano /etc/ntp.conf</code><br />
<code>pool 0.ubuntu.pool.ntp.org</code> —É–∫–∞–∑–∞—Ç—å –ø—É–ª —Å–µ—Ä–≤–µ—Ä–æ–≤<br />
<code>server 0.ru.pool.ntp.org</code> —É–∫–∞–∑–∞—Ç—å –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (–µ—Å–ª–∏ —ç—Ç–æ pool, –≤–æ–∑—å–º–µ—Ç –æ–¥–∏–Ω)<br />
<code>restrict default kod notrap nomodify nopeer noquery limited</code> –Ω–∞—Å—Ç—Ä–æ–π–∫–∏/–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ NTP —Å–µ—Ä–≤–µ—Ä–∞<br />
<code>systemctl restart ntp</code><br />
<code>systemctl status ntp</code><br />
<code>timedatectl status</code><br />
<code>ntpq -p</code> –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ (+ —Å–µ—Ä–≤–µ—Ä –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–≤–µ—Ä–∫–∏ —á–∞—Å–æ–≤, * —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å–µ–π—á–∞—Å, - –Ω–µ —Ä–µ–∫–æ–º–∞–Ω–¥–æ–≤–∞–Ω, st - —É—Ä–æ–≤–µ–Ω—å stratum, when ‚Äî –∫–æ–≥–¥–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑ —Å–≤–µ—Ä—è–ª–æ—Å—å –≤—Ä–µ–º—è, delay - –≤—Ä–µ–º—è –∑–∞–¥–µ—Ä–∂–∫–∏, offset - —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –ª–æ–∫–∞–ª—å–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º –∏ –≤—Ä–µ–º–µ–Ω–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ - –æ—Ç—Å—Ç–∞—é—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –∏–ª–∏ —Å–ø–µ—à–∞—Ç)</p>
<h2 id="top">top</h2>
<p><code>top -c</code> –≤—ã–≤–æ–¥–∏—Ç –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º —Ñ–∞–π–ª–∞–º —Å –∫–ª—é—á–∞–º–∏, –≤–º–µ—Å—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏—è<br />
<code>top -H</code> –≤—ã–≤–æ–¥–∏—Ç –ø–æ—Ç–æ–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤<br />
<code>top -i</code> –Ω–µ –≤—ã–≤–æ–¥–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–µ—Å—É—Ä—Å—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞<br />
<code>top -o %CPU</code> –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ CPU<br />
<code>top -o %MEM</code> –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ Memory</p>
<h3 id="htop">htop</h3>
<p><code>space</code> –≤—ã–¥–µ–ª–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–æ—Ç–º–µ–Ω–∏—Ç—å Shift+U)<br />
<code>u</code> –≤—ã–±—Ä–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br />
<code>l</code> –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å<br />
<code>s</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ (strace PID attached) F8 - AutoScroll, F4 - Filter, F9 - Stop/Start Tracing<br />
<code>F4</code> —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, cron)<br />
<code>F5</code> –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞<br />
<code>F6</code> —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (PERCENT_CPU/PERCENT_MEM/USER/PRIORITY/TIME)<br />
<code>F7</code> –ø–æ–≤—ã—Å–∏—Ç—å –ø—Ä–∏–æ—Ä—Ç–∏—Ç–µ (–¥–æ -20), —á–µ–º –º–µ–Ω—å—à–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, —Ç–µ–º –±–æ–ª—å—à–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–æ–¥–∏—Ç—Å—è –ø—Ä–æ—Ü–µ—Å—Å—É<br />
<code>F8</code> –ø–æ–Ω–∏–∑–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–¥–æ 19)<br />
<code>F9/K</code> –¥–µ–π—Å—Ç–≤–∏–µ —Å –ø—Ä–æ—Ü–µ—Å—Å–æ–º (—Å–∏–≥–Ω–∞–ª—ã), –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞: 15, 2, 3, 9 –∏–ª–∏ 19<br />
<code>S (STATE)</code> —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞<br />
<code>R</code> [running or runnable] –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∏–ª–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥–∏ –Ω–∞ –∑–∞–ø—É—Å–∫<br />
<code>S</code> [interruptible sleep] –ø—Ä–µ—Ä—ã–≤–∞–µ–º—ã–π —Å–æ–Ω (–Ω–µ –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–º –∏ –∂–¥–µ—Ç —Å–æ–±—ã—Ç–∏—è –∏–ª–∏ —É—Å–ª–æ–≤–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞)<br />
<code>D</code> [uninterruptible sleep] –Ω–µ–ø—Ä–µ—Ä—ã–≤–∞–µ–º—ã–π —Å–æ–Ω (–∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∏–≥–Ω–∞–ª–æ–º, —Ç.–∫. –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –º–æ–∂–µ—Ç –Ω–∞ –Ω–µ–≥–æ –æ—Ç–≤–µ—Ç–∏—Ç—å)<br />
<code>Z</code> [zombie] –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –æ–∂–∏–¥–∞—é—â–∏–π –ø–æ–∫–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–∏–º–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç<br />
<code>T</code> –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å–∏–≥–Ω–∞–ª–æ–º SIGSTOP (-19/CTRL+Z)<br />
<code>X</code> –º–µ—Ä—Ç–≤—ã–π (–Ω–µ –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è)</p>
<h3 id="bpytop">bpytop</h3>
<p><code>sudo apt install bpytop</code><br />
<code>pip3 list | grep psutil</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞–∫–µ—Ç<br />
<code>pip3 install psutil --break-system-packages</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç –≤ –æ–±—Ö–æ–¥ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π<br />
<code>python3 -m venv myenv</code> —Å–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ<br />
<code>source myenv/bin/activate</code> –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ<br />
<code>pip install psutil</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∏—Å—Ç–µ–º–µ<br />
<code>bpytop</code><br />
<code>deactivate</code></p>
<h3 id="atop">atop</h3>
<p><code>apt install atop</code><br />
<code>nano /etc/default/atop</code><br />
<code>LOGINTERVAL=10</code><br />
<code>systemctl restart atop</code><br />
<code>atop -g</code> –ø–æ–∫–∞–∑–∞—Ç—å –æ–±—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)<br />
<code>atop -m</code> –ø–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –ø–∞–º—è—Ç—å—é<br />
<code>atop -d</code> –ø–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –¥–∏—Å–∫–∞–º–∏<br />
<code>atop -n</code> –ø–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ç—å—é<br />
<code>atop -v</code> –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö (PPID —Ä–æ–¥–∏—Ç–µ–ª—è, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/–≥—Ä—É–ø–ø–∞, –¥–∞—Ç–∞/–≤—Ä–µ–º—è)<br />
<code>atop -c</code> –ø–æ–∫–∞–∑–∞—Ç—å –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞<br />
<code>atop -A</code> —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ –ø–æ—Ä—è–¥–∫–µ –Ω–∞–∏–±–æ–ª—å—à–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º)<br />
<code>atop -C</code> —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ –ø–æ—Ä—è–¥–∫–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)<br />
<code>atop -M</code> —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ –ø–æ—Ä—è–¥–∫–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏<br />
<code>atop -D</code> —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ –ø–æ—Ä—è–¥–∫–µ –¥–∏—Å–∫–æ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏<br />
<code>atop -N</code> —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ –ø–æ—Ä—è–¥–∫–µ —Å–µ—Ç–µ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏<br />
<code>atop -E</code> —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ –ø–æ—Ä—è–¥–∫–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ GPU</p>
<h3 id="iftop">iftop</h3>
<p><code>apt install iftop</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç<br />
<code>iftop -ti ens33</code> –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±–µ–∑ ncurses<br />
<code>iftop -ts 1 -i ens33</code> –ø–µ—á–∞—Ç—å –æ–¥–Ω–æ–≥–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –≤—ã–≤–æ–¥–∞ (-s) —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥, –∑–∞—Ç–µ–º –≤—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã<br />
<code>iftop -tL 0 -s 1 -i ens33</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ (-L) –¥–ª—è –ø–µ—á–∞—Ç–∏<br />
<code>iftop -ni ens33</code> –Ω–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å –∏–º–µ–Ω–∞ —Ö–æ—Å—Ç–æ–≤<br />
<code>iftop -Ni ens33</code> –Ω–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å –Ω–æ–º–µ—Ä–∞ –ø–æ—Ä—Ç–æ–≤ –≤ —Å–µ—Ä–≤–∏—Å—ã<br />
<code>iftop -pi ens33</code> —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ä–µ–∂–∏–º–µ promiscuous (–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫ –º–µ–∂–¥—É –¥—Ä—É–≥–∏–º–∏ —Ö–æ—Å—Ç–∞–º–∏ –≤ –æ–¥–Ω–æ–º —Å–µ–≥–º–µ–Ω—Ç–µ —Å–µ—Ç–∏)<br />
<code>iftop -bi ens33</code> –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—É —Ç—Ä–∞—Ñ–∏–∫–∞<br />
<code>iftop -Bi ens33</code> –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤ –±–∞–π—Ç–∞—Ö<br />
<code>iftop -o 10si ens33</code> —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Ç–æ—Ä–æ–º—É —Å—Ç–æ–ª–±—Ü—É (—Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ –∑–∞ 10 —Å–µ–∫—É–Ω–¥, –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)</p>
<h3 id="iotop">iotop</h3>
<p><code>apt install iotop</code><br />
<code>iotop -o</code> –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏–ª–∏ –ø–æ—Ç–æ–∫–∏, —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—â–∏–µ –≤–≤–æ–¥-–≤—ã–≤–æ–¥<br />
<code>iotop -ou mysql</code> –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br />
<code>iotop -P</code> –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å—ã, –±–µ–∑ –ø–æ—Ç–æ–∫–æ–≤<br />
<code>iotop -p PID</code></p>
<h2 id="ps">ps</h2>
<p><code>apt-get install -y procps</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç procps<br />
<code>pstree -a</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ (-a) —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã (–¥–µ–º–æ–Ω—ã) –∏ –∏—Ö –¥–æ—á–µ—Ä–Ω–∏–µ –≤ –≤–∏–¥–µ –¥–µ—Ä–µ–≤–∞<br />
<code>ps -FA</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥ (-F, PPID - —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å) –≤—Å–µ—Ö (-A) —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤<br />
<code>ps -LFC mysqld</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø–æ—Ç–æ–∫–∏ (-L) –≤ –∫–æ–ª–æ–Ω–∫–∞—Ö LWP –∏ NLWP –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–æ –∏–º–µ–Ω–∏ (-C)<br />
<code>ps -Fl</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã (—Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è &amp;)<br />
<code>ps f -F</code> –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br />
<code>ps f -u root</code> –∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br />
<code>ps -o pid -u lifailon</code> –≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ pid –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º<br />
<code>ps -p 3618275</code> –Ω–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å –ø–æ –µ–≥–æ PID (-p/-s)<br />
<code>ps -aux --sort -rss</code> –≤—ã–±—Ä–∞—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã, –∫—Ä–æ–º–µ —Ñ–æ–Ω–æ–≤—ã—Ö (-a), —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è—Ç—å —Å –∏–º–µ–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (-u), –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –≤–Ω–µ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ (-x) –∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ RSS, –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è %CPU –∏ %MEM<br />
<code>ps -lax</code> –Ω–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Å –∏–º–µ–Ω–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫ –≤—ã–≤–æ–¥—É –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è WCHAN - —Ä–µ—Å—É—Ä—Å, –∫–æ—Ç–æ—Ä–æ–≥–æ –æ–∂–∏–¥–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å<br />
<code>ps -FA --sort time</code> —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã –ø—Ä–æ—Ü–µ—Å—Å–∞<br />
<code>ps -Ao comm,user,rss,vsz,command</code> –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –≤—ã–≤–æ–¥ –ø–æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—é –ø–∞–º—è—Ç–∏, –Ω–∞–∑–≤–∞–Ω–∏—é –∫–æ–º–∞–Ω–¥—ã/–ø—Ä–æ—Ü–µ—Å—Å–∞ –∏ –ø–æ–ª–Ω–æ–º—É –≤—ã–∑–æ–≤—É –∫–æ–º–∞–Ω–¥—ã —Å –∫–ª—é—á–∞–º–∏<br />
<code>PRI</code> –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–∞<br />
<code>NI</code> —É—Å—Ç—É–ø—á–∏–≤–æ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞ (nice value –æ—Ç 19 –¥–æ -20)<br />
<code>(($PRI+$NI))=((39+-20))=19</code><br />
<code>TTY</code> —Ç–µ—Ä–º–∏–Ω–∞–ª, –∏–∑ –ø–æ–¥ –∫–æ—Ç–æ—Ä–æ–≥–æ –∑–∞–ø—É—â–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å<br />
<code>TIME</code> –æ–±—â–µ–µ –≤—Ä–µ–º—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞, –∑–∞—Ç—Ä–∞—á–µ–Ω–Ω–æ–µ –Ω–∞ —Ä–∞–±–æ—Ç—É –ø—Ä–æ—Ü–µ—Å—Å–∞ (bsdtime/cputime/time) –∏–ª–∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–µ –≤—Ä–µ–º—è (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ + —Å–∏—Å—Ç–µ–º–Ω–æ–µ)<br />
<code>STIME</code> –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥—ã (bsdstart), –µ—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å –±—ã–ª –∑–∞–ø—É—â–µ–Ω –º–µ–Ω–µ–µ 24 —á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥, —Ç–æ —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ –±—É–¥–µ—Ç HH:MM, –µ—Å–ª–∏ –±–æ–ª—å—à–µ, —Ç–æ Mmm:SS (Sep 18)<br />
<code>C</code> —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (%CPU) –∑–∞ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞<br />
<code>%CPU</code> –ø—Ä–æ—Ü–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å—É –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–µ–ª–µ–Ω–Ω–æ–µ –Ω–∞ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –ø—Ä–æ—Ü–µ—Å—Å–∞ (pcpu)<br />
<code>%MEM</code> –ø—Ä–æ—Ü–µ–Ω—Ç —Ä–µ–∞–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –ø—Ä–æ—Ü–µ—Å—Å–æ–º –∏–ª–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ä–µ–∑–∏–¥–µ–Ω—Ç–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∫ –æ–±—ä–µ–º—É —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –ø–∞–º—è—Ç–∏ –Ω–∞ –º–∞—à–∏–Ω–µ (pmem)<br />
<code>SZ</code> —Ä–∞–∑–º–µ—Ä –≤ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –æ–±—Ä–∞–∑–∞ —è–¥—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞.  –°—é–¥–∞ –≤—Ö–æ–¥—è—Ç —Ç–µ–∫—Å—Ç, –¥–∞–Ω–Ω—ã–µ –∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ —Å—Ç–µ–∫–∞<br />
<code>RSS</code> –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –ø–∞–º—è—Ç–∏ (Resident Set Size non-swapped), —Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏, –∫–æ—Ç–æ—Ä—É—é –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–Ω—è–ª (—Ç–æ –µ—Å—Ç—å —á—Ç–æ-—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏–ª –≤ –ø–∞–º—è—Ç—å)<br />
<code>VSZ</code> –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å (Virtual Memory Size) –≤ –∫–∏–ª–æ–±–∞–π—Ç–∞—Ö (1024-–±–∞–π—Ç–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü–∞—Ö), –∫–æ—Ç–æ—Ä—É—é –≤—ã–¥–µ–ª–∏–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å—É, –Ω–æ —ç—Ç–æ –Ω–µ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–Ω —É—Å–ø–µ–ª –≤ —ç—Ç—É –ø–∞–º—è—Ç—å —á—Ç–æ-—Ç–æ –∑–∞–ø–∏—Å–∞—Ç—å<br />
<code>LWP</code> –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–æ—á–µ—Ä–Ω–µ–≥–æ –ø–æ—Ç–æ–∫–∞ (Light-Weight Process), –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω —Ç–µ–∫—É—â–∏–π ID –µ—Å–ª–∏ –æ–¥–∏–Ω –∏–ª–∏ –ø–µ—Ä–≤—ã–π –ø–æ—Ç–æ–∫<br />
<code>NLWP</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (Number) –¥–æ—á–µ—Ä–Ω–∏—Ö –ø–æ—Ç–æ–∫–æ–≤ (ps -LFC mysqld | sed 1d | wc -l)<br />
<code>PSR</code> —è–¥—Ä–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–æ—Ü–µ—Å—Å<br />
<code>STAT</code> R - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, D - –æ–∂–∏–¥–∞–µ—Ç –∑–∞–ø–∏—Å–∏ –Ω–∞ –¥–∏—Å–∫, S - –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω (&lt;20 —Å), T - –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, Z - –∑–æ–º–±–∏, —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Ñ–ª–∞–≥–∞–º–∏ (W - –ø—Ä–æ—Ü–µ—Å—Å –≤—ã–≥—Ä—É–∂–µ–Ω –Ω–∞ –¥–∏—Å–∫, &lt; - –ø—Ä–æ—Ü–µ—Å—Å –∏–º–µ–µ—Ç –ø–æ–≤—ã—à–µ–Ω–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, N - –ø—Ä–æ—Ü–µ—Å—Å –∏–º–µ–µ—Ç –ø–æ–Ω–∏–∂–µ–Ω–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, L - –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –≤ —è–¥—Ä–µ, s - –ø—Ä–æ—Ü–µ—Å—Å —è–≤–ª—è–µ—Ç—Å—è –ª–∏–¥–µ—Ä–æ–º —Å–µ–∞–Ω—Å–∞)<br />
<code>maj_flt</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä—É–ø–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫, –ø—Ä–æ–∏–∑–æ—à–µ–¥—à–∏—Ö —Å –¥–∞–Ω–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º<br />
<code>min_flt</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ–ª–∫–∏—Ö –æ—à–∏–±–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü<br />
<code>ps -Ao comm,user,cputime,pcpu,pmem,sz,rss,vsz,nlwp,psr,pri,ni --sort cputime</code></p>
<h3 id="kill">kill</h3>
<p><code>kill -INT (-2) PID</code> –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è —Å —Ç–µ—Ä–º–∏–Ω–∞–ª–∞, bash –ø–æ—à–ª—ë—Ç —Å–∏–≥–Ω–∞–ª SIGINT –ø—Ä–æ—Ü–µ—Å—Å—É (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ CTRL+C)<br />
<code>kill -KILL (-9) PID</code> –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å<br />
<code>kill -STOP (-19) PID</code> –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å, bash –ø–æ—à–ª—ë—Ç —Å–∏–≥–Ω–∞–ª SIGSTOP –ø—Ä–æ—Ü–µ—Å—Å—É (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ CTRL+Z)<br />
<code>kill -CONT (-18) PID</code> –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å</p>
<h2 id="jobs">jobs</h2>
<p><code>(ping google.com) &amp;</code> –∑–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–¥–∞—á—É –≤ —Ñ–æ–Ω–µ (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è [job] - –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏ –∏ PID –ø—Ä–æ—Ü–µ—Å—Å–∞)<br />
<code>jobs</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á (+ –∑–∞–¥–∞—á–∞ –∞–∫—Ç–∏–≤–Ω–∞)<br />
<code>jobs -l | wc -l</code> –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π<br />
<code>fg 1</code> –æ—Ç–∫—Ä—ã—Ç—å –∑–∞–¥–∞—á—É –ø–æ –Ω–æ–º–µ—Ä—É<br />
<code>disown</code> –∑–∞–≤–µ—Ä—à–∏—Ç—å –≤—Å–µ —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ (—É–¥–∞–ª–∏—Ç—å/–æ—á–∏—Å—Ç–∏—Ç—å –≤—Å—é –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞–Ω–∏–π)<br />
<code>disown %1</code> –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏—é (–µ—Å–ª–∏ –æ–Ω–∞ –ø–µ—Ä–≤–∞—è) –∑–∞–ø—É—â–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É<br />
<code>kill %1</code> –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏—é –∑–∞–ø—É—â–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É</p>
<h2 id="mem">mem</h2>
<p><code>free -m</code> –æ–±—ä–µ–º –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –∏ SWAP –≤ –ú–ë–∞–π—Ç<br />
<code>swapon</code> —Ç–æ—á–∫–∞ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è SWAP, type, size, used, priority (–±–µ—Ä–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ /proc/swaps)<br />
<code>ipcs -lm</code> –æ–±—ä–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü —Ä–∞–∑–¥–µ–ª—è–µ–º–æ–π –ø–∞–º—è—Ç–∏ (shared memory)<br />
<code>cat /proc/meminfo | grep Dirty</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –æ–±—ä–µ–º –≥—Ä—è–∑–Ω—ã—Ö (Dirty) —Å—Ç—Ä–∞–Ω–∏—Ü –≤ –∫—ç—à–µ (–µ—â–µ –Ω–µ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∏—Å–∫)<br />
<code>sync</code> –∑–∞–ø–∏—Å–∞—Ç—å –≤—Å–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ, –Ω–æ –µ—â–µ –Ω–µ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –¥–∏—Å–∫ (–≤–º–µ—Å—Ç–æ –∫—ç—à–∞ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —á–∏—Ç–∞—Ç—å—Å—è –∏–∑ –¥–∏—Å–∫–∞)<br />
<code>cat /proc/meminfo | grep -iE "^cache|^buff"</code> –æ–±—ä–µ–º –∫—ç—à–∞ –∏ –±—É—Ñ–µ—Ä–∞<br />
<code>echo 1 &gt; /proc/sys/vm/drop_caches</code> –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–∏–≥–Ω–∞–ª –Ω–∞ –≤—Ö–æ–¥ drop_caches –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–≥–æ –∫—ç—à–∞ (free buff/cache) - PageCache (—Å–∏–≥–Ω–∞–ª 1)<br />
<code>echo 2 &gt; /proc/sys/vm/drop_caches</code> –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã - inode, dentrie (—Å–∏–≥–Ω–∞–ª 2)</p>
<h3 id="fincore">fincore</h3>
<p><code>fincore /var/log/*</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –∫—ç—à–µ —Å—Ç—Ä–∞–Ω–∏—Ü –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ (page cache)<br />
<code>fincore /var/log/syslog</code> 4.3M (–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–∞, —Ö—Ä–∞–Ω—è—â–∏–µ—Å—è –≤ –ø–∞–º—è—Ç–∏) 1100 (–∫–æ–ª-–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü —Ö—Ä–∞–Ω—è—â–∏–µ—Å—è –≤ –ø–∞–º—è—Ç–∏ PageCache) 199.7M (—Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞)<br />
<code>fincore /var/log/syslog -J</code> –≤—ã–≤–æ–¥ –≤ JSON (--raw –≤—ã–≤–æ–¥ –±–µ–∑ —Ç–∞–±—É–ª–∏—è—Ü–∏–∏, --noheadings –±–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤, --byte —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ –±–∞–π—Ç–∞—Ö)<br />
<code>apt install vmtouch</code><br />
<code>vmtouch /var/log/syslog</code> —É–∑–Ω–∞—Ç—å –∫–∞–∫–æ–π –ø—Ä–æ—Ü–µ–Ω—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–º –∫–µ—à–µ (Resident Pages: 1100/51119  4M/199M  2.15%)</p>
<h3 id="lspage">lspage</h3>
<p><code>fc=$(du -a $1 2&gt; /dev/null | awk '{print $2}' | xargs fincore 2&gt; /dev/null)</code><br />
<code>echo -e "PAGE\tSIZE\tPATH"</code><br />
<code>printf "%s\n" "${fc[@]}" | grep -wvE "0B|SIZE" | awk 'BEGIN {OFS="\t"}; {print $1,$3,$4}'</code></p>
<h2 id="lsof">lsof</h2>
<p><code>PID</code> –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–π –Ω–æ–º–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–∫—Ä—ã–ª —Ñ–∞–π–ª<br />
<code>TID</code> –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–π –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏/–ø–æ—Ç–æ–∫–∞, –ø—É—Å—Ç–æ–π —Å—Ç–æ–ª–±–µ—Ü –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ –Ω–µ –∑–∞–¥–∞—á–∞ –∞ –ø—Ä–æ—Ü–µ—Å—Å<br />
<code>FD</code> —Ñ–∞–π–ª–æ–≤—ã–π –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Ñ–∞–π–ª–∞ (r - –¥–æ—Å—Ç—É–ø –¥–ª—è —á—Ç–µ–Ω–∏—è, w - –¥–æ—Å—Ç—É–ø –¥–ª—è –∑–∞–ø–∏—Å–∏, u - –¥–æ—Å—Ç—É–ø –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏, -r - —Ä–µ–∂–∏–º –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω –∏ –µ—Å—Ç—å —Å–∏–º–≤–æ–ª –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –Ω–∞ —á—Ç–µ–Ω–∏–µ —á–∞—Å—Ç—å —Ñ–∞–π–ª–∞, R - –Ω–∞ –≤–µ—Å—å —Ñ–∞–π–ª)<br />
<code>TYPE</code> —Ç–∏–ø —É–∑–ª–∞, —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ —Å —Ñ–∞–π–ª–æ–º (REG - –æ–±—ã—á–Ω—ã–π —Ñ–∞–π–ª —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã, DIR - –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, CHR - —Å–∏–º–≤–æ–ª—å–Ω—ã–π —Ñ–∞–π–ª, BLK - –±–ª–æ—á–Ω—ã–π —Ñ–∞–π–ª, INET - –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–∫–µ—Ç, unix - –¥–æ–º–µ–Ω–Ω—ã–π —Å–æ–∫–µ—Ç UNIX, IPv4 - IPv4 —Å–æ–∫–µ—Ç, sock - –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å–æ–∫–µ—Ç, DEL - —É–∫–∞–∑–∞—Ç–µ–ª—å Linux –¥–ª—è —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞, LINK - —Ñ–∞–π–ª —Å–∏–º–≤–æ–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏, PIPE: ‚Äî —Å–ø–æ—Å–æ–± –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏)<br />
<code>SIZE/OFF</code> —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –∏–ª–∏ —Å–º–µ—â–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –≤ –±–∞–π—Ç–∞—Ö<br />
<code>lsof | sed 1d | wc -l</code> –∫–æ–ª-–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤/–¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤<br />
<code>cat /proc/sys/fs/file-nr</code> –∫–æ–ª-–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤—ã—Ö –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤ –≤ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç, –æ—Ç–∫—Ä—ã—Ç—ã–µ —Ñ–∞–π–ª—ã –∫–æ—Ç–æ—Ä—ã–µ —Å–µ–π—á–∞—Å –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è<br />
<code>lsof +D /var/log/</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–∞–∫–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ñ–∞–π–ª—ã –≤ –∫–∞—Ç–∞–ª–æ–≥–µ (+D dir) FD: r/w/u<br />
<code>dd if=/dev/zero of=~/dd-zero-file</code> –∑–∞–Ω—è—Ç—å —Ñ–∞–π–ª –ø—Ä–æ—Ü–µ—Å—Å–æ–º dd –∏ Ctrl+Z –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å (–æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ jobs)<br />
<code>ls -lh ~/dd*</code><br />
<code>lsof ~/dd-zero-file</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–∞–∫–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º –∑–∞–Ω—è—Ç —Ñ–∞–π–ª (List Open Files)<br />
<code>lsof -c dd</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –ø–æ –∏–º–µ–Ω–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞/–∫–æ–º–∞–Ω–¥—ã (–≤ —Ñ–æ—Ä–º–∞—Ç–µ wildcard)<br />
<code>lsof -p 1832509</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ —Ñ–∞–π–ª—ã –ø–æ –Ω–æ–º–µ—Ä—É PID-–ø—Ä–æ—Ü–µ—Å—Å–∞ (-p)<br />
<code>lsof -c mysql</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –∫–æ—Ç–æ—Ä—ã–µ –¥–µ—Ä–∂–∏—Ç –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –ø—Ä–æ—Ü–µ—Å—Å–∞ (-c)<br />
<code>lsof -c bash | grep "\.sh"</code> –Ω–∞–π—Ç–∏ –≤—Å–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã<br />
<code>kill -9 $(lsof -t ~/dd-zero-file)</code> –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –¥–ª—è –≤—ã–≤–æ–¥–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤ PID-–ø—Ä–æ—Ü–µ—Å—Å–∞ (-t) –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ —Ñ–∞–π–ª, –¥–ª—è –∏—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (kill)<br />
<code>kill -9 $(lsof -t +D /smb/backup)</code> —É–±–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ umount /smb/backup<br />
<code>lsof -u root</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º <br />
<code>lsof -u^root | wc -l</code> –∏—Å–∫–ª—é—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (^) –∏–∑ –ø–æ–∏—Å–∫–∞ –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–æ–ª-–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤<br />
<code>lsof -i:8080</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–∫—Ä—ã—Ç –ª–∏ –ø–æ—Ä—Ç (-i:)</p>
<h3 id="descriptor">descriptor</h3>
<p><code>lsof -a -p $$ -d 0,1,2</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã —Ç–µ–∫—É—â–µ–≥–æ –∏–Ω—Ç–µ—Ä–ø—Ä–∏—Ç–∞—Ç–æ—Ä–∞ <code>ps $$</code><br />
<code>0u</code> STDIN ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ç–æ–∫ –≤–≤–æ–¥–∞ (—Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã)<br />
<code>1u</code> STDOUT ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ç–æ–∫ –≤—ã–≤–æ–¥–∞ (–Ω–∞ —ç–∫—Ä–∞–Ω/–≤ —Ñ–∞–π–ª)<br />
<code>2u</code> STDERR ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ç–æ–∫ –æ—à–∏–±–æ–∫<br />
<code>cat test.txt 1&gt; out.txt 2&gt; error.txt</code> –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å —É—Å–ø–µ—à–Ω—ã–π –≤—ã–≤–æ–¥ (–µ—Å–ª–∏ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç) –≤ out.txt, –µ—Å–ª–∏ –æ—à–∏–±–∫–∞ –≤ error.txt<br />
<code>cat test2.txt 2&gt; /dev/null</code> –Ω–µ –≤—ã–≤–æ–¥–∏—Ç—å –æ—à–∏–±–∫–∏<br />
<code>cat=$(cat test 2&gt;&amp;1)</code> –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ –æ—à–∏–±–æ–∫ (stderr - standard error) –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥ (stdout - standard output) —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ñ–∞–π–ª–æ–≤–æ–≥–æ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–∞ (&amp;) –≤–º–µ—Å—Ç–æ —Ñ–∞–π–ª–∞</p>
<h2 id="vmstat">vmstat</h2>
<p><code>cat /proc/vmstat</code> –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç nr_free_pages, inactive/active anon, file<br />
<code>cat /proc/zoneinfo</code> —Å —Ä–∞–∑–±–∏–µ–Ω–∏–µ–º –Ω–∞ –∑–æ–Ω—ã –ø–∞–º—è—Ç–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –µ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è<br />
<code>vmstat -V</code> procps-ng 3.3.17 (—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ top)<br />
<code>vmstat -s</code> —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ memory/swap/io/system/cpu<br />
<code>vmstat -d | grep sda</code> —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∏—Å–∫–∞<br />
<code>vmstat -D</code> —Å—É–º–º–∞—Ä–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∏—Å–∫–æ–≤<br />
<code>vmstat -t 1 2</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å 2 –æ—Ç—á–µ—Ç–∞ (—Å—É–º–º–∞—Ä–Ω—ã–π –∏ —Ç–µ–∫—É—â–∏–π) —Å —á–∞—Å—Ç–∞—Ç–æ–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è 1 —Å–µ–∫—É–Ω–¥–∞ –∏ timestamp (-t)<br />
<code>r</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (—Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –∏–ª–∏ –æ–∂–∏–¥–∞—é—â–∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)<br />
<code>b</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ø—è—â–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤<br />
<code>swpd</code> –æ–±—ä–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏<br />
<code>free</code> –æ–±—ä–µ–º —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏<br />
<code>buff</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–º—è—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±—É—Ñ–µ—Ä–æ–≤<br />
<code>cache</code> –æ–±—ä–µ–º –ø–∞–º—è—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–µ—à–∞<br />
<code>inact</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ (-a)<br />
<code>active</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ (-a)<br />
<code>si</code> –æ–±—ä–µ–º –ø–∞–º—è—Ç–∏, –≤—ã–≥—Ä—É–∂–µ–Ω–Ω—ã–π —Å –¥–∏—Å–∫–∞ (/s)<br />
<code>so</code> –æ–±—ä–µ–º –ø–∞–º—è—Ç–∏, –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—ã–π –Ω–∞ –¥–∏—Å–∫ (/s)<br />
<code>bi</code> IOPS (Input/Output Operations Per Second) –±–ª–æ–∫–∏, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –æ—Ç –±–ª–æ—á–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (block input/sec)<br />
<code>bo</code> IOPS –±–ª–æ–∫–∏, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –Ω–∞ –±–ª–æ—á–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (block output/sec)<br />
<code>in</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π –≤ —Å–µ–∫—É–Ω–¥—É, –≤–∫–ª—é—á–∞—è —á–∞—Å—ã<br />
<code>cs</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ —Å–µ–∫—É–Ω–¥—É<br />
<code>us</code> –≤—Ä–µ–º—è, –ø–æ—Ç—Ä–∞—á–µ–Ω–Ω–æ–µ –Ω–∞ –∑–∞–ø—É—Å–∫ –∫–æ–¥–∞, –Ω–µ –æ—Ç–Ω–æ—Å—è—â–µ–≥–æ—Å—è –∫ —è–¥—Ä—É (–≤—Ä–µ–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)<br />
<code>sy</code> –≤—Ä–µ–º—è, –ø–æ—Ç—Ä–∞—á–µ–Ω–Ω–æ–µ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ —è–¥—Ä–∞ (—Å–∏—Å—Ç–µ–º–Ω–æ–µ –≤—Ä–µ–º—è)<br />
<code>id</code> –≤—Ä–µ–º—è –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è<br />
<code>wa</code> –≤—Ä–µ–º—è, –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω–æ–µ –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞<br />
<code>st</code> –≤—Ä–µ–º—è, —É–∫—Ä–∞–¥–µ–Ω–Ω–æ–µ –∏–∑ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã</p>
<h2 id="sysstat">sysstat</h2>
<p><code>apt install sysstat</code></p>
<h3 id="iostat">iostat</h3>
<p><code>iostat -h</code> –≤—ã–≤–æ–¥–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ kb/mb/gb (avg-cpu: %user %system %idle, tps - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É –≤ —Å–µ–∫—É–Ω–¥—É)<br />
<code>iostat -hp</code> –≤—ã–≤–µ—Å—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É –∏ –≤—Å–µ—Ö –µ–≥–æ —Ä–∞–∑–¥–µ–ª–∞–º (-p)<br />
<code>iostat -ky /dev/sd* 1 1 | grep -w sd.</code> –≤—ã–≤–æ–¥–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ –ö–ë–∞–π—Ç (-k), –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–ø–∏—Å–µ–π —Å –∑–∞–¥–∞–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º –ø–µ—Ä–≤—ã–π –æ—Ç—á–µ—Ç —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π —Å –º–æ–º–µ–Ω—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã –æ–ø—É—Å–∫–∞–µ—Ç—Å—è (-y)<br />
<code>iostat -h /dev/sda3 -o JSON</code> –≤—ã–≤–æ–¥ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON</p>
<h3 id="mpstat">mpstat</h3>
<p><code>mpstat</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –ø–æ –∫–∞–∂–¥–æ–º—É —è–¥—Ä—É, –∏ –∫—É–¥–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–µ—Å—É—Ä—Å—ã<br />
<code>mpstat -P ALL</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —è–¥—Ä–∞.<br />
<code>mpstat 2 10</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å 10 —Ä–∞–∑ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã<br />
<code>%user</code> –ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏, –∑–∞–ø—É—â–µ–Ω–Ω—ã–º–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br />
<code>%nice</code> –ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏ –∑–∞–ø—É—â–µ–Ω–Ω—ã–º–∏ –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º<br />
<code>%system</code> –ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ —è–¥—Ä–æ–º<br />
<code>%iowait</code> –ø—Ä–æ—Ü–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ –∑–∞—Ç—Ä–∞—á–µ–Ω–Ω–æ–≥–æ –Ω–∞ –æ–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞, –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–µ, –∑–Ω–∞—á–∏—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Ç—Ä–∞—Ç–∏—Ç—Å—è –Ω–∞ –æ–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞<br />
<code>%steal</code> –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–æ—Å—Ç–æ—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞, –ø–æ–∫–∞ –≥–∏–ø–µ—Ä–≤–∏–∑–æ—Ä –æ—Ç–¥–∞—ë—Ç –º–æ—â–Ω–æ—Å—Ç—å –¥—Ä—É–≥–æ–º—É –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º—É –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—É<br />
<code>%idle</code> –ø—Ä–æ—Ü–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –Ω–µ –∑–∞–Ω—è—Ç –Ω–∏—á–µ–º</p>
<h3 id="pidstat">pidstat</h3>
<p><code>pidstat</code> –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö –∏ –¥–æ—á–µ—Ä–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ —Ç–µ–∫—É—â–∏—Ö –ø–æ—Ç–æ–∫–æ–≤<br />
<code>pidstat -p ALL</code> –≤—ã–≤–µ—Å—Ç–∏ –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏</p>
<h2 id="stress">stress</h2>
<p><code>stress --cpu 2 --timeout 10</code> –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —è–¥–µ—Ä –≤ —Ç–µ—á–µ–Ω–∏–∏ 10 —Å–µ–∫—É–Ω–¥<br />
<code>stress -v N</code> –Ω–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –ø–∞–º—è—Ç—å<br />
<code>stress --io 100 &amp;</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –≤–≤–æ–¥-–≤—ã–≤–æ–¥<br />
<code>iostat -d /dev/sda 1</code><br />
<code>stress --hdd 100 &amp;</code> –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –¥–∏—Å–∫<br />
<code>vmstat 1 100</code></p>
<h3 id="stress-ng">stress-ng</h3>
<p><code>apt-get install stress-ng</code><br />
<code>stress-ng --sequential 0 --class io --timeout 60s --metrics-brie</code> —Ç–µ—Å—Ç –≤–≤–æ–¥–∞ –≤—ã–≤–æ–¥–∞<br />
<code>stress-ng --hdd 5 --hdd-ops 100000</code> –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω–æ 5 —Å—Ç—Ä–µ—Å—Å–æ—Ä–æ–≤ –¥–ª—è –∂—ë—Å—Ç–∫–∏—Ö –¥–∏—Å–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ 100 —Ç—ã—Å. bogo-–æ–ø–µ—Ä–∞—Ü–∏–π<br />
<code>stress-ng --cpu 1 --cpu-method matrixprod --metrics --timeout 60</code><br />
<code>stress-ng --sequential 0 --class memory --timeout 60s --metrics-brief</code><br />
<code>stress-ng --cpu 2 --io 4 --vm 1 --vm-bytes 1G --timeout 60s --metrics-brief</code></p>
<h2 id="smart">smart</h2>
<h3 id="smartmontools">smartmontools</h3>
<p><code>apt install smartmontools</code><br />
<code>smartctl -a /dev/sda</code> —Ç–µ—Å—Ç –¥–∏—Å–∫–∞ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ–ª–∏ –∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ<br />
<code>smartctl -H /dev/sda</code> SMART Health Status</p>
<h3 id="sensors">sensors</h3>
<p><code>apt install lm-sensors</code><br />
<code>sensors-detect</code> —Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –¥–∞—Ç—á–∏–∫–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã<br />
<code>sensors</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –¥–∞—Ç—á–∏–∫–∏</p>
<h3 id="badblocks">badblocks</h3>
<p><code>badblocks -s /dev/sda</code> —Ç–µ—Å—Ç –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –Ω–µ—á–∏—Ç–∞–µ–º—ã—Ö/–±–∏—Ç—ã—Ö –±–ª–æ–∫–æ–≤/—Å–µ–∫—Ç–æ—Ä–æ–≤ –Ω–∞ –¥–∏—Å–∫–µ</p>
<h3 id="hdparm">hdparm</h3>
<p><code>hdparm -I /dev/sda | grep -i model</code> –º–æ–¥–µ–ª—å –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ (Model Number, Serial Number, Firmware Revision)<br />
<code>hdparm -v /dev/sda</code> –∫–æ–ª-–≤–æ —Å–µ–∫—Ç–æ—Ä–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏<br />
<code>hdparm -tT /dev/sda</code> —Ç–µ—Å—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –±–µ–∑ –∫—ç—à–∞ (-t) –∏ —Å –∫—ç—à–µ–º (-T)<br />
<code>hdparm -D /dev/sda</code> –≤–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–µ—Ñ–µ–∫—Ç–∞–º–∏ –¥–∏—Å–∫–æ–≤<br />
<code>hdparm -r /dev/sda</code> –≤–∫–ª—é—á–∞–µ—Ç —Ä–µ–∂–∏–º read only –¥–ª—è –¥–∏—Å–∫–∞<br />
<code>hdparm -A /dev/sda</code> –≤–∫–ª—é—á–∞–µ—Ç —Ä–µ–∂–∏–º read-look-ahead, –∫–æ–≥–¥–∞ –¥–∏—Å–∫ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ —á—Ç–µ–Ω–∏–µ–º, –≤–∫–ª—é—á–µ–Ω–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é<br />
<code>hdparm -a /dev/sda</code> –≤–∫–ª—é—á–∞–µ—Ç —Ä–µ–∂–∏–º read-ahead, –∫–æ–≥–¥–∞ —á—Ç–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å, –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ª—É—á—à–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —á—Ç–µ–Ω–∏—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö<br />
<code>hdparm -b /dev/sda</code> –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∂–µ—Å—Ç–∫–∏–π –¥–∏—Å–∫ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫ –Ω–µ–º—É –æ–±—Ä–∞—â–µ–Ω–∏—è<br />
<code>hdparm -S 1 /dev/sda</code> –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä–∞—â–µ–Ω–∏–µ –º–æ—Ç–æ—Ä–∞ –¥–∏—Å–∫–∞ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫ –Ω–µ–º—É –æ–±—Ä–∞—â–µ–Ω–∏—è<br />
<code>hdparm -B 120 /dev/sda</code> –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏–µ–º Advanced Power Management (APM), —á–µ–º –Ω–∏–∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —Ç–µ–º –ª—É—á—à–µ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ (255 - –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è)<br />
<code>hdparm -Z /dev/sda</code> –æ—Ç–∫–ª—é—á–∞–µ—Ç —Ä–µ–∂–∏–º —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏—è<br />
<code>hdparm -M 128 /dev/sda</code> —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω–µ–º —à—É–º–∞ (–ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ç 128 - –±–æ–ª–µ–µ —Ç–∏—Ö—É—é —Ä–∞–±–æ—Ç—É, –¥–æ 254 - –≤—ã—Å–æ–∫—É—é)</p>
<h2 id="disk">disk</h2>
<p><code>du -sh /home</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (-s)<br />
<code>du -Sh /home</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä –≤—Å–µ—Ö –¥–æ—á–µ—Ä–Ω–∏—Ö (-S) –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –ø–æ –ø—É—Ç–∏<br />
<code>du -h /home</code> –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –ø–æ–¥–∫–∞—Ç–∞–ª–æ–≥–æ–≤ –≤–Ω—É—Ç—Ä–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏<br />
<code>du -ah /home</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –≤—Å–µ—Ö –¥–æ—á–µ—Ä–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤ (-a) –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π</p>
<p><code>lsblk</code> –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –±–ª–æ—á–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (/dev), –∏—Ö SIZE, TYPE (disk/part/lvm) –∏ —Ç–æ—á–∫—É –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (MOUNTPOINTS)<br />
<code>lsblk -e7</code> –≤—ã–≤–æ–¥ –±–µ–∑ loop<br />
<code>lsblk -f</code> –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ–º—É—é FSTYPE, UUID, FSAVAIL - —Å–∫–æ–ª—å–∫–æ —Å–≤–æ–±–æ–¥–Ω–æ –Ω–∞ –¥–∏—Å–∫–µ –∏ FSUSE - —Å–∫–æ–ª—å–∫–æ –∑–∞–Ω—è—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö<br />
<code>lsblk -o NAME,MODEL,SERIAL,SIZE,STATE --nodeps | grep running</code> –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –º–æ–¥–µ–ª—å, —Ä–∞–∑–º–µ—Ä –∏ —Å—Ç–∞—Ç—É—Å –±–µ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ä–∞–∑–¥–µ–ª–æ–≤/lvm (--nodeps)<br />
<code>lsblk -E NAME</code> –∏—Å–∫–ª—é—á–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞ –ø–æ –∫–æ–ª–æ–Ω–∫–µ<br />
<code>lsblk -S</code> –≤—ã–≤–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ SCSI-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö (--scsi)<br />
<code>lsblk -b</code> –≤—ã–≤–æ–¥–∏—Ç—å SIZE –≤ –±–∞–π—Ç–∞—Ö (--bytes)<br />
<code>lsblk -J</code> –≤—ã–≤–æ–¥ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON (--json)<br />
<code>lsblk -P</code> –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ key="value"<br />
<code>lsblk -m</code> –≤—ã–≤–æ–¥–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–∞–≤–∞—Ö –¥–æ—Å—Ç—É–ø–∞</p>
<p><code>df -h</code> –≤—ã–≤–æ–¥–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –æ–±—â–∏–π –æ–±—ä—ë–º (Size), –∑–∞–Ω—è—Ç–æ–≥–æ (Used) –∏ —Å–≤–æ–±–æ–¥–Ω–æ (Avail) –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞<br />
<code>df -h -T</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å Type —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã (ext4/cifs)</p>
<p><code>apt install duf</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å duf<br />
<code>duf</code> –∞–Ω–∞–ª–æ–≥ df</p>
<p><code>mount | grep /dev/</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã<br />
<code>mount | grep -P "mapper|lv|vg"</code> –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ lvm</p>
<p><code>findmnt</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º –≤ –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ<br />
<code>findmnt -l</code> –≤ —Ñ–æ—Ä–º–∞—Ç–µ —Å–ø–∏—Å–∫–∞<br />
<code>findmnt -t ext4</code></p>
<p><code>e2label /dev/sda3</code> —É–∑–Ω–∞—Ç—å –º–µ—Ç–∫—É –¥–∏—Å–∫–∞<br />
<code>blkid</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã—Ö –¥–∏—Å–∫–æ–≤, –∏—Ö UUID –∏ TYPE<br />
<code>lsscsi</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã SCSI —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –∫ —Å–∏—Å—Ç–µ–º–µ</p>
<h3 id="parted">parted</h3>
<p><code>parted -l</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ –Ω–∞ –¥–∏—Å–∫–∞—Ö<br />
<code>parted -l | grep -i model</code><br />
<code>dd if=/dev/zero of=/tmp/disk.img count=1000 bs=1M</code> —Å–æ–∑–¥–∞—Ç—å –æ–±—Ä–∞–∑ –¥–∏—Å–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –Ω—É–ª—è–º–∏ —Ä–∞–∑–º–µ—Ä–æ–º 1–ì–±<br />
<code>parted /tmp/disk.img</code> –ø–µ—Ä–µ–¥–∞—Ç—å parted —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ñ–∞–π–ª-–æ–±—Ä–∞–∑ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –§–°<br />
<code>parted /dev/sdc</code> –ø–µ—Ä–µ–¥–∞—Ç—å parted –¥–∏—Å–∫<br />
<code>mktable gpt</code> —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Ä–∞–∑–¥–µ–ª–æ–≤ GPT<br />
<code>print</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–∏–ø —Ç–∞–±–ª–∏—Ü—ã (Partition Table: GPT) –∏ —Å–ø–∏—Å–æ–∫ —Ä–∞–∑–¥–µ–ª–æ–≤ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ, –µ—Å–ª–∏ –æ–Ω–∏ –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã<br />
<code>print free</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –∏ –≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã<br />
<code>mkpart primary ext4 0 500M</code> —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π, –ø–µ—Ä–≤–∏—á–Ω—ã–π (primary) —Ä–∞–∑–¥–µ–ª —Å –§–° ext4 —Ä–∞–∑–º–µ—Ä–æ–º 500–ú–±.<br />
<code>mkpart primary ext4 500 1000M</code> —Å–æ–∑–¥–∞—Ç—å –≤—Ç–æ—Ä–æ–π —Ä–∞–∑–¥–µ–ª (–Ω–∞—á–∞–ª–æ –∏ –∫–æ–Ω–µ—Ü)<br />
<code>resizepart 2 600M</code> —É–º–µ–Ω—å—à–∏—Ç—å 2-–π —Ä–∞–∑–¥–µ–ª –¥–æ 100–ú–ë (—É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è end-–∫–æ–Ω–µ—Ü)<br />
<code>resizepart 2 100%</code> —É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ –≤—Å–µ–≥–æ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞<br />
<code>rm 2</code> —É–¥–∞–ª–∏—Ç—å —Ä–∞–∑–¥–µ–ª</p>
<h3 id="fdisk">fdisk</h3>
<p><code>fdisk -l</code> –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø–æ—Å—Ç—Ä–æ—á–Ω–æ —Å —Ä–∞–∑–º–µ—Ä–æ–º —Å–µ–∫—Ç–æ—Ä–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞<br />
<code>fdisk -x</code> –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥ (—É–∑–Ω–∞—Ç—å UUID —Ä–∞–∑–¥–µ–ª–æ–≤)<br />
<code>fdisk -l | grep /dev/sd</code><br />
<code>fdisk -l | grep -E "/dev/sd.[1-9]"</code><br />
<code>fdisk -l | grep -E "lv|vg"</code><br />
<code>fdisk /dev/sdc</code><br />
<code>m</code> —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥<br />
<code>p</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ä–∞–∑–º–µ—Ä –¥–∏—Å–∫–∞ –∏ —Å–ø–∏—Å–æ–∫ —Ä–∞–∑–¥–µ–ª–æ–≤ (/dev/sdc1)<br />
<code>n</code> —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª (p), —É–∫–∞–∑–∞—Ç—å –Ω–æ–º–µ—Ä —Ä–∞–∑–¥–µ–ª–∞ - partition number (4-128, default 4), –Ω–∞—á–∞–ª–æ –∏ –∫–æ–Ω—Ü–µ —Å–µ–∫—Ç–æ—Ä–∞ - enter (–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)<br />
<code>i</code> –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Ä–∞–∑–¥–µ–ª–µ —Ä–∞–∑–¥–µ–ª–µ (–Ω–∞—á–∞–ª–æ, –∫–æ–Ω–µ—Ü, –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä —Å–µ–∫—Ç–æ—Ä–∞ –∏ —Ä–∞–∑–º–µ—Ä –¥–∏—Å–∫–∞)<br />
<code>t</code> –∑–∞–¥–∞—Ç—å —Ç–∏–ø —Ä–∞–∑–¥–µ–ª–∞ - 30/8E (Linux LVM) –∏–ª–∏ 20/83 (Linux filesystem)<br />
<code>l</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤<br />
<code>w</code> —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å<br />
<code>q</code> –≤—ã—Ö–æ–¥<br />
<code>partprobe /dev/sdc</code> –∏–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —è–¥—Ä–æ –û–° –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö —Ç–∞–±–ª–∏—Ü—ã —Ä–∞–∑–¥–µ–ª–æ–≤, –∑–∞–ø—Ä–∞—à–∏–≤–∞—è —É —Å–∏—Å—Ç–µ–º—ã, —á—Ç–æ–±—ã –æ–Ω–∞ –ø–µ—Ä–µ—á–∏—Ç–∞–ª–∞ —Ç–∞–±–ª–∏—Ü—É —Ä–∞–∑–¥–µ–ª–æ–≤</p>
<h3 id="sfdisk">sfdisk</h3>
<p><code>sfdisk -d /dev/sdc &gt; sdc.partition.table.txt</code> backup (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ dump cfdisk)<br />
<code>sfdisk -f /dev/sdc &lt; sdc.partition.table.txt</code> –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</p>
<p><code>sfdisk -d /dev/sda | sfdisk -f /dev/sdd</code> –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è MD RAID1 (sda –≤ sdd)<br />
<code>mdadm --manage /dev/md1 --add /dev/sdd1</code> –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è<br />
<code>watch cat /proc/mdstat</code> –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏</p>
<ul>
<li>–ù–æ–≤—ã–π –¥–∏—Å–∫ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è LVM:</li>
</ul>
<p><code>ls /dev/sd*</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ –¥–∏—Å–∫–∏ –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ<br />
<code>fdisk -l</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ –¥–∏—Å–∫–∏ —á–µ—Ä–µ–∑ fdisk<br />
<code>cfdisk /dev/sda</code> —Ä–∞–∑–º–µ—Ç–∫–∞ –¥–∏—Å–∫–∞ –Ω–∞ —Ä–∞–∑–¥–µ–ª—ã (–Ω–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç)<br />
<code>cfdisk /dev/sdb</code> –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –¥–∏—Å–∫, –≤—ã–±—Ä–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Ä–∞–∑–¥–µ–ª–æ–≤ (gpt)<br />
<code>new - sda4</code> —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª sda4 –∏–ª–∏ sdb1<br />
<code>Free space - Partition size: 100G</code><br />
<code>write - yes</code><br />
<code>pvcreate /dev/sda4</code> —Å–æ–∑–¥–∞—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ç–æ–º –∏–∑ —Ä–∞–∑–¥–µ–ª–∞<br />
<code>vgextend ubuntu-vg /dev/sda4</code> –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª –≤ –≥—Ä—É–ø–ø—É<br />
<code>lvextend -l +100%FREE /dev/ubuntu-vg/ubuntu-lv</code> –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –≤ –≥—Ä—É–ø–ø–µ –¥–ª—è –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ ubuntu-lv<br />
<code>lsblk</code><br />
<code>df -h</code> —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –≤–∏–¥–µ—Ç—å —Å—Ç–∞—Ä—ã–π –æ–±—ä–µ–º –¥–∏—Å–∫–∞, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –ø–æ –∏–∑–º–µ–Ω–µ–Ω–∏—é —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã<br />
<code>df -T -h</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–∏–ø –§–°<br />
<code>resize2fs -f /dev/ubuntu-vg/ubuntu-lv</code> –¥–ª—è ext*<br />
<code>btrfs filesystem resize +100g /</code> –¥–ª—è btrfs</p>
<ul>
<li>–ù–æ–≤—ã–π –¥–∏—Å–∫ –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞:</li>
</ul>
<p><code>cfdisk /dev/sd—Å</code> —Å–æ–∑–¥–∞—Ç—å —Ä–∞–∑–¥–µ–ª (cfdisk/fdisk/parted)<br />
<code>mkfs.ext4 /dev/sdc1</code> —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª<br />
<code>mkdir /mnt/sdc1 &amp;&amp; mount /dev/sdc1 /mnt/sdc1</code> –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª, -o -r - –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ —á—Ç–µ–Ω–∏–µ (--options --read-only)<br />
<code>df -h &amp;&amp; lsblk</code> —Ä–∞–∑–¥–µ–ª –Ω–æ–≤–æ–≥–æ –¥–∏—Å–∫–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ Mounted on –∏–ª–∏ MOUNTPOINTS<br />
<code>chmod 0777 /mnt/sdc1</code> —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –¥–æ—Å—Ç—É–ø –∫ –¥–∏—Å–∫—É<br />
<code>df -h -T</code> –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–∏–ø —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤<br />
<code>nano /etc/fstab</code> —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏—ã<br />
<code>/dev/sdc1 /mnt/sdc1 ext4 rw,relatime 0 0</code> –¥–æ–±–∞–≤–∏—Ç—å –ø–æ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—é –∏–ª–∏ UUID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞<br />
<code>umount /dev/sdc1</code> –æ—Ç–º–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª</p>
<h3 id="swap">swap</h3>
<p><code>fallocate -l 4G /swapfile.img</code> —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –¥–ª—è swap<br />
<code>dd if=/dev/zero of=/swapfile.img count=1024 bs=1M</code> —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –¥–ª—è swap<br />
<code>chmod 600 /swapfile.img</code> –¥–∞—Ç—å –ø—Ä–∞–≤–∞<br />
<code>mkswap /swapfile.img</code> —Å–æ–∑–¥–∞—Ç—å swap-–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–∑ —Ñ–∞–π–ª–∞ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—è –≤–µ—Å—å –æ–±—ä—ë–º —Ä–∞–∑–¥–µ–ª–∞ (mkswap /dev/sda4)<br />
<code>swapon /swapfile.img</code> –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å swap-–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ<br />
<code>echo '/swapfile.img none swap sw 0 0' | sudo tee -a /etc/fstab</code> –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å<br />
<code>free -m</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –æ–±—ä—ë–º<br />
<code>swapoff -a</code> –æ—Ç–∫–ª—é—á–∏—Ç—å<br />
<code>rm /swapfile.img</code> —É–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª</p>
<h2 id="lvm">lvm</h2>
<p><strong>Logical Volume Management</strong> - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–º–∏ —Ç–æ–º–∞–º–∏, —ç—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–ª–æ–π –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –æ—Ç –∂–µ–ª–µ–∑–∞, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π —Å–æ–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–Ω—ã—Ö –¥–∏—Å–∫–æ–≤ –≤ –æ–¥–∏–Ω, –∏ –∑–∞—Ç–µ–º —Ä–∞–∑–±–∏—Ç—å –µ–≥–æ –Ω–∞ –≥—Ä—É–ø–ø—ã –∏ —Ä–∞–∑–¥–µ–ª—ã. –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π RAID 0 –∏ 1 (–∑–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ) —Å —É–ø—Ä–∞–≤–ª—è–µ–º—ã–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º, —Å–Ω–∞–ø—à–æ—Ç–∞–º–∏ –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ç–æ–º–æ–≤ –≤ –¥—Ä—É–≥—É—é —Å–∏—Å—Ç–µ–º—É.</p>
<ul>
<li>PV (Physical Volume) ‚Äî —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —Ç–æ–º–∞</li>
</ul>
<p><code>pvs</code> –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ Physical Volume<br />
<code>pvdisplay</code> –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è<br />
<code>pvcreate /dev/sdb</code> –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏—Å–∫–∞ –≤ LVM –∫–∞–∫ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —Ç–æ–º</p>
<ul>
<li>VG (Volume Group) ‚Äî –≥—Ä—É–ø–ø—ã —Ç–æ–º–æ–≤, –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —Ç–æ–º–æ–≤ –∏ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—â–µ–≥–æ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –¥–∏—Å–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Ä–∞–∑–±–∏–≤–∞—Ç—Å—å—è –Ω–∞ —Ä–∞–∑–¥–µ–ª—ã</li>
</ul>
<p><code>vgs</code> –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ Volume Group<br />
<code>vgdisplay</code> –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è<br />
<code>vgcreate vg21 /dev/sdb</code> —Å–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É —Ç–æ–º–æ–≤ —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —Ç–æ–º–∞ –Ω–∞ –¥–∏—Å–∫–µ sdb</p>
<ul>
<li>LV (Logical Volume) ‚Äî –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ä–∞–∑–¥–µ–ª—ã</li>
</ul>
<p><code>lvs</code> –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ Logic Volume –∏ –∏—Ö –æ–±—ä—ë–º<br />
<code>lvdisplay</code> –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è<br />
<code>lvcreate -n boot -L 1G vg21</code> —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π –ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–¥–µ–ª —Å –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ–º boot<br />
<code>lvcreate -n home -L 9G vg21</code> —Å–æ–∑–¥–∞—Ç—å –≤—Ç–æ—Ä–æ–π –ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–¥–µ–ª —Å –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ–º home<br />
<code>lvcreate -n lv21 -l+100%FREE vg21</code> —Å–æ–∑–¥–∞—Ç—å –æ–¥–∏–Ω –ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–¥–µ–ª lv21 –¥–ª—è –≥—Ä—É–ø–ø—ã —Ç–æ–º–æ–≤ vg21 –∏ –Ω–∞–∑–Ω–∞—á–∏—Ç—å –µ–º—É –≤–µ—Å—å –æ–±—ä–µ–º –¥–∏—Å–∫–∞<br />
<code>mkfs -t ext4 /dev/vg21/lv21</code> –Ω–∞–∑–Ω–∞—á–∏—Ç—å —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º ext4<br />
<code>mkdir /mnt/lv21</code> —Å–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É –¥–ª—è –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è<br />
<code>mount /dev/vg21/lv21 /mnt/lv21</code> –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª –∫ —Å–æ–∑–¥–∞–Ω–Ω–æ–π –ø–∞–ø–∫–µ<br />
<code>echo "/dev/vg21/lv21 /mnt/lv21 ext4 defaults 0 0" &gt;&gt; /etc/fstab</code> –¥–æ–±–∞–≤–∏—Ç—å –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∫—É</p>
<ul>
<li>–£–≤–µ–ª–∏—á–∏—Ç—å</li>
</ul>
<p>–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∑–∞ —Å—á–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–∏—Å–∫–∞ –ø—É—Ç—ë–º –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –≥—Ä—É–ø–ø—É –∏–ª–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ–º –∏–º–µ—é—â–µ–≥–æ—Å—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –¥–∏—Å–∫–∞.<br />
<code>pvcreate /dev/sdc</code> e—Å–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π –¥–∏—Å–∫, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º (–º–∏–Ω—É—Å: –µ—Å–ª–∏ –æ–¥–∏–Ω –∏–∑ –¥–∏—Å–∫–æ–≤ –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ —Å—Ç—Ä–æ—è, –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Ä–∞–±–æ—Ç–µ RAID 0)<br />
<code>pvresize /dev/sdb</code> –µ—Å–ª–∏ —É–≤–µ–ª–∏—á–∏–Ω –æ–±—ä–µ–º –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –¥–∏—Å–∫–∞ (resize - –∏–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —Ç–æ–º–∞)<br />
<code>vgextend vg21 /dev/sdc</code> —Ä–∞—Å—à–∏—Ä–∏—Ç—å –≥—Ä—É–ø–ø—É vg21 –∑–∞ —Å—á–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –¥–∏—Å–∫–∞ sdc (–∏–ª–∏ vgdisplay)<br />
<code>vgs</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç —É –∫–∞–∫–æ–π –∏–∑ –≥—Ä—É–ø–ø –≤—Å–µ–≥–æ –ø–∞–º—è—Ç–∏ VSize –∏ —Å–∫–æ–ª—å–∫–æ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–∞–º—è—Ç–∏ VFree –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–∏–ª–µ–Ω–∏—è –ª–æ–≥–∏—á–µ—Å–∫–∏–º —Ä–∞–∑–¥–µ–ª–∞–º –ø–∞–º—è—Ç–∏, –∫–æ—Ç–æ—Ä—É—é —Ä–∞—Å—à–∏—Ä–∏–ª–∏<br />
<code>lvextend -l +100%FREE /dev/vg21/lv21</code> –¥–æ–±–∞–≤–∏—Ç—å –≤—Å–µ —Å–≤–æ–±–æ–¥–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞—Å—Ç–≤–æ –ª–æ–≥–∏—á–µ—Å–∫–æ–º—É —Ä–∞–∑–¥–µ–ª—É<br />
<code>vgs</code> VFree –±—É–¥–µ—Ç=0 –∞ –≤ lsblk –æ–±—ä—ë–º —Ä–∞–∑–¥–µ–ª–∞ —É–≤–µ–ª–∏—á–∏—Ç—Å—è<br />
<code>lvextend -L+1G /dev/vg21/lv21</code> –¥–æ–±–∞–≤–∏—Ç—å 1–ì–± –æ—Ç –≥—Ä—É–ø–ø—ã —Ç–æ–º–æ–≤ vg21 —Ä–∞–∑–¥–µ–ª—É lv21<br />
<code>lvextend -L500G /dev/vg21/lv21</code> –¥–æ–±–∞–≤–∏—Ç—å –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –¥–∏—Å–∫–∞ 500–ì–±<br />
<code>lvs</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å<br />
<code>df -T</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∏—Å–ø–æ–ª—å–∑—É–µ–º—É—é –§–°<br />
<code>resize2fs /dev/vg01/lv01</code> –∏–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä –¥–ª—è —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã ext4</p>
<ul>
<li>–£–º–µ–Ω—å—à–∏—Ç—å</li>
</ul>
<p><code>e2fsck -fy /dev/vg21/lv21</code> –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Å–∫–∞<br />
<code>resize2fs /dev/vg21/lv21 500M</code> —É–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä –§–° –Ω–∞ 500–ú–±–∞–π—Ç<br />
<code>lvreduce -L-500 /dev/vg21/lv21</code> —É–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Ç–æ–º–∞ –Ω–∞ 500–ú–±–∞–π—Ç<br />
<code>vgs</code> –¥–æ–±–∞–≤–∏—Ç—Å—è VFree 500m –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥—Ä—É–≥–æ–π –ª–æ–≥–∏—á–µ—Å–∫–æ–π –≥—Ä—É–ø–ø–µ</p>
<p><code>resize2fs /dev/ubuntu-vg/ubuntu-lv 1G</code> —É–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä –§–° –Ω–∞ 500–ú–±–∞–π—Ç<br />
<code>lvreduce -L-1000 /dev/ubuntu-vg/ubuntu-lv</code> —É–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Ç–æ–º–∞ –Ω–∞ 1000–ú–±–∞–π—Ç (Logical volume ubuntu-vg/ubuntu-lv successfully resized)<br />
<code>vgs</code> VFree 1000.00m</p>
<ul>
<li>–£–¥–∞–ª–∏—Ç—å</li>
</ul>
<p><code>umount /dev/vg21/lv21</code> –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–º–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å<br />
<code>lvremove /dev/vg21/lv21</code> —É–¥–∞–ª–∏—Ç—å –ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ç–æ–º<br />
<code>lvs</code> –Ω–µ—Ç –≥—Ä—É–ø–ø<br />
<code>vgs</code> VSize –∏ VFree –æ–±—ä—ë–º —Å–æ–≤–ø–∞–¥–∞–µ—Ç<br />
<code>vgremove vg21</code> —É–¥–∞–ª–∏—Ç—å –≥—Ä—É–ø–ø—É —Ç–æ–º–æ–≤<br />
<code>pvremove /dev/sdb</code> —É–¥–∞–ª–∏—Ç—å –¥–∏—Å–∫ sdb –∏–∑ LVM</p>
<ul>
<li>RAID 1</li>
</ul>
<p>–ù–æ–≤—ã–π –¥–∏—Å–∫ sdc —Ä–∞–∑–±–∏—Ç—å –Ω–∞ 2 —Ä–∞–∑–¥–µ–ª–∞ (–æ—Å–Ω–æ–≤–Ω–æ–π sdc1, –Ω–µ–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ —á–µ–º —É —Ü–µ–ª–µ–≤–æ–≥–æ –∑–µ—Ä–∫–∞–ª–∏—Ä—É–µ–º–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ lv21 –∏ sdc2 –æ—Å—Ç–∞–≤—à–∏–π—Å—è –æ–±—ä–µ–º –¥–ª—è –≤–µ–¥–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –∂—É—Ä–Ω–∞–ª–∞)<br />
<code>pvcreate /dev/sdc1 /dev/sdc2</code> –¥–æ–±–∞–≤–∏—Ç—å –æ–±–∞ —Ä–∞–∑–¥–µ–ª–∞ –≤ LVM<br />
<code>vgextend vg21 /dev/sdc1 /dev/sdc2</code> –¥–æ–±–∞–≤–∏—Ç—å –≤ –∏–º–µ—é—â–∏—é—Å—è –≥—Ä—É–ø–ø—É vg21 (—Ä–∞—Å—à–∏—Ä–∏—Ç—å –≥—Ä—É–ø–ø—É vg21)<br />
<code>vgs</code> —É –≥—Ä—É–ø–ø—ã vg21 VFree —É–≤–µ–ª–∏—á–∏—Ç—Å—è –æ–±—ä—ë–º –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ç–æ–º–æ–≤-—Ä–∞–∑–¥–µ–ª–æ–≤<br />
<code>lvconvert -m1 /dev/vg21/lv21 /dev/sdb /dev/sdc1 /dev/sdc2</code> –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ç–æ–º lv21, –≤—Ö–æ–¥—è—â–∏–π –≤ —Å–æ—Å—Ç–∞–≤ –≥—Ä—É–ø–ø—ã vg21 –≤ –∑–µ—Ä–∫–∞–ª–∏—Ä—É–µ–º—ã–π —Ç–æ–º (-m1), –∑–µ—Ä–∫–∞–ª–∏—Ä—É–µ—Ç—Å—è /dev/sdb (–≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è lv21) –Ω–∞ sd—Å1, –∞ /dev/sd—Å2 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–µ–¥–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –∂—É—Ä–Ω–∞–ª–∞.</p>
<p><code>lvs -a -o +devices</code> —Ä–∞–∑–¥–µ–ª lv21 –ø–∏—à–µ—Ç –Ω–∞ 2 —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</p>
<pre><code>[lv21_rimage_0] /dev/sdb(0) # –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–æ–º
[lv21_rimage_1] /dev/sdc1(1) # –∑–µ—Ä–∫–∞–ª–æ
</code></pre>
<p><code>lsblk</code></p>
<pre><code>sdb                     8:16    0    4G  0 disk
+-vg21-lv21_rmeta_0    253:0    0    4M  0 lvm
¬¶ L-vg21-lv21          253:4    0    2G  0 lvm
L-vg21-lv21_rimage_0   253:1    0    2G  0 lvm
  L-vg21-lv21          253:4    0    2G  0 lvm
sdc                     8:32    0    4G  0 disk
+-sdc1                  8:33    0    3G  0 part
¬¶ +-vg21-lv21_rmeta_1  253:2    0    4M  0 lvm
¬¶ ¬¶ L-vg21-lv21        253:4    0    2G  0 lvm
¬¶ L-vg21-lv21_rimage_1 253:3    0    2G  0 lvm
¬¶   L-vg21-lv21        253:4    0    2G  0 lvm
</code></pre>
<p>–ò–∑–≤–ª–µ–∫–∞–µ–º (—É–¥–∞–ª—è–µ–º) <code>sdb</code> (–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –¥–∏—Å–∫)<br />
<code>lsblk</code> –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–≤–∞ —Ä–∞–∑–¥–µ–ª–∞ (part) sdc1 –∏ sdc2 –∑–µ—Ä–∫–∞–ª—å–Ω–æ–≥–æ –¥–∏—Å–∫–∞ –±–µ–∑ LVM, —Ç.–∫. –≥—Ä—É–ø–ø–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞<br />
–ö–æ–º–∞–Ω–¥–æ–π <code>lvs</code> –≤–∏–¥–∏–º –≥—Ä—É–ø–ø—É <code>vg21</code> –∏ –æ—à–∏–±–∫–∏:</p>
<pre><code>WARNING: Couldn't find device with uuid stBI99-6Qs3-B8lr-Ekaw-ahnD-oxPc-LsayLR.
WARNING: VG vg21 is missing PV stBI99-6Qs3-B8lr-Ekaw-ahnD-oxPc-LsayLR (last written to /dev/sdb).
</code></pre>
<p><code>vgchange -ay vg21</code> –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—É<br />
<code>mount /dev/vg21/lv21 /mnt/lv21</code> –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—É lv21</p>
<ul>
<li>Snapshot</li>
</ul>
<p><code>lvs</code><br />
<code>lvcreate -L 1G -s -n snap-1 /dev/ubuntu-vg/ubuntu-lv</code> –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å VFree –≤ Volume Group (Logical volume "snap-1" created)<br />
<code>lvcreate -L 1G -s -n snap-1 /dev/vg21/lv21</code> –ø–∞—Ä–∞–º–µ—Ç—Ä -s –ø–æ–º–µ—á–∞–µ—Ç, —á—Ç–æ 1–ì–± –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–∑ –≥—Ä—É–ø–ø—ã vg21 –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è snapshot lv21 <br />
<code>lvs</code> Origin - –∫ –∫–∞–∫–æ–º—É –ª–æ–≥–∏—á–µ—Å–∫–æ–º—É —Ç–æ–º—É (lv) –æ—Ç–Ω–æ—Å–∏—Ç—å—Å—è snapshot, Data% ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –æ–±—ä–µ–º–∞ –æ—Ç –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ.<br />
<code>lsblk</code> –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ç–æ–º–∞—Ö —Ä–∞–∑–¥–µ–ª–æ–≤<br />
<code>mount /dev/vg21/snap-1 /mnt/snap</code> —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–Ω–∞–ø—à–æ—Ç–∞ –º–æ–∂–Ω–æ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ –æ–±—ã—á–Ω—ã–π —Ä–∞–∑–¥–µ–ª, –µ—Å–ª–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏–≤–∞—Ä–æ—Ç—å —Å–Ω–∞–ø—à–æ—Ç –∏ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∫ –Ω–µ–º—É, –º—ã –ø–æ–ª—É—á–∏–º —Ç–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–ª–∏<br />
<code>lvconvert --merge /dev/vg21/snap-1</code> –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∫ —Å–Ω–∞–ø—à–æ—Ç—É snap-1, –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –û–° (–¥–∞–∂–µ –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–∏—Å–∫)</p>
<ul>
<li>Export/Import</li>
</ul>
<p><code>umount /dev/vg21/lv21</code> –æ—Ç–º–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å<br />
<code>vgchange -an vg21</code> –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—É —Ç–æ–º–æ–≤ (0 logical volume –≤ volume group "vg21")<br />
<code>vgexport vg21</code> —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—É (successfully exported)<br />
<code>pvdisplay</code> —Å–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø (VG Name vg21 (exported))<br />
–ü–µ—Ä–µ–Ω–æ—Å–∏–º –¥–∏—Å–∫ –Ω–∞ –Ω–æ–≤—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä:<br />
<code>pvscan</code> —Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—ã –Ω–∞ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ (PV /dev/sdb is in exported VG vg21)<br />
<code>vgimport vg21</code> –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É (successfully imported)<br />
<code>vgs –∏ lvs</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≥—Ä—É–ø–ø—ã<br />
<code>vgchange -ay vg21</code> –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—É (1+ lg –≤ vg "vg21")<br />
<code>lsblk</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ LVM</p>
<h2 id="md">md</h2>
<blockquote>
<p>SOFT RAID</p>
</blockquote>
<p><code>mdadm --zero-superblock --force /dev/sd{b,c}</code> –∑–∞–Ω—É–ª–∏—Ç—å –≤—Å–µ —Å—É–ø–µ—Ä–±–ª–æ–∫–∏ –Ω–∞ –¥–∏—Å–∫–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ RAID-–º–∞—Å—Å–∏–≤, —Ç.–∫. –¥–∏—Å–∫–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª—É–∂–µ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥—Ä—É–≥–∏—Ö RAID (–≤—ã–≤–æ–¥: unrecognised md component device - –Ω–∏ –æ–¥–∏–Ω –∏–∑ –¥–∏—Å–∫–æ–≤ —Ä–∞–Ω–µ–µ –Ω–µ –±—ã–ª –¥–æ–±–∞–≤–ª–µ–Ω –≤ –º–∞—Å—Å–∏–≤)<br />
<code>mdadm --create --verbose /dev/md0 -l 1 -n 2 /dev/sd{b,c}</code> —Å–æ–∑–¥–∞—Ç—å –∑–µ—Ä–∫–∞–ª—å–Ω—ã–π RAID1 (-l/--leve 1) –∏ —É–∫–∞–∑–∞—Ç—å –∫–æ–ª-–≤–æ –¥–∏—Å–∫–æ–≤ (-n/--raid-devices)<br />
<code>mkfs.ext4 /dev/md0</code> —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ fs ext4<br />
<code>mkdir /md0-sdb-sdc-raid1</code> —Å–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è<br />
<code>mount /dev/md0 /md0-sdb-sdc-raid1</code> –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é<br />
<code>lsblk -o NAME,UUID | grep md*</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å UUID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞<br />
<code>echo "UUID=20482c47-fa11-462d-b7b8-93a342a7edf8 /md0-sdb-sdc-raid1 ext4 defaults 1 2" &gt;&gt; /etc/fstab</code> –¥–æ–±–∞–≤–∏—Ç—å –≤ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É –ø–æ UUID, —Ç.–∫. –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –û–° –Ω–æ–º–µ—Ä –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –Ω–∞ md127<br />
<code>mount -a</code> –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏–∑ fstab<br />
<code>cat /proc/mdstat</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö RAID-–º–∞—Å—Å–∏–≤–æ–≤: md127 : active raid1 sdc[1] sdb[0]<br />
<code>mdadm -D /dev/md127</code> –ø–æ–¥—Ä–æ–±–Ω–æ–µ (--detail) —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞. State: cleane (–ø—Ä–æ–±–ª–µ–º –Ω–µ—Ç)/degraded (–¥–∏—Å–∫ –Ω–µ–∏—Å–ø—Ä–∞–≤–µ–Ω/–ø–æ–≤—Ä–µ–∂–¥–µ–Ω). Active/Working/Failed/Spare Devices - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö (–≤ —Ä–∞–±–æ—Ç–µ)/—Ä–∞–±–æ—á–∏—Ö/–Ω–µ—Ä–∞–±–æ—á–∏—Ö/–∑–∞–ø–∞—Å–Ω—ã—Ö –¥–∏—Å–∫–æ–≤ –≤ –º–∞—Å—Å–∏–≤–µ. Consistency Policy - —Ç–∏–ø —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ—Å–ª–µ —Å–±–æ—è –≤ –º–∞—Å—Å–∏–≤–µ (resync - –ø–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –º–∞—Å—Å–∏–≤–∞).<br />
<code>mdadm /dev/md127 --add /dev/sdd</code> –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∞—Å–Ω–æ–π –¥–∏—Å–∫ (–≤ Spare Device) –¥–ª—è –≥–æ—Ä—á–µ–π –∑–∞–º–µ–Ω—ã (Hot-Spare), –≤ —Å—Ç–∞—Ç—É—Å–µ —Å–ø–∏—Å–∫–∞ –¥–∏—Å–∫–æ–≤ –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω –∫–∞–∫–æ–π –¥–∏—Å–∫ (State - spare /dev/sdd)<br />
<code>mdadm -G /dev/md127 ‚Äîraid-devices=3</code> —Ä–∞—Å—à–∏—Ä–∏—Ç—å –º–∞—Å—Å–∏–≤ –¥–æ —Ç—Ä–µ—Ö –¥–∏—Å–∫–æ–≤ (–¥–æ–±–∞–≤–∏—Ç—Å—è –∏–∑ –∑–∞–ø–∞—Å–Ω—ã—Ö –¥–∏—Å–∫–æ–≤ –≤ –∞–∫—Ç–∏–≤–Ω—ã–π –≤ –º–∞—Å—Å–∏–≤)<br />
<code>mdadm /dev/md127 --fail /dev/sdb</code> –ø–æ–º–µ—Ç–∏—Ç—å —Ä–∞–±–æ—á–∏–π –¥–∏—Å–∫ –∫–∞–∫ –Ω–µ—Ä–∞–±–æ—á–∏–π (–ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –¥–∏—Å–∫ –≤ Failed Device) –¥–ª—è –∑–∞–º–µ–Ω—ã –Ω–∞ –∑–∞–ø–∞—Å–Ω–æ–π –∏–∑ Spare Device, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—á–Ω–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –¥–ª—è –≤–≤–æ–¥–∞ –≤ –º–∞—Å—Å–∏–≤ (Rebuild Status : 50% complete)<br />
<code>mdadm /dev/md127 --remove /dev/sdb</code> —É–¥–∞–ª–∏—Ç—å –Ω–µ—Ä–∞–±–æ—á–∏–π –¥–∏—Å–∫ –∏–∑ –º–∞—Å—Å–∏–≤–∞<br />
<code>mdadm --stop /dev/md127</code> –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å/—Ä–∞–∑–æ–±—Ä–∞—Ç—å –º–∞—Å—Å–∏–≤ (–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ umount /md0-sdb-sdc-raid1). –í —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –æ–¥–∏–Ω –∏–∑ –¥–≤—É—Ö –¥–∏—Å–∫–æ–≤ –±—ã–ª –∏–∑–≤–ª–µ—á–µ–Ω –∏ –Ω–µ –±—ã–ª–æ –∑–∞–ø–∞—Å–Ω—ã—Ö –¥–∏—Å–∫–æ–≤, –º–∞—Å—Å–∏–≤ –±—É–¥–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (State : inactive)<br />
<code>mdadm --assemble --scan --verbose</code> –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–æ—Å–∫–∞–Ω–∏—Ä—É–µ—Ç –≤—Å–µ –¥–∏—Å–∫–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Ä–∞–∑–æ–±—Ä–∞–Ω–Ω–æ–≥–æ/—Ä–∞–∑–≤–∞–ª–∏–≤—à–µ–≥–æ—Å—è RAID-–º–∞—Å—Å–∏–≤–∞ –∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏) –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –Ω–∏—Ö –º–∞—Å—Å–∏–≤ —Å –∏–∑–Ω–∞—á–∞–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º (mdadm -D /dev/md0)<br />
<code>mdadm --stop /dev/md127 &amp;&amp; mdadm --assemble --scan &amp;&amp; mount -a &amp;&amp; mdadm -D /dev/md0</code> –µ—Å–ª–∏ –≤ —Å–∏—Å—Ç–µ–º–µ –æ—Å—Ç–∞–ª—Å—è –æ–¥–∏–Ω –¥–∏—Å–∫ (–≤—Ç–æ—Ä–æ–π –∏–∑–≤–ª–µ—á–µ–Ω), RAID-–º–∞—Å—Å–∏–≤ –±—É–¥–µ—Ç –≤–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ –æ–¥–Ω–æ–≥–æ –¥–∏—Å–∫–∞ —Å —Å—Ç–∞—Ç—É—Å–æ–º: clean, degraded, –º–æ–∂–Ω–æ —Å—Ä–∞–∑—É –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –¥–∏—Å–∫ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö<br />
<code>mdadm --assemble /dev/md127 /dev/sdb /dev/sdc</code> —É–∫–∞–∑–∞—Ç—å –≤—Ä—É—á–Ω—É—é –∏–∑ –∫–∞–∫–∏—Ö –¥–∏—Å–∫–æ–≤ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –º–∞—Å—Å–∏–≤<br />
<code>echo 'check' &gt; /sys/block/md127/md/sync_action</code> –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –≤ –º–∞—Å—Å–∏–≤–µ (mdadm -D /dev/md0 - Check Status : 80% complete)<br />
<code>cat /sys/block/md127/md/mismatch_cnt</code> –≤—ã–≤–æ–¥ —Ñ–∞–π–ª–∞ (0 - –≤—Å–µ –≤–ø–æ—Ä—è–¥–∫–µ)<br />
<code>echo 'idle' &gt; /sys/block/md127/md/sync_action</code> –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É</p>
<h2 id="tgt">tgt</h2>
<blockquote>
<p>iSCSI</p>
</blockquote>
<p><code>apt install tgt</code> —Å–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Ä—Ç–∞–ª–æ–º, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç —Ü–µ–ª–∏ (Target), –∫–∞–∂–¥–∞—è –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç—É - –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä—É (Initiator) –¥–æ—Å—Ç—É–ø –∫ –±–ª–æ—á–Ω—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º.<br />
<code>dd if=/dev/zero of=/storage/disk1.img bs=1 count=0 seek=200G</code> —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –¥–∏—Å–∫–∞ (—Ä–∞–∑—Ä–µ–∂–µ–Ω–Ω—ã–π —Ñ–∞–π–ª) —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º 200 –ì–ë, –≥–¥–µ –≤–º–µ—Å—Ç–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω—É–ª–µ–π –Ω–∞ –¥–∏—Å–∫–µ —Ö—Ä–∞–Ω—è—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —ç—Ç–∏—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—è—Ö –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ<br />
<code>dd if=/dev/zero of=/storage/disk1.img bs=1M count=2048</code> —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –¥–∏—Å–∫<br />
<code>cp --sparse=always filename newfilename</code> –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –æ–±—ã—á–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –≤ —Ä–∞–∑—Ä–µ–∂–µ–Ω–Ω—ã–π<br />
<code>nano /etc/tgt/targets.conf</code><br />
<code>nano /etc/tgt/conf.d/disk-1.conf</code></p>
<pre><code>&lt;target iqn.2023-10.local.domain:ubuntu-target&gt; 
   backing-store /storage/disk1.img 
   initiator-address 192.168.3.101
   incominguser user password1212
&lt;/target&gt;
</code></pre>
<p><code>systemctl restart tgt</code><br />
<code>tgtadm --mode target --op show</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç –≤—Å–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ —Ü–µ–ª–∏ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º—ã–µ –∏–º–∏ –±–ª–æ—á–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.</p>
<h2 id="dd">dd</h2>
<p><code>dd if=/dev/sr0 of=/tmp/cd.iso bs=2048</code> —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±—Ä–∞–∑ –¥–∏—Å–∫–∞ (if=–∏—Å—Ç–æ—á–Ω–∏–∫) –≤ —Ñ–∞–π–ª (of=–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ) —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–ª-–≤–∞ –±–∞–π—Ç –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ –∑–∞ –æ–¥–∏–Ω —Ä–∞–∑ (2–ú–ë–∞–π—Ç), –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–∞–∑–º–µ—Ä –±–ª–æ–∫–∞ - 512 –±–∞–π—Ç (2b –±–ª–æ–∫–∞ = 1024 –±–∞–π—Ç, 1k = 1 –ö–ë–∞–π—Ç/1024 –±–∞–π—Ç, 1kB = 1000 –±–∞–π—Ç, 1M = 1024 –ö–ë–∞–π—Ç/1 –ú–ë–∞–π—Ç)<br />
<code>dd if=/dev/mem bs=2048 count=100</code> –≤—ã–≤–µ—Å—Ç–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –Ω–∞ —ç–∫—Ä–∞–Ω (–Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∞–π–ª)<br />
<code>dd if=/dev/zero of=/tmp/md-01 bs=4M count=256</code> —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –Ω—É–ª—è–º–∏ (–∏–∑ /dev/zero) —Ä–∞–∑–º–µ—Ä–æ–º 1–ì–ë —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–ª-–≤–æ –∫–æ–ø–∏—Ä—É–µ–º—ã—Ö –±–ª–æ–∫–æ–≤ (bs*count) –∏–ª–∏ –æ—á–∏—Å—Ç–∏—Ç—å –¥–∏—Å–∫<br />
<code>dd if=/dev/random of=/tmp/md-02 bs=4M count=256</code> —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª —Ä–∞–∑–º–µ—Ä–æ–º 1–ì–ë –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π —Ä–∞–Ω–¥–æ–º–Ω—ã–º–∏ —Ü–∏—Ñ—Ä–∞–º–∏<br />
<code>dd if=/dev/sda of=/tmp/mbr.img bs=1b count=1</code> —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ —Ñ–∞–π–ª –ø–µ—Ä–≤—ã–µ 512 –±–∞–π—Ç –¥–∏—Å–∫–∞ —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ —Ç–∞–±–ª–∏—Ü—É —Ä–∞–∑–¥–µ–ª–æ–≤ MBR<br />
<code>dd if=/dev/sda of=/tmp/sda.img</code> —Å–æ–∑–¥–∞—Ç—å –æ–±—Ä–∞–∑ –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–∞—Å—è –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ backup —Å–∏—Å—Ç–µ–º—ã (–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞ –Ω–∞ –¥–≤–æ–∏—á–Ω–æ–º —É—Ä–æ–≤–Ω–µ,–≤–∫–ª—é—á–∞—è —Ç–∞–±–ª–∏—Ü—É MBR –∏ –≤—Å—é –ø—É—Å—Ç—É—é –æ–±–ª–∞—Å—Ç—å –¥–∏—Å–∫–∞ –∏ —Ä–∞–∑–¥–µ–ª–æ–≤)</p>
<h3 id="backup">backup</h3>
<ul>
<li>–°–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π –Ω–æ—Å–∏—Ç–µ–ª—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—Ä–∞–∑–∞: <code>mount /dev/sdb1 /mnt/disk_b</code></li>
<li><code>dd if=/dev/sda of=/mnt/disk_b/disk.img bs=5M</code> —Å–æ–∑–¥–∞—Ç—å –æ–±—Ä–∞–∑–∞ –¥–∏—Å–∫–∞ (.img) # —Å–æ–∑–¥–∞–µ–º –æ–±—Ä–∞–∑ —Å–∏—Å—Ç–µ–º—ã</li>
<li>–ü–æ–¥–∫–ª—é—á–∏—Ç—å –Ω–æ–≤—ã–π –¥–∏—Å–∫ –¥–ª—è –∑–∞–ø–∏—Å–∏ –æ–±—Ä–∞–∑–∞ –Ω–∞ –¥–∏—Å–∫ (<code>sdc</code>)</li>
<li><code>dd if=/mnt/disk_b/disk.img of=/dev/sdc bs=5M</code> –∑–∞–ø–∏—Å–∞—Ç—å –æ–±—Ä–∞–∑ –Ω–∞ –¥–∏—Å–∫ (—Å sdb1 –Ω–∞ sdc):</li>
<li>–ò–∑–≤–ª–µ—á—å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –ñ–î –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –¥–∏—Å–∫ sda (—Å–∏—Å—Ç–µ–º–Ω—ã–π) –∏ <code>sdb</code> (—Å –∑–∞–ø–∏—Å—å—é –æ–±—Ä–∞–∑–∞). –î–∏—Å–∫ <code>sdc</code> —Å –∫–æ–ø–∏–µ–π —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ –¥–∏—Å–∫ <code>sda</code> –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã.</li>
<li><code>gzip disk.img</code> —Å–∂–∞—Ç—å –æ–±—Ä–∞–∑ (–≤—Å–µ –Ω—É–ª–∏ —Å–æ–∂–º—É—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é - —É–¥–æ–±–Ω–æ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è backup, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ .img)<br />
<code>dd if=/dev/sda conv=sync,noerror bs=5M | gzip -c  &gt; /mnt/disk_b/disk.img.gz</code> —Å–æ–∑–¥–∞—Ç—å —Å–∂–∞—Ç—ã–π –æ–±—Ä–∞–∑ —Å–∏—Å—Ç–µ–º—ã<br />
<code>gunzip -c /mnt/disk_b/disk.img.gz | dd of=/dev/sd—Å</code> —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ–±—Ä–∞–∑ –Ω–∞ –¥–∏—Å–∫</li>
</ul>
<p><code>nc -lp 5000 | sudo dd of=/backup/sda.img.gz</code> —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–∂–∞—Ç–æ–≥–æ —Ñ–∞–π–ª–∞ –æ–±—Ä–∞–∑–∞ –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ sdb –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ (–ø—Ä–∏–Ω–∏–º–∞—é—â–∞—è —Å—Ç–æ—Ä–æ–Ω–∞)<br />
<code>dd if=/dev/sda | gzip -c | nc 192.168.21.121 5000</code> –Ω–∞ —É–∑–ª–µ, —É –∫–æ—Ç–æ—Ä–æ–≥–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∂–µ—Å—Ç–∫–∏–π –¥–∏—Å–∫ (–ø–µ—Ä–µ–¥–∞—é—â–∞—è —Å—Ç–æ—Ä–æ–Ω–∞)<br />
<code>nc -lp 5000 | gunzip -c | sudo dd of=/dev/sdb</code> –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ –∏–∑ —Å–∂–∞—Ç–æ–≥–æ –æ–±—Ä–∞–∑–∞ (–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –Ω–µ –Ω–∞ —Å–∏—Å—Ç–µ–º–Ω—ã–π –¥–∏—Å–∫), —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º —É–∑–ª–µ (–ø—Ä–∏–Ω–∏–º–∞—é—â–∞—è —Å—Ç–æ—Ä–æ–Ω–∞)<br />
<code>cat /backup/sda.img.gz | nc my_local_host.com 5000</code> –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω —Ñ–∞–π–ª –æ–±—Ä–∞–∑–∞ –∂–µ—Å—Ç–∫–æ–≥–æ –¥–∏—Å–∫–∞ (–ø–µ—Ä–µ–¥–∞—é—â–∞—è —Å—Ç–æ—Ä–æ–Ω–∞)</p>
<h3 id="iso">iso</h3>
<p><code>dd if=/dev/sda3 status=progress of=/mnt/disk_b/disk.iso bs=5M</code> —Å–æ–∑–¥–∞—Ç—å iso-–æ–±—Ä–∞–∑ (—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±—Ä–∞–∑ —Ä–∞–∑–¥–µ–ª)<br />
<code>dd if=–ø—É—Ç—å/–∫/–æ–±—Ä–∞–∑—É.iso of=/dev/sdb1</code> –∑–∞–ø–∏—Å–∞—Ç—å ISO-–æ–±—Ä–∞–∑ –û–° –Ω–∞ –≤–Ω–µ—à–Ω–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ<br />
<code>sync</code> –∑–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–ø–∏—Å—å —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥–æ–π (—á—Ç–æ –±—ã –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å —á–∞—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö)<br />
<code>mount -o loop /mnt/disk_b/disk.iso /mnt/iso</code> –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –æ–±—Ä–∞–∑–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è (iso - —ç—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, –∫–æ—Ç–æ—Ä—É—é –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å), –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫–∞–∫ /dev/loop6<br />
<code>umount /mnt/iso</code> –æ—Ç–º–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å</p>
<h3 id="rdiff">rdiff</h3>
<p><code>apt install rdiff-backup</code> –Ω–∞ –±–∞–∑–µ rsync —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã—Ö –∞—Ä—Ö–∏–≤–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—é hard link, —á—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥ –Ω–∞ –∑–∞–¥–∞–Ω–Ω—ã–π –¥–µ–Ω—å<br />
<code>rdiff-backup /usr/lifailon/ /backup/test/</code><br />
<code>rdiff-backup user@hostname::/remote-dir local-dir -v5 --print-statistics</code> –ø–æ ssh —Å —Å–µ—Ä–≤–µ—Ä–∞¬†–Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –±—ç–∫–∞–ø-—Å–µ—Ä–≤–µ—Ä, –≤ –Ω–µ–π –∂–µ –±—É–¥–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è rdiff-backup-data, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –ª–æ–≥–∏ –æ –ø—Ä–æ–≤–æ–¥–∏–º—ã—Ö –±—ç–∫–∞–ø–∞—Ö, –∞ —Ç–∞–∫–∂–µ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –æ—Ç–∫–∞—Ç–∞ –Ω–∞ –ª—é–±–æ–π –ø—Ä–æ—à–ª—ã–π –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –±—ç–∫–∞–ø<br />
<code>rdiff-backup list files --changed-since 5D local-dir</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å, –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –¥–Ω–µ–π<br />
<code>rdiff-backup list files --at 5D local-dir</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –≤ –∞—Ä—Ö–∏–≤–µ 5 –¥–Ω–µ–π –Ω–∞–∑–∞–¥<br />
<code>rdiff-backup restore local-dir/rdiff-backup-data/increments.2023-10-29T21:03:37+03:00.dir /tmp/restore</code> –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª—ã –∏–∑ –∏–Ω–∫—Ä–∏–º–µ–Ω—Ç–∞</p>
<h2 id="users">users</h2>
<p><code>sudo -u www-data</code> –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –æ—Ç –∏–º–µ–Ω–∏ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br />
<code>su root</code> –≤–æ–π—Ç–∏ –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º root<br />
<code>sudo su</code> –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ root, –ø—Ä–∏ —ç—Ç–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Ç–æ–π –∂–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø–æ—Ç–æ–º—É, —á—Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤–∞—à .bashrc. –ê —Ç–∞–∫–∂–µ .profile –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è root –ø–æ—ç—Ç–æ–º—É –≤—ã –æ–∫–∞–∂–µ—Ç–µ—Å—å –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏ root<br />
<code>sudo -i</code> —É–∫–∞–∑—ã–≤–∞–µ—Ç —É—Ç–∏–ª–∏—Ç–µ —á—Ç–æ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å –æ—Ç –∏–º–µ–Ω–∏ root, –ø—Ä–∏ —ç—Ç–æ–º –ø–µ—Ä–µ–º–µ—â–∞—è—Å—å –≤ –¥–æ–º–∞—à–Ω–∏–π –∫–∞—Ç–∞–ª–æ–≥ root, –∏ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –µ–≥–æ .bashrc –∏ .profile<br />
<code>sudo /bin/bash</code> –∑–∞–ø—É—Å–∫–∞–µ—Ç –µ—â–µ –æ–¥–Ω—É –æ–±–æ–ª–æ—á–∫—É bash –æ—Ç –∏–º–µ–Ω–∏ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–µ —á–∏—Ç–∞—é—Ç—Å—è, –Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ .bashrc –≤–∞—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –í—ã –Ω–µ –æ–∫–∞–∂–µ—Ç–µ—Å—å –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏ root, –∞ –ø—Ä–æ—Å—Ç–æ –æ—Å—Ç–∞–Ω–µ—Ç–µ—Å—å –≤ —Å–≤–æ–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ —Å –ø—Ä–∞–≤–∞–º–∏ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</p>
<p><code>cat /etc/passwd</code> —Å–ø–∏—Å–æ–∫/–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤ —Å–∏—Å—Ç–µ–º–µ<br />
<code>cat /etc/group</code> —Å–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø<br />
<code>cat /etc/shadow | grep -Ev "^.+:\*:"</code> –ø–∞—Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ö—Ä–∞–Ω—è—â–∏–µ—Å—è –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ (–∑–∞–¥–∞–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é /usr/bin/passwd), –µ—Å–ª–∏ * –∏–ª–∏ ! –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å–º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ –ø–∞—Ä–æ–ª—é, –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã –≤—Ö–æ–¥–∞, –∫–∞–∫ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–ª—é—á–µ–π –∏–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω—ã. –°–∏–Ω—Ç–∞–∫—Å–∏—Å: –ª–æ–≥–∏–Ω:–ø–∞—Ä–æ–ª—å:–ø–æ—Å–ª–µ–¥–Ω–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –∏—Å—á–∏—Å–ª—è–µ—Ç—Å—è —Å 1 —è–Ω–≤–∞—Ä—è 1970 –≥–æ–¥–∞):–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –ø–∞—Ä–æ–ª—è:–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è:–ø–µ—Ä–∏–æ–¥ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:–ø–µ—Ä–∏–æ–¥ –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è:—Å—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è</p>
<p><code>cat /etc/login.defs | grep -Pv "^$|^#"</code> –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è —É—Ç–∏–ª–∏—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ id –¥–ª—è –≤—ã–¥–∞—á–∏ –Ω–æ–≤–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é/–≥—Ä—É–ø–ø–µ, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞, —Ç–∞–π–º–∞—É, —á—Ç–æ –¥–µ–ª–∞—Ç—å —Å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∏ —Ç.–ø.)<br />
<code>cat /etc/login.defs | grep "^PASS"</code> –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª-–≤–æ –¥–Ω–µ–π –¥–µ–π—Å—Ç–≤–∏—è –ø–∞—Ä–æ–ª—è (PASS_MAX_DAYS), –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–æ–ø—É—Å—Ç–∏–º–æ–µ –º–µ–∂–¥—É —Å–º–µ–Ω–∞–º–∏ –ø–∞—Ä–æ–ª—è (PASS_MIN_DAYS), –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—é—â–∏—Ö –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø–∞—Ä–æ–ª—è (PASS_WARN_AGE), –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª–∏–Ω—ã –ø–∞—Ä–æ–ª–µ–π (PASS_MIN_LEN/PASS_MAX_LEN), –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª-–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞ –ø—Ä–∏ –≤–≤–æ–¥–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è (LOGIN_RETRIES), –≤—Ä–µ–º—è –Ω–∞ –≤—Ö–æ–¥ (LOGIN_TIMEOUT), –≤–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω—ã—Ö –≤—Ö–æ–¥–æ–≤ (LOG_OK_LOGINS), –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–∏–∑–≤–µ—Ç–Ω—ã—Ö –∏–º–µ–Ω –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–∫–∞—Ö –≤—Ö–æ–¥–∞ (LOG_UNKFAIL_ENAB)</p>
<h3 id="passwd">passwd</h3>
<p><code>passwd</code> –≤–∫–ª—é—á–∏—Ç—å —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å root –∏ –∑–∞–¥–∞—Ç—å –µ–π –ø–∞—Ä–æ–ª—å<br />
<code>passwd username</code> —Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br />
<code>passwd -l username</code> –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —É—á. –∑–∞–ø–∏—Å—å<br />
<code>passwd -u username</code> —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —É—á. –∑–∞–ø–∏—Å—å</p>
<h3 id="chage">chage</h3>
<p><code>chage -l root</code> –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–º–µ–Ω–µ –ø–∞—Ä–æ–ª—è –∏ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è (–ø–æ—Å–ª–µ–¥–Ω—è—è —Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è, –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –ø–∞—Ä–æ–ª—è, –ü–∞—Ä–æ–ª—å –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω, –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏, –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –º–µ–∂–¥—É —Å–º–µ–Ω–æ–π –ø–∞—Ä–æ–ª—è, –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –º–µ–∂–¥—É —Å–º–µ–Ω–æ–π –ø–∞—Ä–æ–ª—è, –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø–∞—Ä–æ–ª—è)<br />
<code>chage -E lifailon</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞—Ç—É –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ (-E)<br />
<code>chage lifailon -M 30</code> —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ (-m) –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ (-M) —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø–∞—Ä–æ–ª—è</p>
<h3 id="id">id</h3>
<p><code>id lifailon</code> —É–∑–Ω–∞—Ç—å ID<br />
<code>uid=1000(lifailon) gid=1000(lifailon) groups=1000(lifailon),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),116(lxd)</code><br />
<code>usermod -u 1022 kup</code> –∏–∑–º–µ–Ω–∏—Ç—å UID<br />
<code>groupmod -g 1022 kup</code> –∏–∑–º–µ–Ω–∏—Ç—å GID</p>
<h3 id="usermod">usermod</h3>
<p><code>usermod -L lifailon</code> –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥ –ø–æ –ø–∞—Ä–æ–ª—é (–ø–µ—Ä–µ–¥ –ø–∞—Ä–æ–ª–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ñ–∞–π–ª–µ /etc/shadow –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤–æ—Å–∫–ª–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫)<br />
<code>usermod --expiredate 1 -L lifailon</code> –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–µ –±—É–¥–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ su: Authentication failure)<br />
<code>usermod --expiredate 2023-10-25 lifailon</code> –∑–∞–¥–∞—Ç—å –¥–∞—Ç—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏<br />
<code>usermod --expiredate "" -U lifailon</code> —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br />
<code>usermod -g root lifailon</code> –∏–∑–º–µ–Ω–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—É—é –≥—Ä—É–ø–ø—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br />
<code>usermod -a -G plugdev lifailon</code> –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –≥—Ä—É–ø–ø—É (-G), –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–º–µ—Å—Ç–µ —Å -a, —á—Ç–æ–±—ã –Ω–µ —É–¥–∞–ª—è—Ç—å —Å—Ç–∞—Ä—ã–µ<br />
<code>usermod -d /root lifailon</code> –∏–∑–º–µ–Ω–∏—Ç—å –¥–æ–º–∞—à–Ω—é—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (-d)<br />
<code>usermod -m -d /root lifailon</code> –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –¥–æ–º–∞—à–Ω—é—é –ø–∞–ø–∫—É —Å–æ—Ö—Ä–∞–Ω–∏–≤ –≤—Å–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (-m)<br />
<code>usermod -s /usr/bin/dash lifailon</code> –∏–∑–º–µ–Ω–∏—Ç—å –æ–±–æ–ª–æ—á–∫—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (-s)<br />
<code>usermod -u 2002 lifailon</code> –∏–∑–º–µ–Ω–∏—Ç—å id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (-u)<br />
<code>usermod -l lifailon failon</code> –∏–∑–º–µ–Ω–∏—Ç—å –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (-l)<br />
<code>usermod --password "NewPassword" lifailon</code> –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</p>
<h3 id="profile">profile</h3>
<p><code>nano /etc/bash.bashrc</code> –∑–∞–¥–∞—Ç—å timeout –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –±–µ–∑–¥–µ–π—Å—Ç—É—é—â–∏—Ö (idle time) SSH –∏ –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Å–µ—Å—Å–∏–π<br />
<code>nano /etc/profile</code> –∑–∞–¥–∞—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ—Ñ–∏–ª—è (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∏–∂–µ)</p>
<pre><code>TMOUT=1440
readonly TMOUT
export TMOUT
</code></pre>
<h3 id="bashrc_1">bashrc</h3>
<p><code>.bashrc</code> —Ñ–∞–π–ª –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br />
<code>.bash_profile</code> –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤—Å—Ç—É–ø–∞—é—Ç –≤ —Å–∏–ª—É –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —É–¥–∞–ª–µ–Ω–Ω–æ –ø–æ SSH. –ï—Å–ª–∏ —ç—Ç–æ—Ç —Ñ–∞–π–ª –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –∏—Å–∫–∞—Ç—å .bash_login –∏–ª–∏ .profile<br />
<code>/etc/environment</code> —Ñ–∞–π–ª –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è –∫–∞–∫–∏—Ö-–ª–∏–±–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–º —É—Ä–æ–≤–Ω–µ. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã, –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –¥–∞–∂–µ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏.<br />
<code>/etc/bash.bashrc</code> —Ñ–∞–π–ª –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∫–æ–≥–¥–∞ –æ–Ω —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—É—é —Å–µ—Å—Å–∏—é. –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç, —Ç–∞–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã.<br />
<code>/etc/profile</code> —Å–∏—Å—Ç–µ–º–Ω—ã–π —Ñ–∞–π–ª profile, –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞, –¥–æ—Å—Ç—É–ø–Ω—ã –ª—é–±–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ —Å–∏—Å—Ç–µ–º–µ, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω –≤–æ—à–µ–ª —É–¥–∞–ª–µ–Ω–Ω–æ. –ù–æ –æ–Ω–∏ –Ω–µ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã, –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–æ–π —Å–µ—Å—Å–∏–∏, —Ç–æ –µ—Å—Ç—å –µ—Å–ª–∏ –≤—ã –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä–æ–µ—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª.</p>
<h3 id="useradd">useradd</h3>
<p><code>useradd -D</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é<br />
<code>useradd -o -u 0 -g 0 -s /bin/bash newroot</code> —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø—Ä–∞–≤–∞–º–∏ root<br />
<code>useradd -G adm,wheel -p password -s /bin/bash test2</code> —Ä–∞–∑—Ä–µ—à–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á–∏—Ç–∞—Ç—å –ª–æ–≥–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è sudo</p>
<p><code>useradd username</code><br />
<code>-s</code> —É–∫–∞–∑–∞—Ç—å –∫–æ–º–∞–Ω–¥–Ω—É—é –æ–±–æ–ª–æ—á–∫—É –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é /bin/sh - –±–µ–∑ –æ–±–æ–ª–æ—á–∫–∏, –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å /bin/bash)<br />
<code>-b</code> —É–∫–∞–∑–∞—Ç—å –±–∞–∑–æ–≤—ã–π –∫–∞—Ç–∞–ª–æ–≥ –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –¥–æ–º–∞—à–Ω–µ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é /home)<br />
<code>-d</code> –¥–æ–º–∞—à–Ω–∏–π –∫–∞—Ç–∞–ª–æ–≥, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥—É—Ç —Ä–∞–∑–º–µ—â–∞—Ç—å—Å—è —Ñ–∞–π–ª—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br />
<code>-m</code> —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–æ–º–∞—à–Ω–∏–π –∫–∞—Ç–∞–ª–æ–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –µ—Å–ª–∏ –æ–Ω –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç<br />
<code>-c</code> –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏<br />
<code>-g</code> –æ—Å–Ω–æ–≤–Ω–∞—è –≥—Ä—É–ø–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br />
<code>-G</code> —Å–ø–∏—Å–æ–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –≥—Ä—É–ø–ø<br />
<code>-N</code> –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≥—Ä—É–ø–ø—É —Å –∏–º–µ–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br />
<code>-p</code> –∑–∞–¥–∞—Ç—å –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br />
<code>-l</code> –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Ö–æ–¥–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ lastlog –∏ faillog<br />
<code>-o</code> —Ä–∞–∑—Ä–µ—à–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è linux —Å –Ω–µ—É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º UID<br />
<code>-u</code> –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</p>
<h3 id="adduser">adduser</h3>
<p><code>adduser username</code> –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –¥–æ–º–∞—à–Ω–∏–π –∫–∞—Ç–∞–ª–æ–≥ (/home/username), –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∏ –∑–∞–¥–∞—Ç—å –ø–∞—Ä–æ–ª—å<br />
<code>deluser username</code> —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∫–∞—Ç–∞–ª–æ–≥ –Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è)</p>
<h2 id="chmod">chmod</h2>
<pre><code>    -                    ---                          ---         ---
    |                     |                            |           |
—Ç–∏–ø —Ñ–∞–π–ª–∞   –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≤–ª–∞–¥–µ–ª—å—Ü–∞)   –≥—Ä—É–ø–ø—ã   –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö
</code></pre>
<p><code>---</code> –Ω–µ—Ç –ø—Ä–∞–≤<br />
<code>--x</code> —Ä–∞–∑—Ä–µ—à–µ–Ω–æ —Ç–æ–ª—å–∫–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞, –∫–∞–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–æ –Ω–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏ –Ω–µ —á—Ç–µ–Ω–∏–µ<br />
<code>-w-</code> —Ä–∞–∑—Ä–µ—à–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å—å –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞<br />
<code>-wx</code> —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –≤ —Å–ª—É—á–∞–µ —Å –∫–∞—Ç–∞–ª–æ–≥–æ–º –Ω–µ–ª—å–∑—è –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ<br />
<code>r--</code> –ø—Ä–∞–≤–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ —á—Ç–µ–Ω–∏–µ<br />
<code>r-x</code> —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –±–µ–∑ –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å<br />
<code>rw-</code> –ø—Ä–∞–≤–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å, –Ω–æ –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è<br />
<code>rwx</code> –≤—Å–µ –ø—Ä–∞–≤–∞<br />
<code>--s</code> —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω SUID –∏–ª–∏ SGID –±–∏—Ç, –ø–µ—Ä–≤—ã–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ø–æ–ª–µ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞, –≤—Ç–æ—Ä–æ–π –¥–ª—è –≥—Ä—É–ø–ø—ã<br />
<code>--t</code> —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω sticky-bit, –∑–Ω–∞—á–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª</p>
<p><code>r</code> —á—Ç–µ–Ω–∏–µ<br />
<code>w</code> –∑–∞–ø–∏—Å—å<br />
<code>x</code> –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ<br />
<code>s</code> –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ  –æ—Ç –∏–º–µ–Ω–∏ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π)</p>
<p><code>u</code> –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å-–≤–ª–∞–¥–µ–ª–µ—Ü —Ñ–∞–π–ª–∞<br />
<code>g</code> –≥—Ä—É–ø–ø–∞-–≤–ª–∞–¥–µ–ª—å—Ü —Ñ–∞–π–ª–∞<br />
<code>o</code> –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</p>
<p><code>+</code> –≤–∫–ª—é—á–∏—Ç—å<br />
<code>-</code> –æ—Ç–∫–ª—é—á–∏—Ç—å</p>
<p><code>-R</code> –ø–æ–º–µ–Ω—è—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –≤—Å–µ –ø–æ–¥–∫–∞—Ç–∞–ª–æ–≥–∏ –∏ —Ñ–∞–π–ª—ã —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏<br />
<code>-v</code> –≤—ã–≤–æ–¥–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–±–æ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö</p>
<p><code>chmod u+x filename</code> —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (x) –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ (u)<br />
<code>chmod ugo+x filename</code> —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (x) –¥–ª—è –≤—Å–µ—Ö (ugo)<br />
<code>chmod ug+r filename</code> —Ä–∞–∑—Ä–µ—à–∏—Ç—å —á—Ç–µ–Ω–∏–µ (r) –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ (u) –∏ –≥—Ä—É–ø–ø—ã (g)<br />
<code>chmod o-w filename</code> –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –∑–∞–ø–∏—Å—å (w) –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (o)<br />
<code>chmod -R g+rwx dir</code> –¥–∞—Ç—å –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø (rwx) –≥—Ä—É–ø–ø–µ (g) –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∏ –≤—Å–µ–º —Ñ–∞–π–ª–∞–º –≤ –Ω–µ–π (-R)</p>
<p>–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –≤ –≤–æ—Å—å–º–µ—Ä–∏—á–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—é—Ç —Ç–µ–∫—É—â–∏–µ –ø—Ä–∞–≤–∞ –Ω–æ–≤—ã–º–∏ –¥–ª—è –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:</p>
<p><code>0</code> –Ω–∏–∫–∞–∫–∏—Ö –ø—Ä–∞–≤<br />
<code>1</code> —Ç–æ–ª—å–∫–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ<br />
<code>2</code> —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å—å<br />
<code>3</code> –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å<br />
<code>4</code> —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ<br />
<code>5</code> —á—Ç–µ–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ<br />
<code>6</code> —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å<br />
<code>7</code> —á—Ç–µ–Ω–∏–µ, –∑–∞–ø–∏—Å—å –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ</p>
<p><code>chmod 744 filename</code> —Ä–∞–∑—Ä–µ—à–∏—Ç—å –ø–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞, –∞ –æ—Å—Ç–∞–ª—å–Ω—ã–º —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ<br />
<code>chmod 664 filename</code> —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∏ –≥—Ä—É–ø–ø—ã, —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö</p>
<h3 id="chown">chown</h3>
<p><code>chown lifailon tmp</code> –∏–∑–º–µ–Ω–∏—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è lifailon –¥–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ tmp<br />
<code>chown lifailon:lifailon tmp</code> –∏–∑–º–µ–Ω–∏—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∏ –≥—Ä—É–ø–ø—É<br />
<code>chown -R lifailon:lifailon tmp</code> –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ –≤—Å–µ–º –ø–æ–¥–∫–∞—Ç–∞–ª–æ–≥–∞–º (-R)<br />
<code>chown --from=root:root lifailon:lifailon -R ./</code> –∏–∑–º–µ–Ω–∏—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∏ –≥—Ä—É–ø–ø—É —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Ö –∫–∞—Ç–∞–ª–æ–≥–æ–≤ –∏ —Ñ–∞–π–ª–æ–≤, —É –∫–æ—Ç–æ—Ä—ã—Ö –≤–ª–∞–¥–µ–ª–µ—Ü –∏ –≥—Ä—É–ø–ø–∞ root –≤ —Ç–µ–∫—É—â–µ–º –∫–∞—Ç–∞–ª–æ–≥–µ</p>
<h3 id="groups">groups</h3>
<p><code>groups lifailon</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤ –∫–∞–∫–∏—Ö –≥—Ä—É–ø–ø–∞—Ö –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å<br />
<code>touch testdir</code> –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ñ–∞–π–ª–∞ –µ–º—É –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω–∞—è –≥—Ä—É–ø–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–æ—Ç–æ—Ä—ã–π –µ–≥–æ —Å–æ–∑–¥–∞–ª (ls -l testdir)<br />
<code>cat /etc/group</code> —Å–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø<br />
<code>chgrp testdir tmp</code> –∏–∑–º–µ–Ω–∏—Ç—å –≥—Ä—É–ø–ø—É –Ω–∞ testdir –¥–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ tmp<br />
<code>groupadd testdir</code> —Å–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É<br />
<code>delgroup testdir</code> —É–¥–∞–ª–∏—Ç—å –≥—Ä—É–ø–ø—É, –µ—Å–ª–∏ –æ—à–∏–±–∫–∞ 'testdir' still has <code>testdir' as their primary group!</code> –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∏—Å–∫–ª—é—á–∏—Ç—å –∏–∑ –≥—Ä—É–ø–ø—ã –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
<p>–û–ø—Ü–∏–∏:<br />
<code>-g</code> –∏–∑–º–µ–Ω–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—É—é –≥—Ä—É–ø–ø—É –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br />
<code>-G</code> –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≥—Ä—É–ø–ø—ã, –≤ –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∑–∞—Ç–∏—Ä–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ)<br />
<code>-a</code> –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≥—Ä—É–ø–ø—ã c –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º -G, –∞ –Ω–µ –∑–∞–º–µ–Ω—è—Ç—å –∏–º —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ<br />
<code>-R</code> —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –≥—Ä—É–ø–ø—ã</p>
<h3 id="usermod_1">usermod</h3>
<p><code>usermod -aG sudo lifailon</code> –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –≥—Ä—É–ø–ø—É (-aG, –±–µ–∑ –∑–∞—Ç–∏—Ä–∞–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≥—Ä—É–ø–ø) sudo (–¥–æ–±–∞–≤–∏—Ç—å –≤ –≥—Ä—É–ø–ø—É root)<br />
<code>usermod -aG disk lifailon</code> –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—É–¥–µ—Ç –∏–º–µ—Ç—å –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –ñ–î –±–µ–∑ –∫–æ–º–∞–Ω–¥—ã sudo (–Ω–∞–ø—Ä–∏–º–µ—Ä –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å)<br />
<code>usermod -g root lifailon</code> –∏–∑–º–µ–Ω–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—É—é –≥—Ä—É–ø–ø—É (-g) –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ root<br />
<code>usermod -R ssh lifailon</code> —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –≥—Ä—É–ø–ø—ã</p>
<h2 id="domain">domain</h2>
<h3 id="realmd">realmd</h3>
<p><code>hostnamectl</code><br />
<code>hostnamectl set-hostname srv-01.domain.local</code> –∏–∑–º–µ–Ω–∏—Ç—å –∏–º—è —Å–µ—Ä–≤–µ—Ä–∞ (/etc/hostname)</p>
<p><code>nano /etc/resolv.conf</code><br />
<code>nameserver 192.168.3.233</code> –∞–¥—Ä–µ—Å DC<br />
<code>search domain.local</code></p>
<p><code>apt -y install realmd libnss-sss libpam-sss sssd sssd-tools adcli samba-common-bin oddjob oddjob-mkhomedir packagekit</code><br />
<code>nano /etc/realmd.conf</code> –∑–∞–¥–∞—Ç—å –∞—Ç—Ä–∏–±—É—Ç—ã —Ö–æ—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –≤ AD (–∞—Ç—Ä–∏–±—É—Ç—ã operatingSystem –∏ operatingSystemVersion)</p>
<pre><code>[active-directory]
os-name = Ubuntu Server
os-version = 20.04
</code></pre>
<p><code>realm discover domain.local --verbose</code> –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–æ–º–µ–Ω–∞ –∏ —Å–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã –≤ –¥–æ–º–µ–Ω–µ<br />
<code>realm join --help | grep pass</code><br />
<code>realm join -U username domain.local</code> --one-time-password<code>–≤–≤–µ—Å—Ç–∏ –≤ –¥–æ–º–µ–Ω</code>realm list<code>–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (server-software: active-directory)</code>id username@domain.local` –ø–æ–ª—É—á–∏—Ç—å —Å–≤–µ–¥–µ–Ω–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –¥–æ–º–µ–Ω–∞</p>
<h3 id="sssd">sssd</h3>
<p>–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Linux –∏–∑ –ø–æ–¥ –£–ó –¥–æ–º–µ–Ω–∞ (sssd –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ Kerberos)</p>
<p><code>realm permit -g 'ssh-connect-domain'</code> –¥–æ–±–∞–≤–∏—Ç –¥–æ–º–µ–Ω–Ω—É—é –≥—Ä—É–ø–ø—É (echo "simple_allow_groups = ssh-connect-domain" &gt;&gt; /etc/sssd/sssd.conf)<br />
<code>realm permit username@domain.local</code> –¥–æ–±–∞–≤–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (echo "simple_allow_users = username" &gt;&gt; /etc/sssd/sssd.conf)<br />
<code>realm deny --all</code> –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –¥–æ—Å—Ç—É–ø –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º (–æ—á–∏—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ simple_allow_* –≤ sssd.conf)<br />
<code>systemctl restart sssd</code></p>
<p>–°–æ–∑–¥–∞–≤–∞—Ç—å –¥–æ–º–∞—à–Ω–∏–π –∫–∞—Ç–∞–ª–æ–≥ –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–º–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</p>
<pre><code>bash -c &quot;cat &gt; /usr/share/pam-configs/mkhomedir&quot; &lt;&lt;EOF
Name: activate mkhomedir
Default: yes
Priority: 900
Session-Type: Additional
Session:
required pam_mkhomedir.so umask=0022 skel=/etc/skel
EOF
</code></pre>
<p><code>pam-auth-update</code> –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é, –≤—ã–±—Ä–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—É—é: activate mkhomedir</p>
<p>–ü—Ä–∞–≤–∞ –Ω–∞ sudo:</p>
<p><code>nano /etc/sudoers.d/domain_admins</code> nano /etc/sudoers.d/linux-admins</p>
<pre><code>username@domain.local               ALL=(ALL)       ALL
%ssh-connect-domain@domain.local    ALL=(ALL)       ALL
</code></pre>
<p><code>ssh username@domain.local@hostname</code></p>
<h2 id="syslog">syslog</h2>
<h3 id="server">server</h3>
<p><code>systemctl status rsyslog</code></p>
<p><code>nano /etc/rsyslog.conf</code></p>
<pre><code># provides UDP syslog reception (input module udp)
module(load=&quot;imudp&quot;)
input(type=&quot;imudp&quot; port=&quot;514&quot;)
# provides TCP syslog reception
#module(load=&quot;imtcp&quot;)
#input(type=&quot;imtcp&quot; port=&quot;514&quot;)
# Filter duplicated messages
# –í–∫–ª—é—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
$RepeatedMsgReduction off
# –®–∞–±–ª–æ–Ω —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ IP –∞–¥—Ä–µ—Å–∞ –∫–ª–∏–µ–Ω—Ç–∞ –∏ —Å–±–æ—Ä –≤—Å–µ—Ö –ª–æ–≥–æ–≤ –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª:
$template RemoteLogs,&quot;/var/log/remote/%fromhost-ip%/syslog.log&quot;
# –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –ª—é–±–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (*) —Å –ª—é–±—ã–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º (*) –≤ —Ñ–∞–π–ª, –∑–∞–¥–∞–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω–æ–º (RemoteLogs):
*.* ?RemoteLogs
# –®–∞–±–ª–æ–Ω —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–º–µ–Ω–∏ –∫–ª–∏–µ–Ω—Ç–∞ –∏ –ª–æ–≥-—Ñ–∞–π–ª–æ–≤ –ø–æ –∏–º–µ–Ω–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã:
# $template RemoteLogs,&quot;/var/log/remote/%HOSTNAME%/%PROGRAMNAME%.log&quot;
# *.* ?RemoteLogs
# Include all config files in /etc/rsyslog.d/
$IncludeConfig /etc/rsyslog.d/*.conf
</code></pre>
<p><code>systemctl restart rsyslog</code></p>
<h3 id="client">client</h3>
<p><code>nano /etc/rsyslog.d/all.conf</code></p>
<pre><code># UDP:
*.* @192.168.3.105:514
# TCP:
# *.* @@192.168.3.105:514
# auth.* @@192.168.3.105:514
# *.err @@192.168.3.105:514
</code></pre>
<p><code>systemctl restart rsyslog</code><br />
<code>ls /var/log/remote</code> –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å ip-–∞–¥—Ä–µ—Å–æ–º/–∏–º–µ–Ω–µ–º –∫–ª–∏–µ–Ω—Ç–∞<br />
<code>ls -lh /var/log/remote/*</code><br />
<code>cat /var/log/remote/192.168.3.104/syslog.log | grep influxd</code><br />
<code>systemctl restart zabbix-agent</code><br />
<code>cat /var/log/remote/192.168.3.104/syslog.log | grep zabbix_agentd</code></p>
<h3 id="zabbix-agent">zabbix-agent</h3>
<p><code>nano /etc/zabbix/zabbix_agentd.conf</code></p>
<pre><code># LogType=file
LogType=system
DebugLevel=1
</code></pre>
<p><code>systemctl restart zabbix-agent</code></p>
<h3 id="ommail">ommail</h3>
<p><code>nano /etc/rsyslog.conf</code></p>
<pre><code># –í–∫–ª—é—á–∏—Ç—å –º–æ–¥—É–ª—å:
module(load=&quot;ommail&quot;)
$ActionMailSMTPServer m.domain.ru
$ActionMailSMTPPort 25
$ActionMailFrom zabbix@domain.ru
$ActionMailTo lifailon@domain.ru
# –®–∞–±–ª–æ–Ω, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø–æ–¥—Å—Ç–∞–≤–ª—è—Ç—å—Å—è –∫–∞–∫ —Ç–µ–º–∞ (Subject) –∏ —Ç–µ–ª–æ –ø–∏—Å—å–º–∞ (Body) - –∏–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —à–∞–±–ª–æ–Ω–∞,&quot;—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —à–∞–±–ª–æ–Ω–∞&quot;
$template mailSubject,&quot;rsyslog: disk problem on %hostname%&quot;
$template mailBody,&quot;RSYSLOG Alert\r\nmsg='%msg%'&quot;
$ActionMailSubject mailSubject
$ActionMailBody mailBody
# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É - –æ–¥–Ω–æ –ø–∏—Å—å–º–æ –≤ 5 –º–∏–Ω—É—Ç
$ActionExecOnlyOnceEveryInterval 300
</code></pre>
<h2 id="logrotate">logrotate</h2>
<p><code>systemctl status logrotate.timer</code></p>
<p><code>nano /etc/logrotate.conf</code></p>
<pre><code># –†–æ—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –∂—É—Ä–Ω–∞–ª–∞ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ
weekly
# –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥—Ä—É–ø–ø–∞ adm, –∫–æ—Ç–æ—Ä–∞—è —è–≤–ª—è–µ—Ç—Å—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –≥—Ä—É–ø–ø—ã ls -ld /var/log/syslog
su root adm
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ (–Ω–µ–¥–µ–ª—å, –µ—Å–ª–∏ —Ä–æ—Ç–∞—Ü–∏—è –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ) —Ö—Ä–∞–Ω–µ–Ω–∏—è –∂—É—Ä–Ω–∞–ª–æ–≤
rotate 4
# –°–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ (–ø—É—Å—Ç—ã–µ) —Ñ–∞–π–ª—ã –∂—É—Ä–Ω–∞–ª–æ–≤ –ø–æ—Å–ª–µ —Ä–æ—Ç–∞—Ü–∏–∏ —Å—Ç–∞—Ä—ã—Ö
create
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞—Ç—É –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å—É—Ñ—Ñ–∏–∫—Å–∞ —Ä–æ—Ç–∏—Ä—É–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞
dateext
# –°–∂–∏–º–∞—Ç—å –ª–æ–≥-—Ñ–∞–π–ª—ã
compress
# –ü–∞–∫–µ—Ç—ã —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–æ—Ç–∞—Ü–∏–∏ –∂—É—Ä–Ω–∞–ª–∞ –≤ —ç—Ç–æ—Ç –∫–∞—Ç–∞–ª–æ–≥
include /etc/logrotate.d
</code></pre>
<p><code>nano /etc/logrotate.d/logrotate_remote.conf</code></p>
<pre><code>/var/log/remote/*/*.log {
su root root
daily
copytruncate
size 10M
rotate 2
compress
dateext
}
</code></pre>
<p>–£—Å–ª–æ–≤–∏—è:</p>
<p><code>hourly</code> –∫–∞–∂–¥—ã–π —á–∞—Å<br />
<code>daily</code> –∫–∞–∂–¥—ã–π –¥–µ–Ω—å<br />
<code>weekly</code> –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é<br />
<code>monthly</code> –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü<br />
<code>yearly</code> –∫–∞–∂–¥—ã–π –≥–æ–¥<br />
<code>size</code> –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ª–æ–≥–∞, –º–µ–Ω—å—à–µ —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Ä–æ—Ç–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –Ω–µ –±—É–¥–µ—Ç</p>
<p>–î–µ–π—Å—Ç–≤–∏—è:</p>
<p><code>rotate 2</code> —É–∫–∞–∑–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ä–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ª–æ–≥-—Ñ–∞–π–ª–æ–≤ –Ω—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å, –æ—Å—Ç–∞–ª—å–Ω—ã–µ —É–¥–∞–ª—è—Ç—å<br />
<code>maxage 30</code> —É–∫–∞–∑–∞—Ç—å, –∑–∞ —Å–∫–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–Ω–µ–π —Ö—Ä–∞–Ω–∏—Ç—å —Ä–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã, –æ—Å—Ç–∞–ª—å–Ω—ã–µ —É–¥–∞–ª—è—Ç—å<br />
<code>copytruncate</code> —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–æ–ø–∏—è —Ñ–∞–π–ª–∞ –ª–æ–≥–∞, –ø–æ—Å–ª–µ —É–∂–µ –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤—É—é—â–∏–π (–Ω—É–∂–Ω–æ, –∫–æ–≥–¥–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–æ–ª–∂–Ω–∞ –ø–∏—Å–∞—Ç—å –ª–æ–≥ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ—Ç–µ—Ä–∏ –∑–∞–ø–∏—Å–µ–π, –µ—Å–ª–∏ –æ–Ω–∞ –ø—Ä–∏–¥–µ—Ç—Å—è –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å —É—Å–µ—á–µ–Ω–∏—è)<br />
<code>extension</code> —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ª–æ–≥ —Ñ–∞–π–ª –ø–æ—Å–ª–µ —Ä–æ—Ç–∞—Ü–∏–∏<br />
<code>compress</code> —Å–∂–∏–º–∞—Ç—å —Ä–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ª–æ–≥ (gzip)<br />
<code>delaycompress</code> –Ω–µ —Å–∂–∏–º–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∏ –ø—Ä–µ–¥–ø–æ—Å–ª–µ–¥–Ω–∏–π –∂—É—Ä–Ω–∞–ª (–ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ–º –¥–æ—Å—Ç—É–ø–∞ –∫ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–º—É —Ñ–∞–π–ª—É)<br />
<code>create # 0644 root root</code> —Å–æ–∑–¥–∞—Ç—å –ø—É—Å—Ç–æ–π –ª–æ–≥ —Ñ–∞–π–ª –Ω–∞ –º–µ—Å—Ç–µ —Å—Ç–∞—Ä–æ–≥–æ<br />
<code>olddir /path</code> –ø–µ—Ä–µ–º–µ—â–∞—Ç—å –ª–æ–≥–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –ø–∞–ø–∫—É –ø—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ —É—Å–ª–æ–≤–∏—è<br />
<code>dateext</code> –¥–æ–±–∞–≤–ª—è–µ—Ç –¥–∞—Ç—É —Ä–æ—Ç–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –∑–∞–≥–æ–ª–æ–≤–∫–æ–º —Å—Ç–∞—Ä–æ–≥–æ –ª–æ–≥–∞<br />
<code>missingok</code> –Ω–µ –≤—ã–¥–∞–≤–∞—Ç—å –æ—à–∏–±–∫–∏, –µ—Å–ª–∏ –ª–æ–≥ —Ñ–∞–π–ª–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç<br />
<code>notifempty</code> –µ—Å–ª–∏ —Ñ–∞–π–ª –ø—É—Å—Ç–æ–π, –Ω–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å –Ω–∏–∫–∞–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π<br />
<code>prerotate script.sh endscript</code> —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–µ–¥ —á–∏—Å—Ç–∫–æ–π –ª–æ–≥–∞<br />
<code>postrotate script.sh endscript</code> —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ—Å–ª–µ —á–∏—Å—Ç–∫–∏ –ª–æ–≥–∞<br />
<code>sharedscripts</code> –µ—Å–ª–∏ –±—ã–ª —É–∫–∞–∑–∞–Ω –ø—É—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ wildcard (*), –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –æ–¥–∏–Ω —Ä–∞–∑ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–æ—Ç–∞—Ü–∏–∏ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤</p>
<p><code>logrotate -d /etc/logrotate.d/logrotate_remote.conf</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–æ—Ç–∞—Ü–∏—é (--debug)<br />
<code>logrotate -fv /etc/logrotate.d/logrotate_remote.conf</code> –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ä–æ—Ç–∞—Ü–∏—é —Å–µ–π—á–∞—Å (--force) —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º (--verbose)<br />
<code>cat /etc/cron.daily/logrotate</code> –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª —Ä–æ—Ç–∞—Ü–∏–∏ /etc/logrotate.conf, –≤ –Ω–µ–º —É–∫–∞–∑–∞–Ω–∞ –¥–∏—Ä–µ–∫—Ç—Ä–∏—è: include /etc/logrotate.d –≤ –∫–æ—Ç–æ—Ä–æ–π –ª–µ–∂–∞—Ç —Ñ–∞–π–ª—ã —Ä–æ—Ç–∞—Ü–∏–∏<br />
<code>which logrotate</code> —É–∑–Ω–∞—Ç—å –ø—É—Ç—å –¥–æ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞<br />
<code>crontab -e</code><br />
<code>00 3 * * * /usr/sbin/logrotate -f /etc/logrotate.d/logrotate_remote.conf</code> –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä—É—á–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–º –∑–∞–ø—É—Å–∫–æ–≤ –≤ 3:00</p>
<h2 id="smb">smb</h2>
<h3 id="cifs">cifs</h3>
<p><code>apt install cifs-utils</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å SMB Client</p>
<p><code>nano /root/.smbclient</code></p>
<pre><code>username=lifailon
password=password
#domain=domain.local
</code></pre>
<p><code>mkdir /smb &amp;&amp; mkdir /smb/backup</code> —Å–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è<br />
<code>nano /etc/fstab</code><br />
<code>//192.168.3.100/Backup /smb/backup cifs user,rw,credentials=/root/.smbclient 0 0</code> rw –ø—Ä–∞–≤–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å<br />
<code>mount -a</code> –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å (–æ—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ: 137/UDP; 138/UDP; 139/TCP; 445/TCP)<br />
<code>df -h</code></p>
<p><code>//192.168.3.100/torrent-files /home/lifailon/torrent-files cifs user,rw,credentials=/root/.smbclient,perms=0666 0 0</code><br />
<code>chmod 666 /home/lifailon/torrent-files</code><br />
<code>chown -R lifailon:lifailon /home/lifailon/torrent-files</code><br />
<code>smbclient $path_smb_qb --user=smb --password=kinozal</code></p>
<h3 id="samba">samba</h3>
<p><code>iptables -I INPUT -p tcp --dport 445 -j ACCEPT</code> –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è Samba<br />
<code>iptables -I INPUT -p tcp --dport 137 -j ACCEPT</code> –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–±–æ—Ç—ã NetBIOS (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞)<br />
<code>iptables -I INPUT -p tcp --dport 139 -j ACCEPT</code><br />
<code>iptables -I INPUT -p udp --dport 137:138 -j ACCEPT</code><br />
<code>iptables -L</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–∞–≤–∏–ª<br />
<code>iptables -F</code> –æ—á–∏—Å—Ç–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–∞–≤–∏–ª<br />
<code>apt install iptables-persistent</code><br />
<code>netfilter-persistent save</code> –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</p>
<p><code>apt install samba</code><br />
<code>systemctl status smbd</code><br />
<code>mkdir -p /public/share</code> —Å–æ–∑–¥–∞—Ç—å –æ–±—â—É—é –ø–∞–ø–∫—É<br />
<code>chmod 777 /public/share</code> –≤—ã–¥–∞—Ç—å –ø—Ä–∞–≤–∞</p>
<p><code>nano /etc/samba/smb.conf</code></p>
<pre><code>[global]
workgroup = WORKGROUP # —Ä–∞–±–æ—á–∞—è –≥—Ä—É–ø–ø–∞ (–¥–æ–ª–∂–Ω–∞ –æ–¥–∏–Ω–∞–∫–æ–≤–∞ –Ω–∞ –≤—Å–µ—Ö –º–∞—à–∏–Ω–∞—Ö)

[share1]
    comment = Public folder for all
    path = /public/share
    public = yes
    writable = yes
    read only = no
    guest ok = yes
    create mask = 0777
    directory mask = 0777
    force create mode = 0777
    force directory mode = 0777
</code></pre>
<p><code>[–û–±—â–∞—è –ø–∞–ø–∫–∞]</code> –∏–º—è –æ–±—â–µ–π –ø–∞–ø–∫–∏, –∫–æ—Ç–æ—Ä–æ–µ —É–≤–∏–¥—è—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ<br />
<code>path</code> –ø—É—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –≥–¥–µ –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –¥–∞–Ω–Ω—ã–µ<br />
<code>public</code> –¥–ª—è –æ–±—â–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞, —á—Ç–æ–±—ã –≤—Å–µ –º–æ–≥–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–µ—Å—É—Ä—Å–æ–º<br />
<code>writable</code> —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ —Å–µ—Ç–µ–≤—É—é –ø–∞–ø–∫—É<br />
<code>read only = yes</code> —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è. no - –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –§–°<br />
<code>guest ok</code> —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –ø–∞–ø–∫–µ –≥–æ—Å—Ç–µ–≤–æ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏<br />
<code>create mask, directory mask, force create mode, force directory mode</code> –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π –ø–∞–ø–∫–∏ –∏–ª–∏ —Ñ–∞–π–ª–∞ –Ω–∞–∑–Ω–∞—á–∞—é—Ç—Å—è —É–∫–∞–∑–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞. –í –ø—Ä–∏–º–µ—Ä–µ —É–∫–∞–∑–∞–Ω—ã –ø–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞.</p>
<p><code>systemctl restart smbd</code> –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</p>
<p><code>useradd smb1</code> —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br />
<code>passwd smb1</code> –∑–∞–¥–∞—Ç—å –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é<br />
<code>smbpasswd -a smb1</code> —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è Samba</p>
<pre><code>public = no
writable = no
read only = yes
guest ok = yes # —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∞–Ω–æ–Ω–∏–º–Ω—ã–π –¥–æ—Å—Ç—É–ø –Ω–∞ —á—Ç–µ–Ω–∏–µ (read only) –±–µ–∑ –ø–∞—Ä–æ–ª—è
; valid users = smb1 @smb-users # —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–º —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ –∫–∞—Ç–∞–ª–æ–≥—É –¥–ª—è —á—Ç–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ –≤—Ö–æ–¥—â—è—Ö –≤ –≥—Ä—É–ø–ø—É smb-users
write list = smb1 # —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
hosts allow = comp1, 192.168.160.0/255.255.252.0 # —É–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö —Ö–æ—Å—Ç–æ–≤ –∏–ª–∏ —Å–µ—Ç–µ–π, —Å –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –ï—Å–ª–∏ –µ–≥–æ –ø—Ä–æ–ø–∏—Å–∞—Ç—å –≤ —Å–µ–∫—Ü–∏—é —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π —à–∞—Ä—ã, —Ç–æ –æ–Ω –±—É–¥–µ—Ç –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–µ–µ, –µ—Å–ª–∏ –ø—Ä–æ–ø–∏—Å–∞—Ç—å –≤ [global], —Ç–æ –¥–ª—è –≤—Å–µ—Ö –æ–±—â–∏—Ö –ø–∞–ø–æ–∫
hosts deny = comp2, 192.168.164.0/255.255.252.0 # –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –¥–æ—Å—Ç—É–ø
</code></pre>
<h3 id="client-cifs">client cifs</h3>
<p><code>apt install cifs-utils</code><br />
<code>mkdir /mnt/share1</code><br />
<code>mount -t cifs "//192.168.3.103/share1" /mnt/share1 -o user=smb1</code> –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ Linux —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π<br />
<code>df -handle</code><br />
<code>//192.168.3.103/share1  24G  23G  1.2G  96%  /mnt/share1</code></p>
<h3 id="client-samba-client">client samba-client</h3>
<p><code>apt install samba-client</code><br />
<code>smbclient -L 192.168.3.103 -U share1</code></p>
<h3 id="recycle">recycle</h3>
<pre><code>[share1]
    path = /public/share
    public = yes
    browseable = yes
    writable = yes
    read only = no
    guest ok = yes
    vfs objects = recycle
    recycle:repository = .recycle/%U
    recycle:keeptree = Yes
    recycle:touch = Yes
    recycle:versions = Yes
    recycle:maxsize = 0
    recycle:exclude = *.tmp
    recycle:exclude_dir = /tmp
</code></pre>
<p><code>recycle:repository</code> –≥–¥–µ —Ö—Ä–∞–Ω–∏—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã. –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ø–æ–ø–∞–¥—É—Ç –≤ —Å–∫—Ä—ã—Ç—ã–π –∫–∞—Ç–∞–ª–æ–≥ .recycle –≤ –∫–æ—Ç–æ—Ä–æ–º —Å–æ–∑–¥–∞—Å—Ç—Å—è –∫–∞—Ç–∞–ª–æ–≥ —Å –∏–º–µ–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —É–¥–∞–ª–∏–≤—à–µ–≥–æ —Ñ–∞–π–ª –∏–ª–∏ –ø–∞–ø–∫—É<br />
<code>recycle:keeptree</code> —É–¥–∞–ª—è—Ç—å –æ–±—ä–µ–∫—Ç—ã —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–µ—Ä–µ–≤–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤<br />
<code>recycle:touch</code> –∏–∑–º–µ–Ω–∏—Ç—å –¥–∞—Ç—É –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –ø—Ä–∏ –µ–≥–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É<br />
<code>recycle:versions</code> –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤ —Å —Å–æ–≤–ø–∞–¥–∞—é—â–∏–º–∏ –∏–º–µ–Ω–∞–º–∏, –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–º–µ—Ä –≤–µ—Ä—Å–∏–∏<br />
<code>recycle:maxsize</code> –Ω–µ –ø–æ–º–µ—â–∞—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É —Ñ–∞–π–ª—ã, —Ä–∞–∑–º–µ—Ä –∫–æ—Ç–æ—Ä—ã—Ö –±–æ–ª—å—à–µ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ (–≤ –±–∞–π—Ç–∞—Ö). 0 - –ø–æ–º–µ—â–∞—Ç—å —Ñ–∞–π–ª—ã –ª—é–±–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞<br />
<code>recycle:exclude</code> –∏—Å–∫–ª—é—á–∏—Ç—å —Ñ–∞–π–ª—ã<br />
<code>recycle:exclude_dir</code> –∏—Å–∫–ª—é—á–∏—Ç—å –∫–∞—Ç–∞–ª–æ–≥</p>
<h2 id="nfs">nfs</h2>
<h3 id="server_1">server</h3>
<p><code>apt install nfs-kernel-server</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –æ—Ç–∫—Ä—ã—Ç–∏–µ —à–∞—Ä—ã. –°–µ—Ä–≤–∏—Å NFS —Å–ª—É—à–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –¥–ª—è TCP –∏ UDP –Ω–∞ –ø–æ—Ä—Ç—É 2049.<br />
<code>apt install rpcbind</code><br />
<code>rpcinfo -p | grep nfs</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å–ª—É—à–∞–µ—Ç—Å—è –ª–∏ –ø–æ—Ä—Ç nfs<br />
<code>cat /proc/filesystems | grep nfs</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ª–∏ NFS –Ω–∞ —É—Ä–æ–≤–Ω–µ —è–¥—Ä–∞ (–≤—ã–≤–æ–¥: nodev nfsd)<br />
<code>modprobe nfs</code> –≤—Ä—É—á–Ω—É—é –∑–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥—É–ª—å —è–¥—Ä–∞ nfs<br />
<code>systemctl status nfs-server</code> —Å–ª—É–∂–±–∞ —Å–µ—Ä–≤–µ—Ä–∞<br />
<code>ufw allow 111,2049 &amp;&amp; ufw reload</code><br />
<code>mkdir nfs-folder</code> —Å–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É –¥–ª—è —à–∞—Ä—ã<br />
<code>adduser nfs-user</code> —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è<br />
<code>chown nfs-user:nfs-user nfs-folder</code> –∏–∑–º–µ–Ω–∏—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞ —à–∞—Ä—ã<br />
<code>chmod 775 nfs-folder</code> –¥–∞—Ç—å –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –≤–ª–∞–¥—É–ª—å—Ü—É –∏ –≥—Ä—É–ø–ø–µ<br />
<code>nano /etc/exports</code> —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —à–∞—Ä—ã<br />
<code>/nfs-folder 192.168.3.0/24(rw,sync,no_subtree_check)</code> /–ø—É—Ç—å/–∫/–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (—à–∞—Ä–∏–º), —É–¥–∞–ª–µ–Ω–Ω—ã–π IP-–∞–¥—Ä–µ—Å –∫–ª–∏–µ–Ω—Ç–∞ –∏–ª–∏ –ø–æ–¥—Å–µ—Ç—å (—á—Ç–æ –±—ã —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ –∞–¥—Ä–µ—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 0.0.0.0/24 –∏–ª–∏ —Å–∏–º–≤–æ–ª *) –∏ –æ–ø—Ü–∏–∏ –≤ —Å–∫–æ–±–∫–∞—Ö<br />
<code>exportfs -a</code> –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–æ–±–Ω–æ–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É —ç–∫—Å–ø–æ—Ä—Ç–∞ NFS)</p>
<p>Options:</p>
<p><code>rw</code> —Ä–∞–∑—Ä–µ—à–∏—Ç—å —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å –≤ —ç—Ç–æ–π –ø–∞–ø–∫–µ<br />
<code>ro</code> —Ä–∞–∑—Ä–µ—à–∏—Ç—å —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ<br />
<code>sync</code> –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –Ω–∞ –¥–∏—Å–∫ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)<br />
<code>async</code> –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–æ–∫–∞ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ –¥–∏—Å–∫<br />
<code>secure</code> –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –ø–æ—Ä—Ç—ã –Ω–∏–∂–µ 1024<br />
<code>insecure</code> –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±—ã–µ –ø–æ—Ä—Ç—ã<br />
<code>nohide</code> –Ω–µ —Å–∫—Ä—ã–≤–∞—Ç—å –¥–æ—á–µ—Ä–Ω–∏–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º<br />
<code>root_squash</code> –ø–æ–¥–º–µ–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –æ—Ç root –Ω–∞ –∞–Ω–æ–Ω–∏–º–Ω—ã–µ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)<br />
<code>no_root_squash</code> –Ω–µ –ø–æ–¥–º–µ–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –æ—Ç root –Ω–∞ –∞–Ω–æ–Ω–∏–º–Ω—ã–µ (–≤—Å–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –æ—Ç –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è root —Å—á–∏—Ç–∞—é—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∞–Ω–æ–Ω–∏–º–Ω—ã–º–∏ nfsnobody, –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —ç—Ç–æ–π –æ–ø—Ü–∏–∏ –Ω–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –ª—é–±–æ–π root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –Ω–∞ –∑–∞–ø–∏—Å—å –∫–æ –≤—Å–µ–º —Ñ–∞–π–ª–∞–º)<br />
<code>all_squash</code> –ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –≤ –∞–Ω–æ–Ω–∏–º–Ω—ã–µ<br />
<code>subtree_check</code> –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–µ –ø—ã—Ç–∞–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–π—Ç–∏ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø–∞–ø–∫–∏<br />
<code>no_subtree_check</code> –æ—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø–∞–ø–∫–µ, —É–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –Ω–æ —Å–Ω–∏–∂–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–≥–¥–∞ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è —Ä–∞–∑–¥–µ–ª –¥–∏—Å–∫–∞<br />
<code>anonuid –∏ anongid</code> —É–∫–∞–∑—ã–≤–∞–µ—Ç uid –∏ gid –¥–ª—è –∞–Ω–æ–Ω–∏–º–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</p>
<p>–†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç—É–ø–∞ UNIX, –ø–æ—ç—Ç–æ–º—É, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–∫–ª—é—á–∏–≤—à–∏–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –º–æ–≥ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ø–∞–ø–∫–µ, —Ç–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Å—Ç–æ—Ä–æ–Ω–µ –¥–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º –∂–µ UID (–∏–º–µ–Ω–µ–º –∏ ID), –∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è —Ä–∞—Å—à–∞—Ä–µ–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–æ–ª–∂–Ω–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç—å —Ç–∞–∫–æ–º—É –∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–ª–∏ –≥—Ä—É–ø–ø–µ –≤ –∫–æ—Ç–æ—Ä–æ–π –æ–Ω —Å–æ—Å—Ç–æ–∏—Ç (GID). –ò–ª–∏ –¥–∞—Ç—å –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (chmod 777 nfs-folder), —Ç–æ–≥–¥–∞ –≤—Å–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –æ—Ç –∏–º–µ–Ω–∏: nobody nogroup</p>
<p><code>/nfs-folder 192.168.3.0/24(rw,sync,all_squash,anonuid=1020,anongid=1020)</code> –ª—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Å–µ—Ç–∏ —Å–º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ–∞–π–ª–∞–º —Ä–∞—Å—à–∞—Ä–µ–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å UID 1020 –∏ —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ –±—ã –≤—Å–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å—á–∏—Ç–∞—Ç—å –∑–∞–ø—Ä–æ—Å–∞–º–∏ –æ—Ç –∞–Ω–æ–Ω–∏–º–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∞ –∞–Ω–æ–Ω–∏–º–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∏—Å–≤–æ–∏—Ç—å UID 1020. –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å id 1020 –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ä–∞—Å—à–∞—Ä–µ–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —Ç–æ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Å—Ç–æ—Ä–æ–Ω–µ –æ–Ω –±—É–¥–µ—Ç —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ª—é–±—ã–º UID. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –ø–æ–¥ –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω –≤–ª–∞–¥–µ–ª–µ—Ü —Å –Ω–æ–º–µ—Ä–æ–º UID –∏ GID 1020.<br />
<code>usermod -u 1020 nfs-user</code> –∏–∑–º–µ–Ω–∏—Ç—å UID<br />
<code>groupmod -g 1020 nfs-user</code> –∏–∑–º–µ–Ω–∏—Ç—å GID<br />
<code>id nfs-user</code> –ø—Ä–æ–≤–µ—Ä—è–µ–º ID</p>
<h3 id="client_1">client</h3>
<p><code>apt install nfs-common</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ, —á—Ç–æ –±—ã —Ä–∞–±–æ—Ç–∞—Ç—å c —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π<br />
<code>mkdir /mnt/nfs-folder &amp;&amp; mount 192.168.3.104:/nfs-folder/ /mnt/nfs-folder</code> –ø–æ–¥–∫–ª—é—á–∏—Ç—å —à–∞—Ä—É –∏ –ø—Ä–≤–æ–µ—Ä–∏—Ç—å df -h (192.168.3.104:/nfs-folder  48G  20G  27G  43%  /mnt/nfs-folder)<br />
<code>umount /mnt/nfs-folder</code> –æ—Ç–∫–ª—é—á–∏—Ç—å<br />
<code>showmount -e 192.168.3.104</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤</p>
<h2 id="ftp">ftp</h2>
<p><code>apt install vsftpd</code> —É—Å—Ç–∞–Ω–æ–≤–∫–∞ vsFTPd Server (Very Secure File Transfer Protocol Daemon)<br />
<code>systemctl status vsftpd</code><br />
<code>ufw allow 20:21/tcp</code> –æ—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç—ã –≤ Firewall<br />
<code>ufw allow 30000:31000/tcp</code><br />
<code>cp /etc/vsftpd.conf /etc/vsftpd.conf.bak</code> —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫</p>
<p><code>nano /etc/vsftpd.conf</code></p>
<pre><code>listen=YES
listen_ipv6=NO
anonymous_enable=NO` –æ—Ç–∫–ª—é—á–∏—Ç—å –∞–Ω–∞–Ω–∏–º–Ω—ã–π –≤—Ö–æ–¥
local_enable=YES` —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º–µ–Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –≤—Ö–æ–¥–∞
write_enable=YES` —Ä–∞–∑—Ä–µ—à–∏—Ç—å –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —É–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–æ–∑–º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ). –ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –≤—Å–µ–º–∏ –∫–∞—Ç–∞–ª–æ–≥–∞–º–∏, –∫—É–¥–∞ —É –Ω–µ–≥–æ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø
chroot_local_user=NO` –∫–æ–≥–¥–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ YES, –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏—Ö –¥–æ–º–∞—à–Ω–∏–º–∏ –∫–∞—Ç–∞–ª–æ–≥–∞–º–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –æ—Å—Ç–∞–ª—å–Ω–æ–π —á–∞—Å—Ç–∏ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
chroot_list_enable=YES` –∑–∞–¥–∞—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∏–ª–∏ –Ω–µ –±—É–¥—É—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã —Å–≤–æ–∏–º–∏ –¥–æ–º–∞—à–Ω–∏–º–∏ –∫–∞—Ç–∞–ª–æ–≥–∞–º–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç chroot_local_user
chroot_list_file=/etc/vsftpd.chroot_list` –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è chroot-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
user_sub_token=$USER
local_root=/home/$USER/ftp` —É–∫–∞–∑–∞—Ç—å –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–æ–º–∞—à–Ω–∏–π –∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–º)
userlist_enable=YES` –≤–∫–ª—é—á–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç (–∏–ª–∏ –Ω–µ –º–æ–≥—É—Ç) –≤—Ö–æ–¥–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
userlist_file=/etc/vsftpd.user_list` —É–∫–∞–∑—ã–≤–∞–µ—Ç –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å–æ —Å–ø–∏—Å–∫–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –∏–ª–∏ –∑–∞–ø—Ä–µ—â–µ–Ω—ã
userlist_deny=NO` –ø–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ–≥–¥–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ NO, —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–∑ —Å–ø–∏—Å–∫–∞ userlist_file –º–æ–≥—É—Ç –≤—Ö–æ–¥–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç
connect_from_port_20` YES - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 20 –ø–æ—Ä—Ç –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –≤–º–µ—Å—Ç–æ —Å–ª—É—á–∞–π–Ω–æ–≥–æ (–Ω—É–∂–Ω–æ –¥–ª—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã firewall)
xferlog_enable = YES` –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –≤ –ª–æ–≥ —Ñ–∞–π–ª –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
</code></pre>
<p><code>systemctl restart vsftpd</code><br />
<code>ss -ln | grep -w "21"</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ 21 –ø–æ—Ä—Ç —Å–ª—É—à–∞–µ—Ç (LISTEN)<br />
<code>ss -tn | grep -w "21"</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–∞ 21 –ø–æ—Ä—Ç—É (ESTAB)<br />
<code>cat /var/log/vsftpd.log</code> –ª–æ–≥ —Ä–∞–±–æ—Ç—ã (CONNECT/LOGIN/UPLOAD/DOWNLOAD/RENAME/DELETE)</p>
<h3 id="ftp-client">ftp client</h3>
<p><code>ftp 192.168.3.104</code> –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è SSL<br />
<code>230 Login successful</code> –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É —É—Å–ø–µ—à–µ–Ω<br />
<code>ls</code> –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ<br />
<code>get test.json</code> —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä<br />
<code>put out.txt</code> –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä<br />
<code>bye</code> –∑–∞–∫—Ä—ã—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ</p>
<h3 id="ftps">ftps</h3>
<p><code>sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/ssl/private/vsftpd.key -out /etc/ssl/certs/vsftpd.crt</code> —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∞–º–æ–∑–∞–≤–µ—Ä—è—é—â–∏–π SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏ –∑–∞–∫—Ä—ã—Ç—ã–π –∫–ª—é—á</p>
<p><code>nano /etc/vsftpd.conf</code></p>
<pre><code>ssl_enable=YES
rsa_cert_file=/etc/ssl/certs/vsftpd.crt
rsa_private_key_file=/etc/ssl/private/vsftpd.key
allow_anon_ssl=NO
force_local_data_ssl=YES
force_local_logins_ssl=YES
ssl_tlsv1=YES
ssl_sslv2=NO
ssl_sslv3=NO
require_ssl_reuse=NO
ssl_ciphers=HIGH
</code></pre>
<p><code>useradd -m -s /bin/bash ftpuser</code> –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –¥–æ–º–∞—à–Ω–∏–º –∏–º–µ–Ω–Ω—ã–º –∫–∞—Ç–∞–ª–æ–≥–æ–º –∏ –æ–±–æ–ª–æ—á–∫–æ–π bash<br />
<code>passwd ftpuser</code> –∑–∞–¥–∞—Ç—å –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é<br />
<code>echo "ftpuser" | tee -a /etc/vsftpd.chroot_list</code> –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–ø–∏—Å–æ–∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö –¥–æ–º–∞—à–Ω–∏–º –∫–∞—Ç–∞–ª–æ–≥–æ–º<br />
<code>echo "ftpuser" | tee -a /etc/vsftpd.user_list</code> –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è<br />
<code>mkdir /home/ftpuser/ftp</code> —Å–æ–∑–¥–∞—Ç—å –¥–æ–º–∞—à–Ω–∏—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é<br />
<code>chown ftpuser:ftpuser ftp</code> –Ω–∞–∑–Ω–∞—á–∏—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∏ –≥—Ä—É–ø–ø—É –¥–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏<br />
<code>chmod 555 ftp</code> –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ<br />
<code>mkdir /home/ftpuser/ftp/upload</code> —Å–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –∑–∞–≥—Ä—É–∫–∏ (—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∑–∞–ø–∏—Å–∏)<br />
<code>chown ftpuser:ftpuser upload</code><br />
<code>chmod 775 upload</code> –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∏ –≥—Ä—É–ø–ø—ã</p>
<h2 id="rsync">rsync</h2>
<p><code>rsync -options SRC DST</code></p>
<p><code>-a</code> —Ä–µ–∂–∏–º –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤—Å–µ –∏—Å—Ö–æ–¥–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (–¥–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ —Å–æ–∑–¥–∞–Ω–∏—è)<br />
<code>-b</code> —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏<br />
<code>-c</code> –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã—Ö —Å—É–º–º –¥–ª—è —Ñ–∞–π–ª–æ–≤<br />
<code>-e</code> –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä ssh)<br />
<code>-h</code> –≤—ã–≤–æ–¥–∏—Ç —Ü–∏—Ñ—Ä—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ, –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º –¥–ª—è —á—Ç–µ–Ω–∏—è<br />
<code>-l</code> –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–∏–º–≤–æ–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏<br />
<code>-L</code> –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Å—ã–ª–æ–∫<br />
<code>-p</code> —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø—Ä–∞–≤–∞ –¥–ª—è —Ñ–∞–π–ª–æ–≤<br />
<code>-q</code> –º–∏–Ω–∏–º—É–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏<br />
<code>-u</code> –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –±–æ–ª–µ–µ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã<br />
<code>-v</code> –≤—ã–≤–æ–¥–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è<br />
<code>-w</code> –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏<br />
<code>-z</code> —Å–∂–∏–º–∞—Ç—å —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π<br />
<code>--delete</code> —É–¥–∞–ª—è—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã —É –ø–æ–ª—É—á–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è<br />
<code>--progress</code> –≤—ã–≤–æ–¥–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–µ—Ä–µ–¥–∞—á–∏ —Ñ–∞–π–ª–∞ (–≤ %)<br />
<code>--stat</code> –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–µ—Ä–µ–¥–∞—á–∏</p>
<p><code>rsync -zvh /home/lifailon /backup</code> –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ (skipping directory) —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–¥–Ω–æ–π –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä –Ω–∞ –≤–Ω–µ—à–Ω–∏–π –Ω–æ—Å–∏—Ç–µ–ª—å). –ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤ –≤ –∏—Å—Ö–æ–¥–Ω–æ–π –ø–∞–ø–∫–µ –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–º–µ–Ω–∏—Ç –≤—Å–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (–±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏).</p>
<p><code>nano /etc/rsyncd.conf</code></p>
<pre><code>pid file = /var/run/rsyncd.pid
lock file = /var/run/rsync.lock
log file = /var/log/rsync.log
[share]
path = /backup/
hosts allow = 192.168.3.103
hosts deny = *
list = true
uid = lifailon
gid = lifailon
read only = false
</code></pre>
<p><code>chown kup:kup backup</code> —Å–º–µ–Ω–∏—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∏ –≥—Ä—É–ø–ø—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏<br />
<code>chmod ug+rwx backup</code> –≤—ã–¥–∞—Ç—å –∏–º –ø–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞ (–¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)<br />
<code>systemctl start rsync</code> –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä</p>
<p>–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–π –º–∞—à–∏–Ω–µ (192.168.3.103) –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, —É–∫–∞–∑–∞–Ω–Ω—ã–º –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:</p>
<p><code>rsync -avzh /backup/ kup@192.168.3.103:/tmp/backup/</code> —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–∞–ø–∫–∏ backup (–≤–∫–ª—é—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏) –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Rsync –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç SSH (—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π) —Å –∑–∞–ø—Ä–æ—Å–æ–º –ø–∞—Ä–æ–ª—è (–µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–ª—é—á).<br />
<code>rsync -avzhe "ssh -p 2121" /tmp/backup/ kup@192.168.21.121:/tmp/backup/</code> –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç<br />
<code>rsync -avzh /tmp/backup/ rsync://192.168.21.121:/share</code> —è–≤–Ω–æ –∑–∞–¥–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ Rsync<br />
–ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏—Å—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤, –∑–∞–º–µ–Ω–∏—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–æ–ª—å–∫–æ —Ç–µ—Ö —Ñ–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã (sending incremental file list ./ test3)<br />
<code>rsync -avzh kup@192.168.3.103:/tmp/backup /tmp/backup/</code> —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä<br />
<code>ssh-keygen -t rsa</code> –≤ —Å–ª—É—á–∞–µ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞—Ç—å –∫–ª—é—á –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –µ–≥–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä, —á—Ç–æ–±—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏–ª–∞ –±–µ–∑ –∑–∞–ø—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è<br />
<code>ssh-copy-id -i /home/sk/.ssh/id_rsa.pub kup@192.168.21.10</code> –ø–µ—Ä–µ–¥–∞—Ç—å –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Å –∫–æ—Ç–æ—Ä—ã–º –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è<br />
<code>00 03 * * * rsync -avzhe "ssh -p 2121" /tmp/backup/ kup@192.168.21.121:/tmp/backup/</code> –¥–æ–±–∞–≤–∏—Ç—å –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞—Ç–∞–ª–æ–≥–æ–≤ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3 —á–∞—Å–∞ –Ω–æ—á–∏</p>
<h2 id="apache">apache</h2>
<p><code>apt install apache2</code><br />
<code>cat /etc/apache2/apache2.conf</code><br />
<code>cat /etc/apache2/ports.conf</code><br />
<code>port=8443</code><br />
<code>cat /etc/apache2/ports.conf | sed -r "s/^Listen.+/Listen $port/" &gt; /etc/apache2/ports.conf</code><br />
<code>systemctl restart apache2</code><br />
<code>systemctl status apache2</code><br />
<code>ss -lpn | grep apache</code><br />
<code>echo "&lt;H1&gt;$(hostname)&lt;/H1&gt;" &gt; /var/www/html/index.html</code></p>
<h3 id="api_1">api</h3>
<p><code>mkdir /var/www/api &amp;&amp; touch /var/www/api/api.sh &amp;&amp; chmod +x /var/www/api/api.sh</code><br />
<code>curl -s "https://raw.githubusercontent.com/Lifailon/bash-api-server/rsa/www/api/api.sh" &gt; /var/www/api/api.sh</code> —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä —Å —à–∞–±–ª–æ–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–∞ api</p>
<p><code>nano /var/www/api/api.sh</code></p>
<pre><code class="language-bash">#!/bin/bash
if [ &quot;$REQUEST_METHOD&quot; == &quot;GET&quot; ]
    then
    echo &quot;Content-type: application/json&quot;
    echo
    echo '{&quot;result&quot;: &quot;ok&quot;}'
else
    echo &quot;Content-type: text/plain&quot;
    echo
    echo &quot;Request method not supported&quot;
fi
</code></pre>
<p><code>a2enmod auth_basic</code> –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å –±–∞–∑–æ–≤–æ–π HTTP –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏<br />
<code>htpasswd -b -c /etc/apache2/.htpasswd rest api</code> –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å htpasswd –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è rest —Å –ø–∞—Ä–æ–ª–µ–º api)</p>
<p><code>nano /etc/apache2/sites-available/api.conf</code> —Å–æ–∑–¥–∞—Ç—å VirtualHost –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤</p>
<pre><code>&lt;VirtualHost *:8443&gt;
    DocumentRoot /var/www/html
    # –°–≤—è–∑–∞—Ç—å endpoint (–≤–∫–ª—é—á–∞—è –≤—Å–µ –¥–æ—á–µ—Ä–Ω–∏–∏ –≤ –ø—É—Ç–∏) —Å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º —Ñ–∞–π–ª–æ–º
    ScriptAlias /api /var/www/api/api.sh
    # –í—Å–µ –æ–ø—Ü–∏–∏, –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä—å —Å–µ–∫—Ü–∏–∏ Directory, –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
    &lt;Directory &quot;/var/www/api&quot;&gt;
        # –†–∞–∑—Ä–µ—à–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ CGI-—Å–∫—Ä–∏–ø—Ç–æ–≤
        Options +ExecCGI
        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ sh –∫–∞–∫ CGI-—Å–∫—Ä–∏–ø—Ç
        AddHandler cgi-script .sh
        AllowOverride None
        Require all granted
    &lt;/Directory&gt;
    # –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –¥–ª—è endpoint
    &lt;Location &quot;/api&quot;&gt;
        AuthType Basic
        AuthName &quot;Restricted Area&quot;
        AuthUserFile /etc/apache2/.htpasswd
        Require valid-user
        SetHandler cgi-script
        Options +ExecCGI
    &lt;/Location&gt;
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
&lt;/VirtualHost&gt;
</code></pre>
<p><code>a2enmod cgi</code> –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å (en mod) Common Gateway Interface (CGI)<br />
<code>a2ensite api.conf</code> –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å VirtualHost (en site)<br />
<code>systemctl restart apache2</code><br />
<code>tail -f /var/log/apache2/error.log</code><br />
<code>tail -f /var/log/apache2/access.log</code></p>
<p><code>curl -s -X GET http://127.0.0.1:8443/api -u rest:api | jq .result</code><br />
<code>curl -s -X GET http://127.0.0.1:8443/api/info -u rest:api -H "Content-Type: application/json" | jq .content[]</code></p>
<p><code>REQUEST_METHOD</code> –º–µ—Ç–æ–¥ HTTP-–∑–∞–ø—Ä–æ—Å–∞ (GET, POST, HEAD –∏ —Ç.–¥.)<br />
<code>REQUEST_URI</code> –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π URI –∑–∞–ø—Ä–æ—Å–∞<br />
<code>QUERY_STRING</code> —Å—Ç—Ä–æ–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ URL<br />
<code>CONTENT_TYPE</code> —Ç–∏–ø —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –∫–ª–∏–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, application/text)<br />
<code>CONTENT_LENGTH</code> –¥–ª–∏–Ω–∞ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ –≤ –±–∞–π—Ç–∞—Ö (—á–∞—â–µ, –¥–ª—è POST-–∑–∞–ø—Ä–æ—Å–æ–≤)<br />
<code>read -n $CONTENT_LENGTH POST_DATA</code> –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ Body –∏–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤–≤–æ–¥–∞ (stdin).<br />
<code>HTTP_STATUS</code> —á–∏—Ç–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Status: text"), –∫–æ—Ç–æ—Ä–æ–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∑–∞—Ä–∞–Ω–µ–µ –∏ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º<br />
<code>HTTP_USER_AGENT</code> –Ω–∞–∑–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞ –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, curl/8.4.0)<br />
<code>REMOTE_ADDR</code> –∞–¥—Ä–µ—Å –∫–ª–∏–µ–Ω—Ç–∞<br />
<code>REMOTE_PORT</code> –ø–æ—Ä—Ç –∫–ª–∏–µ–Ω—Ç–∞<br />
<code>SERVER_NAME</code> –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞<br />
<code>SERVER_PORT</code> –ø–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞<br />
<code>SCRIPT_NAME</code> –ø—É—Ç—å –∏ –∏–º—è CGI-—Å–∫—Ä–∏–ø—Ç–∞<br />
<code>SERVER_SOFTWARE</code> –∏–º—è –∏ –≤–µ—Ä—Å–∏—è —Å–µ—Ä–≤–µ—Ä–∞<br />
<code>SERVER_PROTOCOL</code> –≤–µ—Ä—Å–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ HTTP (–Ω–∞–ø—Ä–∏–º–µ—Ä, HTTP/1.1)<br />
<code>HTTPS</code> –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, —Ç–æ –∑–∞–ø—Ä–æ—Å –±—ã–ª —Å–¥–µ–ª–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º HTTPS<br />
<code>AUTH_TYPE</code> —Ç–∏–ø –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –µ—Å–ª–∏ –æ–Ω –±—ã–ª –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω<br />
<code>REMOTE_USER</code> –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –µ—Å–ª–∏ –±—ã–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è<br />
<code>DOCUMENT_ROOT</code> –∫–æ—Ä–Ω–µ–≤–æ–π –∫–∞—Ç–∞–ª–æ–≥ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞</p>
<h3 id="status">status</h3>
<p><code>apachectl -M | grep status_module</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: status_module (shared)<br />
<code>nano /etc/apache2/mods-available/status.conf</code><br />
<code>Require ip 192.168.3.0/24</code> —É–∫–∞–∑–∞—Ç—å –¥–ª—è –∫–æ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞<br />
http://127.0.0.1:8443/server-status<br />
<code>apachectl -t</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å (Syntax OK)<br />
<code>a2enmod status</code> –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å (Module status already enabled)<br />
<code>systemctl restart apache2</code><br />
<code>netstat -tulpan | grep apache2</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç<br />
<code>curl http://127.0.0.1:8443/server-status?auto</code></p>
<h3 id="webdav">webdav</h3>
<p><code>nano /etc/apache2/ports.conf</code></p>
<pre><code>Listen 8443
Listen 2024
</code></pre>
<p><code>mkdir /var/www/webdav &amp;&amp; chown www-data:www-data /var/www/webdav</code> —Å–æ–∑–¥–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥ –∫ –∫–æ—Ç–æ—Ä–æ–º—É –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ WebDAV –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –Ω–µ–º—É –¥–ª—è www-data</p>
<p><code>nano /etc/apache2/sites-available/webdav.conf</code></p>
<pre><code>&lt;VirtualHost *:2024&gt;
    ServerAdmin webmaster@localhost
    DocumentRoot /var/www/webdav
    Alias /webdav /var/www/webdav
    &lt;Directory /var/www/webdav&gt;
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
        Dav On
        AuthType Basic
        AuthName &quot;WebDAV&quot;
        AuthUserFile /etc/apache2/.htpasswd
        Require valid-user
    &lt;/Directory&gt;
    ErrorLog ${APACHE_LOG_DIR}/webdav_error.log
    CustomLog ${APACHE_LOG_DIR}/webdav_access.log combined
&lt;/VirtualHost&gt;
</code></pre>
<p><code>a2enmod dav</code><br />
<code>a2enmod dav_fs</code><br />
<code>a2enmod auth_digest</code><br />
<code>a2enmod authn_core</code><br />
<code>a2enmod authn_file</code><br />
<code>a2enmod authz_core</code><br />
<code>a2enmod authz_user</code><br />
<code>htpasswd /etc/apache2/.htpasswd admin</code> —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è admin (–∫–ª—é—á -—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–∞)<br />
<code>a2ensite webdav</code> –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–∞–π—Ç–∞<br />
<code>systemctl restart apache2</code></p>
<h2 id="haproxy">haproxy</h2>
<p><code>apt install haproxy</code><br />
<code>systemctl status haproxy</code></p>
<p><code>/etc/default/haproxy</code></p>
<pre><code>ENABLED=1
</code></pre>
<p><code>/etc/haproxy/haproxy.cfg</code></p>
<pre><code>global
log 127.0.0.1 local0 notice
maxconn 10000
nbproc 1
user haproxy
group haproxy
daemon

defaults
log global
maxconn global
timeout client 5s
timeout server 5s
timeout connect 5s

frontend http_front
mode http
bind *:8081
#bind *:443 ssl crt /etc/ssl/domain.ru/cert.pem 
option httplog
###mode tcp
###bind *:3389
###option tcplog
use_backend http_back

backend http_back
mode http
balance roundrobin
###mode tcp
###balance leastconn
option httpchk GET / HTTP/1.1\r\nHost:\ localhost
###option tcp-check
###tcp-check connect port 3389
#server term1.domain.ru 192.168.55.30:443 ssl verify none weight 100 check inter 5s fall 5 rise 3
#server term2.domain.ru 192.168.55.35:443 ssl verify none weight 100 check inter 5s fall 5 rise 3
server pi-hole-01 192.168.3.101:8081 weight 100 check inter 5s fall 5 rise 3
server netbox-01 192.168.3.104:8081 weight 100 check inter 5s fall 5 rise 3

listen stats
bind *:8082
#bind *:8080 ssl crt /etc/ssl/domain.ru/cert.pem 
mode http
stats enable
stats uri /
stats auth admin:password
stats show-legends
stats show-node
stats refresh 5s
</code></pre>
<p><code>haproxy -f /etc/haproxy/haproxy.cfg -c</code> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å (Configuration file is valid)<br />
<code>systemctl restart haproxy</code> –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–ø–µ—Ä–µ—á–∏—Ç–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é)<br />
<code>ss -lpn | grep 8081</code><br />
<code>curl http://192.168.3.102:8081</code> –ø—Ä–æ–≤–µ—Ä–∫–∞ http-—Ç—Ä–∞—Ñ–∏–∫–∞<br />
<code>http://192.168.3.102:8082</code> —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞<br />
<code>cat /var/log/haproxy.log</code><br />
<code>journalctl -eu haproxy</code><br />
<code>systemctl stop apache2</code> –æ—Ç–∫–ª—é—á–∏—Ç—å –Ω–∞ 101</p>
<ul>
<li>options:</li>
</ul>
<p><code>maxconn</code> –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π<br />
<code>nbproc</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ HAProxy<br />
<code>option httplog</code> –≤–∫–ª—é—á–∞–µ—Ç –∂—É—Ä–Ω–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ HTTP-—Ç—Ä–∞—Ñ–∏–∫–∞, –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ —á–µ—Ä–µ–∑ HAProxy –∏ –¥–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å HTTP-—Ç—Ä–∞—Ñ–∏–∫ –≤ –∂—É—Ä–Ω–∞–ª–µ, —á—Ç–æ–±—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã<br />
<code>option httpchk</code> –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å HTTP-–∑–∞–ø—Ä–æ—Å—ã –∫ —Å–µ—Ä–≤–µ—Ä–∞–º –≤ –±—ç–∫–µ–Ω–¥–µ, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —Ä–∞–±–æ—Ç–∞—é—Ç –ª–∏ –æ–Ω–∏, —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã—è–≤–ª—è—Ç—å –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ<br />
<code>option httpchk GET / HTTP/1.1\r\nHost:\ localhost</code> –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç GET-–∑–∞–ø—Ä–æ—Å –Ω–∞ –∫–æ—Ä–Ω–µ–≤–æ–π –ø—É—Ç—å (/) –∏—Å–ø–æ–ª—å–∑—É—è –≤–µ—Ä—Å–∏—é –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ HTTP 1.1, Host:\ localhost - —ç—Ç–æ —á–∞—Å—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∞ Host, –∫–æ—Ç–æ—Ä—ã–π —Ç–∞–∫–∂–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ HTTP-–∑–∞–ø—Ä–æ—Å –∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ü–µ–ª–µ–≤–æ–π —Ö–æ—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è<br />
<code>option tcp-check</code> –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –æ–±—â—É—é —Ñ—É–Ω–∫—Ü–∏—é TCP-–ø—Ä–æ–≤–µ—Ä–æ–∫ –¥–ª—è –≤—Å–µ–≥–æ –±—ç–∫—ç–Ω–¥–∞, –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ—Ä—Ç —è–≤–Ω–æ<br />
<code>tcp-check connect port 443</code> HAProxy –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–∞–º–∏ –≤ –±—ç–∫–µ–Ω–¥–µ –Ω–∞ –ø–æ—Ä—Ç—É 443 –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä—ã –¥–æ—Å—Ç—É–ø–Ω—ã –∏ —Å–ø–æ—Å–æ–±–Ω—ã –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–∞ —ç—Ç–æ–º –ø–æ—Ä—Ç—É</p>
<ul>
<li>balance:</li>
</ul>
<p><code>Round Robin (roundrobin)</code> –∞–ª–≥–æ—Ä–∏—Ç–º –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ –æ—á–µ—Ä–µ–¥–∏<br />
<code>static-rr</code> –ø–æ—Ö–æ–∂ –Ω–∞ roundrobin, –Ω–æ –æ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ—Ä—è–¥–æ–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏<br />
<code>Least Connections (leastconn)</code> –≤—ã–±–∏—Ä–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä —Å –Ω–∞–∏–º–µ–Ω—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, —ç—Ç–æ –ø–æ–ª–µ–∑–Ω–æ, –µ—Å–ª–∏ —É —Å–µ—Ä–≤–µ—Ä–æ–≤ —Ä–∞–∑–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å, —Ç–∞–∫ –∫–∞–∫ –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –Ω–∞ –º–µ–Ω–µ–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã<br />
<code>source</code> –∏—Å–ø–æ–ª—å–∑—É–µ—Ç IP-–∞–¥—Ä–µ—Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (–∫–ª–∏–µ–Ω—Ç–∞) –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –æ–¥–Ω–æ–º—É –∏ —Ç–æ–º—É –∂–µ —Å–µ—Ä–≤–µ—Ä—É, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –∫ –æ–¥–Ω–æ–º—É –∏ —Ç–æ–º—É –∂–µ —Å–µ—Ä–≤–µ—Ä—É, —ç—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ–∞–Ω—Å–∞<br />
<code>uri</code> –∑–∞–ø—Ä–æ—Å—ã —Å –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ URL (–¥–æ –∑–Ω–∞–∫–∞ –≤–æ–ø—Ä–æ—Å–∞) –±—É–¥—É—Ç –ø–µ—Ä–µ–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –Ω–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Å–µ—Ä–≤–µ—Ä, —ç—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Ä–∞–∑–Ω—ã–º —á–∞—Å—Ç—è–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è<br />
<code>rdp-cookie</code> –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ RDP (Remote Desktop Protocol), –æ–Ω –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç cookie-–∑–∞–≥–æ–ª–æ–≤–æ–∫ RDP –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π –æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤</p>
<ul>
<li>server:</li>
</ul>
<p><code>ssl</code> –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SSL<br />
<code>verify none</code> –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞<br />
<code>weight</code> —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ –≤–µ—Å—É, –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –±–æ–ª—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤<br />
<code>inter</code> –∏–∑–º–µ–Ω—è–µ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–≤–µ —Å–µ–∫—É–Ω–¥—ã<br />
<code>fall</code> —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç—Ä–∏<br />
<code>rise</code> –∑–∞–¥–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ö–æ–¥–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å, –ø—Ä–µ–∂–¥–µ —á–µ–º –≤–µ—Ä–Ω—É—Ç—å —Ä–∞–Ω–µ–µ –æ—Ç–∫–∞–∑–∞–≤—à–∏–π —Å–µ—Ä–≤–µ—Ä –≤ —Ä–æ—Ç–∞—Ü–∏—é, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–≤–∞<br />
<code>check port 443</code> —É–∫–∞–∑–∞—Ç—å —è–≤–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ—Ä—Ç–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞<br />
<code>check backup</code> –ø–∞—Ä–∞–º–µ—Ç—Ä –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤ —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –∏ –Ω–µ –±—É–¥–µ—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–µ, –ø–æ–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç</p>
<h2 id="keepalive">keepalive</h2>
<p><strong>VRRP (Virtual Router Redundancy Protocol)</strong> - —Å–µ—Ç–µ–≤–æ–π –ø—Ä–æ—Ç–æ–∫–æ–ª, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–æ–≤, –≤—ã–ø–æ–ª–Ω—è—é—â–∏—Ö —Ä–æ–ª—å —à–ª—é–∑–∞<br />
<strong>VRRP-–ø–∞–∫–µ—Ç—ã</strong> - —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —É–∑–ª—ã (–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä—ã/—Å–µ—Ä–≤–µ—Ä–∞) –≤ VRRP-–≥—Ä—É–ø–ø–µ —Ä–∞—Å—Å—ã–ª–∞—é—Ç –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è —Å–≤–æ–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è<br />
<strong>VIP (Virtual IP)</strong> - –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π IP –∞–¥—Ä–µ—Å, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏ –≤ —Å–ª—É—á–∞–µ —Å–±–æ—è (frondend –¥–ª—è haproxy/dns-rr), —É –∫–æ–≥–æ –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤ —Å–µ—Ç–µ–≤–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –ø—Ä–æ–ø–∏—Å–∞–Ω VIP, —Ç–æ—Ç —Å–µ—Ä–≤–µ—Ä –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç<br />
<strong>Master</strong> - —Å–µ—Ä–≤–µ—Ä, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –∞–∫—Ç–∏–≤–µ–Ω VIP (–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç VRRP-–ø–∞–∫–µ—Ç—ã –Ω–∞ backup nodes)<br />
<strong>Backup</strong> - —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è VIP, –≤ —Å–ª—É—á–∞–µ —Å–±–æ—è –º–∞—Å—Ç–µ—Ä–∞ (—Å–ª–µ–¥–∏–º –∑–∞ –º–∞—Å—Ç–µ—Ä–æ–º)<br />
<strong>VRID (virtual_router_id)</strong> - —Å–µ—Ä–≤–µ—Ä–∞, –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–µ –æ–±—â–∏–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º IP (VIP) –æ–±—Ä–∞–∑—É—é—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ä–æ—É—Ç–µ—Ä, —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–æ—Ç–æ—Ä–æ–≥–æ, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ç 1 –¥–æ 255. –°–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å–æ—Å—Ç–æ—è—Ç—å –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö VRID, –ø—Ä–∏ —ç—Ç–æ–º –¥–ª—è –∫–∞–∂–¥–æ–π VRID –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ IP –∞–¥—Ä–µ—Å–∞.<br />
Master —Å–µ—Ä–≤–µ—Ä —Å –∑–∞–¥–∞–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç VRRP –ø–∞–∫–µ—Ç—ã –Ω–∞ –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–¥—Ä–µ—Å multicast (–º–Ω–æ–≥–æ–∞–¥—Ä–µ—Å–Ω–æ–π) —Ä–∞—Å—Å—ã–ª–∫–∏ –∏–ª–∏ unicast –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–µ ip-–∞–¥—Ä–µ—Å–∞, –∞ –≤—Å–µ backup/slave —Å–µ—Ä–≤–µ—Ä–∞ —Å–ª—É—à–∞—é—Ç —ç—Ç–æ—Ç –∞–¥—Ä–µ—Å. –ï—Å–ª–∏ Slave —Å–µ—Ä–≤–µ—Ä –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –ø–∞–∫–µ—Ç—ã, –æ–Ω –Ω–∞—á–∏–Ω–∞–µ—Ç –ø—Ä–æ—Ü–µ–¥—É—Ä—É –≤—ã–±–æ—Ä–∞ Master –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º, –∏ –µ—Å–ª–∏ –æ–Ω –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ Master, —Ç–æ —É –Ω–µ–≥–æ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç VIP (–ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å) –∏ –æ—Ç—Ä–∞–≤–ª—è–µ—Ç gratuitous ARP.<br />
<strong>Gratuitous ARP</strong> - —ç—Ç–æ –≤–∏–¥ ARP –æ—Ç–≤–µ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –æ–±–Ω–æ–≤–ª—è–µ—Ç MAC —Ç–∞–±–ª–∏—Ü—É –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–∞—Ö, —á—Ç–æ–±—ã –ø—Ä–æ–∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ —Å–º–µ–Ω–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ IP-–∞–¥—Ä–µ—Å–∞ –∏ MAC-–∞–¥—Ä–µ—Å–∞ –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞. –ü—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ VRRP, –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞–¥—Ä–µ—Å–∞ –¥–ª—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ IP –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞, —Ç–∞–∫ –∫–∞–∫, –≤ —Å–ª—É—á–∞–µ —Å–±–æ—è, –µ–≥–æ –∞–¥—Ä–µ—Å –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—Å—è –Ω–∞ —Å–æ—Å–µ–¥–Ω–∏–π, –∏ –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏, –æ–Ω –æ–∫–∞–∂–µ—Ç—Å—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –æ—Ç —Å–µ—Ç–∏, –∏ —á—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å —Å–≤–æ–π –∞–¥—Ä–µ—Å, –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ —Å–µ—Ç—å VRRP –ø–∞–∫–µ—Ç, –Ω–æ –Ω–µ –±—É–¥–µ—Ç IP –∞–¥—Ä–µ—Å–∞, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å.</p>
<p><code>/etc/keepalived/keepalived.conf</code></p>
<pre><code>global_defs {
    enable_script_security
}

vrrp_script nginx_check {
    script &quot;/usr/bin/curl http://127.0.0.1&quot;
    interval 5
    user nginx
}

vrrp_instance web {
    state MASTER # –Ω–∞ –≤—Ç–æ—Ä–æ–º —Å–µ—Ä–≤–µ—Ä–µ BACKUP
    interface ens33
    virtual_router_id 110
    priority 255 # –Ω–∞ –≤—Ç–æ—Ä–æ–º —Å–µ—Ä–≤–µ—Ä–µ 100
    advert_int 2
    notify /etc/keepalived/notify-web.sh root
    virtual_ipaddress {
        192.168.3.110
    }
    track_interface {
        ens333
    }
    track_script {
        nginx_check
    }
}
</code></pre>
<p><code>state &lt;MASTER|BACKUP&gt;</code> –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ, –≤ —Ä–µ–∂–∏–º–µ nopreempt –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ - BACKUP<br />
<code>interface</code> –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å VRRP –∏ –ø–æ–¥–Ω–∏–º–∞—Ç—å—Å—è VIP<br />
<code>virtual_router_id &lt;0-255&gt;</code> —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä VRRP —ç–∫–∑–µ–º–ø–ª—è—Ä–∞, –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å –Ω–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö –æ–¥–Ω–æ–π –≥—Ä—É–ø–ø—ã<br />
<code>priority &lt;0-255&gt;</code> –∑–∞–¥–∞–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø—Ä–∏ –≤—ã–±–æ—Ä–µ MASTER, —Å–µ—Ä–≤–µ—Ä —Å –±–æ–ª—å—à–∏–º —á–∏—Å–ª–æ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è MASTER<br />
<code>advert_int &lt;—á–∏—Å–ª–æ —Å–µ–∫—É–Ω–¥&gt;</code> –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —Å –∫–∞–∫–æ–π –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å—é –º–∞—Å—Ç–µ—Ä –¥–æ–ª–∂–µ–Ω —Å–æ–æ–±—â–∞—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–º –æ —Å–µ–±–µ, –∏ –µ—Å–ª–∏ –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏—é –¥–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ –ø–æ–ª—É—á–∞—Ç –æ—Ç –º–∞—Å—Ç–µ—Ä–∞ —à–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç, —Ç–æ –æ–Ω–∏ –∏–Ω–∏—Ü–∏–∏—Ä—É—é—Ç –≤—ã–±–æ—Ä—ã –Ω–æ–≤–æ–≥–æ –º–∞—Å—Ç–µ—Ä–∞<br />
<code>nopreempt</code> –µ—Å–ª–∏ –º–∞—Å—Ç–µ—Ä –ø—Ä–æ–ø–∞–ª –∏–∑ —Å–µ—Ç–∏, –∏ –±—ã–ª –≤—ã–±—Ä–∞–Ω –Ω–æ–≤—ã–π –º–∞—Å—Ç–µ—Ä —Å –º–µ–Ω—å—à–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º, —Ç–æ –ø–æ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–∏ —Å—Ç–∞—Ä—à–µ–≥–æ –º–∞—Å—Ç–µ—Ä–∞, –æ–Ω –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ BACKUP, –ø–æ–∫–∞ –Ω–æ–≤—ã–π –º–∞—Å—Ç–µ—Ä –Ω–µ –æ—Ç–≤–∞–ª–∏—Ç—Å—è<br />
<code>preempt_delay</code> —á—Ç–æ –±—ã –º–∞—Å—Ç–µ—Ä–æ–º –±—ã–ª –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–µ—Ä, —Ç–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É nopreempt –Ω–∞ preempt_delay<br />
<code>notify</code> —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞, –∏ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –æ—Ç –∏–º–µ–Ω–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –¥–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –ø–æ—á—Ç—É)<br />
<code>virtual_ipaddress</code> –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π IP-–∞–¥—Ä–µ—Å (VIP), –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥–µ—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ MASTER, –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å –Ω–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö –≤–Ω—É—Ç—Ä–∏ VRRP —ç–∫–∑–µ–º–ø–ª—è—Ä–∞<br />
<code>track_interface</code> –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤, –ø–µ—Ä–µ–≤–æ–¥–∏—Ç VRRP —ç–∫–∑–µ–º–ø–ª—è—Ä –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ FAULT, –µ—Å–ª–∏ –æ–¥–∏–Ω –∏–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ DOWN<br />
<code>track_script</code> –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–∫—Ä–∏–ø—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 0 –µ—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —É—Å–ø–µ—à–Ω–æ –∏–ª–∏ 1, –µ—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Å –æ—à–∏–±–∫–æ–π<br />
<code>fall &lt;—á–∏—Å–ª–æ&gt;</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑, –∫–æ—Ç–æ—Ä–æ–µ —Å–∫—Ä–∏–ø—Ç –≤–µ—Ä–Ω—É–ª –Ω–µ –Ω—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –ø–µ—Ä–µ–π—Ç–∏ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ FAULT<br />
<code>rise &lt;—á–∏—Å–ª–æ&gt;</code> –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑, –∫–æ—Ç–æ—Ä–æ–µ —Å–∫—Ä–∏–ø—Ç –≤–µ—Ä–Ω—É–ª –Ω—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –≤—ã–π—Ç–∏ –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è FAULT<br />
<code>timeout &lt;—á–∏—Å–ª–æ&gt;</code> –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è, –ø–æ–∫–∞ —Å–∫—Ä–∏–ø—Ç –≤–µ—Ä–Ω–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –≤–µ—Ä–Ω—É—Ç—å –Ω–µ–Ω—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ</p>
<p><code>journalctl -u keepalived</code><br />
<code>cat /var/log/messages | grep -i keepalived</code><br />
<code>tail /var/run/keepalived.INSTANCE.web.state</code></p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright ¬© 2023-2024 Alex Kup (Lifailon)
    </div>
  
  
  PowerShell Commands on
  <a href="https://github.com/Lifailon/PS-Commands" target="_blank" rel="noopener">
    GitHub
  </a>
  | Theme
  <a href="https://github.com/squidfunk/mkdocs-material" target="_blank" rel="noopener">
    Material
  </a>
  for
  <a href="https://github.com/mkdocs/mkdocs" target="_blank" rel="noopener">
    MkDocs
  </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/Lifailon/PS-Commands" target="_blank" rel="noopener" title="PS-Commands on Github" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.dd8806f2.min.js"></script>
      
        <script src="../assets/highlight/highlight.min.js"></script>
      
        <script src="../assets/highlight/powershell.min.js"></script>
      
        <script src="../assets/highlight/init.js"></script>
      
    
  </body>
</html>